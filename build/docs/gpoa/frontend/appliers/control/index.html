<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-gpoa/frontend/appliers/control" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">control | GPUpdate Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gpupdate-docs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://gpupdate-docs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://gpupdate-docs.github.io/docs/gpoa/frontend/appliers/control"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="control | GPUpdate Docs"><meta data-rh="true" name="description" content="FunctionDef controlsubst(pregname)"><meta data-rh="true" property="og:description" content="FunctionDef controlsubst(pregname)"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/appliers/control"><link data-rh="true" rel="alternate" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/appliers/control" hreflang="en"><link data-rh="true" rel="alternate" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/appliers/control" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d27c289a.css">
<script src="/assets/js/runtime~main.e7149247.js" defer="defer"></script>
<script src="/assets/js/main.19b81b89.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">GPUpdate Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/gpoa/backend/applier_backend">gpoa</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/backend/applier_backend">backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/gpoa/frontend/applier_frontend">frontend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/applier_frontend">applier_frontend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/gpoa/frontend/appliers/control">appliers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/gpoa/frontend/appliers/control">control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/envvar">envvar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/file_cp">file_cp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/firewall_rule">firewall_rule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/folder">folder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/gsettings">gsettings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/ini_file">ini_file</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/netshare">netshare</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/polkit">polkit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/systemd">systemd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/util">util</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/chromium_applier">chromium_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/cifs_applier">cifs_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/control_applier">control_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/cups_applier">cups_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/envvar_applier">envvar_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/file_applier">file_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/firefox_applier">firefox_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/firewall_applier">firewall_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/folder_applier">folder_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/frontend_manager">frontend_manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/gsettings_applier">gsettings_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/ini_applier">ini_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/kde_applier">kde_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/networkshare_applier">networkshare_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/ntp_applier">ntp_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/package_applier">package_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/polkit_applier">polkit_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/scripts_applier">scripts_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/shortcut_applier">shortcut_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/systemd_applier">systemd_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/yandex_browser_applier">yandex_browser_applier</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/gpt/">gpt</a><button aria-label="Expand sidebar category &#x27;gpt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/plugin/">plugin</a><button aria-label="Expand sidebar category &#x27;plugin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/storage/cache">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/test/frontend/appliers/test_controls">test</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/util/">util</a><button aria-label="Expand sidebar category &#x27;util&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tools/parsing_chrom_admx_intvalues">tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">gpoa</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">frontend</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">appliers</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">control</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>control</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-control_substpreg_name">FunctionDef control_subst(preg_name)<a href="#functiondef-control_substpreg_name" class="hash-link" aria-label="Direct link to FunctionDef control_subst(preg_name)" title="Direct link to FunctionDef control_subst(preg_name)">​</a></h2>
<p><strong>control_subst</strong>: The function of control_subst is to provide a workaround for control names that cannot be used in PReg/ADMX files by replacing them with valid control names.</p>
<p><strong>parameters</strong>:
· preg_name: A string representing the name of the control that needs to be replaced.</p>
<p><strong>Code Description</strong>:
The function initializes an empty dictionary, control_triggers, which maps the invalid control names to their valid counterparts. The keys in the dictionary are the invalid control names, and the values are the valid control names.</p>
<p>The function then checks if the input parameter, preg_name, is present in the control_triggers dictionary. If it is, the function replaces the invalid control name with its valid counterpart by returning the value associated with the key in the control_triggers dictionary. Otherwise, the function returns the original input parameter, preg_name.</p>
<p>This function is used in the <strong>gpoa/frontend/appliers/control.py/control</strong> package to initialize the control_name attribute of the control class. The control_name attribute is set to the value returned by the control_subst function, which ensures that the control name is valid and can be used in PReg/ADMX files.</p>
<p><strong>Note</strong>:
It is important to note that the control_subst function only replaces specific invalid control names with their valid counterparts. If the input parameter is not one of the invalid control names present in the control_triggers dictionary, the function returns the original input parameter. Therefore, it is essential to ensure that the input parameter is one of the invalid control names present in the dictionary to get the desired output.</p>
<p><strong>Output Example</strong>:
If the input parameter is &#x27;dvd_rw-format&#x27;, the function returns &#x27;dvd+rw-format&#x27;.
If the input parameter is &#x27;dvd_rw-mediainfo&#x27;, the function returns &#x27;dvd+rw-mediainfo&#x27;.
If the input parameter is &#x27;dvd_rw-booktype&#x27;, the function returns &#x27;dvd+rw-booktype&#x27;.
If the input parameter is not present in the control_triggers dictionary, the function returns the original input parameter.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-control">ClassDef control<a href="#classdef-control" class="hash-link" aria-label="Direct link to ClassDef control" title="Direct link to ClassDef control">​</a></h2>
<p><strong>control</strong>: The <code>control</code> class is used to interact with system controls, which are configurable entities that can be queried and modified.</p>
<p><strong>attributes</strong>:
· <code>name</code>: A string representing the name of the control.
· <code>value</code>: An integer or string representing the value of the control.</p>
<p><strong>Code Description</strong>:
The <code>control</code> class initializes with a name and a value, which can be either an integer or a string. It checks the type of the value and raises an exception if it is not an integer or a string. The <code>control_name</code> attribute is created by applying a substitution function to the name. The <code>possible_values</code> attribute is populated by querying the possible values of the control using the <code>_query_control_values</code> method. This method executes a shell command to get the list of possible values.</p>
<p>The <code>_map_control_status</code> method is used to get the string value of a control by its numeric index. It tries to access the index in the <code>possible_values</code> list and returns the corresponding string if it exists. Otherwise, it logs an error.</p>
<p>The <code>get_control_name</code> method returns the name of the control. The <code>get_control_status</code> method returns the current status of the control by executing a shell command.</p>
<p>The <code>set_control_status</code> method sets the status of the control. If the value is an integer, it tries to get the string value by index using the <code>_map_control_status</code> method. If the value is a string, it checks if it is in the <code>possible_values</code> list. If the value is valid, it logs the action and executes a shell command to set the status of the control. Otherwise, it logs an error.</p>
<p>The <code>control</code> class is used in the <code>run</code> method of the <code>control_applier</code> class in the <code>control_applier.py</code> module. The <code>run</code> method iterates over a list of control settings, creates <code>control</code> objects for each setting, and sets the status of each control using the <code>set_control_status</code> method.</p>
<p>The <code>control</code> class is also used in the <code>test_control_with_int</code>, <code>test_control_int_out_of_range</code>, and <code>test_control_with_str</code> methods of the <code>ControlTestCase</code> class in the <code>test_controls.py</code> module. These methods test the behavior of the <code>control</code> class with different types of control values.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>control</code> class relies on the <code>/usr/sbin/control</code> shell command to query and modify system controls. Make sure this command is available and has the necessary permissions.</li>
<li>The <code>control</code> class assumes that the <code>control_subst</code> function is defined and available. Make sure this function is defined and works correctly.</li>
<li>The <code>control</code> class assumes that the <code>log</code> function is defined and available. Make sure this function is defined and works correctly.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a control object with name &#x27;sshd-gssapi-auth&#x27; and value 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_control </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> control</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;sshd-gssapi-auth&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get the name of the control</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">test_control</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_control_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Output: &#x27;sshd-gssapi-auth&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get the current status of the control</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">test_control</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_control_status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Output: &#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set the status of the control</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_control</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_control_status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The actual effect on the system depends on the specific control and its possible values</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-name-value">FunctionDef <strong>init</strong>(self, name, value)<a href="#functiondef-initself-name-value" class="hash-link" aria-label="Direct link to functiondef-initself-name-value" title="Direct link to functiondef-initself-name-value">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong><strong>init</strong></strong> is to initialize the control object with a name and a value, and to check the validity of the value based on the possible values obtained by querying the control.</p>
<p><strong>parameters</strong>:
· <strong>name</strong>: A string representing the name of the control. This name is used to query the possible values of the control and to replace any invalid control names with valid counterparts using the <code>control_subst</code> function.
· <strong>value</strong>: An integer or a string representing the value of the control. This value is checked for validity based on the possible values obtained by querying the control.</p>
<p><strong>Code Description</strong>:
The <code>__init__</code> function initializes the control object by first checking the type of the value parameter. If the type is not an integer or a string, an exception is raised.</p>
<p>Next, the function replaces any invalid control names with valid counterparts by calling the <code>control_subst</code> function with the name parameter. The result is stored in the <code>control_name</code> attribute of the object.</p>
<p>The function then sets the <code>control_value</code> attribute of the object to the value parameter.</p>
<p>The <code>possible_values</code> attribute of the object is then obtained by calling the <code>_query_control_values</code> function with no arguments. This function queries the possible values of the control and returns them as a list. If the function is unable to query the possible values, an exception is raised.</p>
<p>Finally, the function checks the validity of the <code>control_value</code> attribute by checking if it is present in the <code>possible_values</code> list. If it is not, an exception is raised.</p>
<p><strong>Relation with Callers</strong>:
The <code>__init__</code> function calls the <code>control_subst</code> and <code>_query_control_values</code> functions to replace any invalid control names with valid counterparts and to obtain the possible values of the control, respectively. These functions are defined in the same module as the <code>__init__</code> function.</p>
<p><strong>Note</strong>:
It is important to note that the <code>__init__</code> function assumes that the <code>control_subst</code> and <code>_query_control_values</code> functions are defined and function as expected. Additionally, the function assumes that the control binary is located at <code>/usr/sbin/control</code> and that it supports the &#x27;list&#x27; command.</p>
<p>The <code>__init__</code> function is called when a new control object is created, and it ensures that the object is initialized with a valid name and value. If any errors occur during initialization, an exception is raised.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-_query_control_valuesself">FunctionDef _query_control_values(self)<a href="#functiondef-_query_control_valuesself" class="hash-link" aria-label="Direct link to FunctionDef _query_control_values(self)" title="Direct link to FunctionDef _query_control_values(self)">​</a></h3>
<p><strong><code>_query_control_values</code></strong>: The function of <code>_query_control_values</code> is to query possible values from the control in order to perform a check of the parameter passed to the constructor.</p>
<p><strong>Parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>:
The function initializes an empty list <code>values</code> to store the possible values of the control. It then creates a list <code>popen_call</code> containing the path of the control binary, the name of the control, and the &#x27;list&#x27; command. This list is used to call the control binary with the &#x27;list&#x27; command using the <code>subprocess.Popen</code> function. The <code>stdout</code> and <code>stderr</code> of the process are set to <code>subprocess.PIPE</code> to capture the output and errors respectively.</p>
<p>The <code>proc.stdout.readline().decode(&#x27;utf-8&#x27;).split()</code> line reads the first line of the output, decodes it from bytes to string, and splits it into a list of strings which are stored in the <code>values</code> list. The first line of the output is expected to contain the possible values of the control.</p>
<p>The <code>proc.stderr.readline().decode(&#x27;utf-8&#x27;)</code> line reads the first line of the error output, decodes it from bytes to string. If there is any error, it raises a <code>ValueError</code> with the error message.</p>
<p>The process is then waited to complete using <code>proc.wait()</code>.</p>
<p>The function finally returns the <code>values</code> list containing the possible values of the control.</p>
<p><strong>Relation with Callers</strong>:
This function is called in the <code>__init__</code> method of the same class to query the possible values of the control. These possible values are then checked against the value passed to the constructor to ensure that the value is valid.</p>
<p><strong>Note</strong>:
This function assumes that the control binary is located at <code>/usr/sbin/control</code> and that it supports the &#x27;list&#x27; command.</p>
<p><strong>Output Example</strong>:
A possible output of this function for a control named &#x27;example&#x27; could be <code>[&#x27;value1&#x27;, &#x27;value2&#x27;, &#x27;value3&#x27;]</code>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-_map_control_statusself-int_status">FunctionDef _map_control_status(self, int_status)<a href="#functiondef-_map_control_statusself-int_status" class="hash-link" aria-label="Direct link to FunctionDef _map_control_status(self, int_status)" title="Direct link to FunctionDef _map_control_status(self, int_status)">​</a></h3>
<p><strong><code>_map_control_status</code></strong>: The function of <code>_map_control_status</code> is to get the control&#x27;s string value by providing a numeric index.</p>
<p><strong>parameters</strong>:</p>
<p>· <code>self</code>: The instance of the class to which this method belongs.</p>
<p>· <code>int_status</code>: An integer representing the index of the control&#x27;s string value.</p>
<p><strong>Code Description</strong>:</p>
<p>The method <code>_map_control_status</code> is defined within the <code>control</code> class and is used to retrieve the string value of a control based on the provided numeric index. It first attempts to access the <code>possible_values</code> attribute of the class instance using the provided index. If the index is not valid, an <code>IndexError</code> exception is raised, and the function logs an error message using the <code>log</code> function with the error code &#x27;E41&#x27;. If the index is valid, the corresponding string value is returned.</p>
<p>This function is called by the <code>set_control_status</code> method of the same class. The <code>set_control_status</code> method checks if the <code>control_value</code> attribute of the class instance is an integer. If it is, the method calls <code>_map_control_status</code> with the <code>control_value</code> as the argument. If the returned value is <code>None</code>, an error message is logged using the <code>log</code> function with the error code &#x27;E42&#x27;.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>possible_values</code> attribute of the class instance should be a list of string values that the control can take.</li>
<li>The <code>int_status</code> parameter should be a valid index for the <code>possible_values</code> list.</li>
<li>The <code>_map_control_status</code> method should only be called by the <code>set_control_status</code> method.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<p>If the <code>possible_values</code> attribute of the class instance is <code>[&#x27;ON&#x27;, &#x27;OFF&#x27;]</code> and the <code>int_status</code> parameter passed to the <code>_map_control_status</code> method is <code>0</code>, the method will return <code>&#x27;ON&#x27;</code>. If the <code>int_status</code> parameter passed to the <code>_map_control_status</code> method is <code>2</code>, an <code>IndexError</code> exception will be raised, and the <code>log</code> function will be called with the error code &#x27;E41&#x27;.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-get_control_nameself">FunctionDef get_control_name(self)<a href="#functiondef-get_control_nameself" class="hash-link" aria-label="Direct link to FunctionDef get_control_name(self)" title="Direct link to FunctionDef get_control_name(self)">​</a></h3>
<p><strong>get_control_name</strong>: The function of get_control_name is to return the name of the control.</p>
<p><strong>parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>: The function get_control_name is a method of the control class, which can be accessed using an object of this class. It does not require any arguments and returns the attribute control_name of the object on which it is called.</p>
<p>Here&#x27;s a breakdown of the code:</p>
<ul>
<li><code>def get_control_name(self):</code> defines the function get_control_name with the object on which it is called as the first parameter, denoted by self.</li>
<li><code>return self.control_name</code> returns the value of the attribute control_name of the object on which the function is called.</li>
</ul>
<p><strong>Note</strong>: This function is an accessor method, which is used to retrieve the value of an object&#x27;s attribute. It is a good practice to use accessor methods to access an object&#x27;s attributes, rather than accessing them directly, as it allows for better encapsulation and control over the object&#x27;s state.</p>
<p><strong>Output Example</strong>: If an object of the control class has been created with the control_name attribute set to &quot;button&quot;, then calling the get_control_name function on that object would return the string &quot;button&quot;. For example:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">control_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> control</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">control_obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">control_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;button&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">control_obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_control_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Output: button</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-get_control_statusself">FunctionDef get_control_status(self)<a href="#functiondef-get_control_statusself" class="hash-link" aria-label="Direct link to FunctionDef get_control_status(self)" title="Direct link to FunctionDef get_control_status(self)">​</a></h3>
<p><strong>get_control_status</strong>：The function of get_control_status is to retrieve the current status value of a specified control.</p>
<p><strong>parameters</strong>：This function does not take any parameters.</p>
<p><strong>Code Description</strong>：</p>
<p>The function begins by initializing a variable <code>line</code> to None, which will later hold the status value of the control.</p>
<p>Next, it creates a list <code>popen_call</code> containing the path to the control utility and the name of the control as arguments. This list will be passed to the <code>Popen</code> function to execute the command and capture its output.</p>
<p>The <code>Popen</code> function is then called with the <code>popen_call</code> list as an argument, and its <code>stdout</code> is set to <code>subprocess.PIPE</code>. This allows the function to capture the output of the command. The <code>with</code> statement is used to ensure that the subprocess is properly cleaned up after it completes.</p>
<p>Inside the <code>with</code> block, the function reads the first line of the output using the <code>readline</code> method and decodes it from bytes to a string using the &#x27;utf-8&#x27; encoding. The newline characters are then stripped from the string using the <code>rstrip</code> method.</p>
<p>Finally, the function returns the value of the <code>line</code> variable, which contains the status value of the control.</p>
<p><strong>Note</strong>：</p>
<ul>
<li>This function assumes that the control utility is located at &#x27;/usr/sbin/control&#x27;. If the location of the utility is different on your system, you will need to modify the <code>popen_call</code> list accordingly.</li>
<li>The function only reads the first line of the output from the control utility. If the utility outputs multiple lines, only the first line will be captured.</li>
<li>The function does not handle any errors that may occur when executing the command. You may want to add error handling code to ensure that the function behaves correctly in all situations.</li>
</ul>
<p><strong>Output Example</strong>：</p>
<p>Assuming the control utility returns the string &quot;ON&quot; as the status value, the function will return:</p>
<p><code>&quot;ON&quot;</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-set_control_statusself">FunctionDef set_control_status(self)<a href="#functiondef-set_control_statusself" class="hash-link" aria-label="Direct link to FunctionDef set_control_status(self)" title="Direct link to FunctionDef set_control_status(self)">​</a></h3>
<p><strong>set_control_status</strong>: The function of <code>set_control_status</code> is to set the status of a control based on its value, which can be either an integer or a string.</p>
<p><strong>parameters</strong>:</p>
<p>· <code>self</code>: The instance of the class to which this method belongs.</p>
<p><strong>Code Description</strong>:</p>
<p>The <code>set_control_status</code> method is defined within the <code>control</code> class and is used to set the status of a control based on its value. It first checks if the <code>control_value</code> attribute of the class instance is an integer. If it is, the method calls the <code>_map_control_status</code> method with the <code>control_value</code> as the argument to get the corresponding string value. If the returned value is <code>None</code>, an error message is logged using the <code>log</code> function with the error code &#x27;E42&#x27;. If the <code>control_value</code> attribute is a string, the method checks if it is in the <code>possible_values</code> list. If it is not, an error message is logged using the <code>log</code> function with the error code &#x27;E59&#x27;. If the <code>control_value</code> attribute is a valid string, it is used as the status.</p>
<p>After determining the status, the method logs a message using the <code>log</code> function with the error code &#x27;D68&#x27; and the control name and status. Then, it attempts to call the <code>/usr/sbin/control</code> command with the control name and status as arguments. If the command fails, an error message is logged using the <code>log</code> function with the error code &#x27;E43&#x27;.</p>
<p>This method is called by the <code>test_control_with_int</code>, <code>test_control_int_out_of_range</code>, and <code>test_control_with_str</code> methods in the <code>ControlTestCase</code> class in the <code>test_controls.py</code> file. These methods test the <code>set_control_status</code> method with different inputs to ensure it is working correctly.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>control_value</code> attribute of the class instance should be either an integer or a string.</li>
<li>If the <code>control_value</code> attribute is an integer, it should be a valid index for the <code>possible_values</code> list.</li>
<li>If the <code>control_value</code> attribute is a string, it should be in the <code>possible_values</code> list.</li>
<li>The <code>/usr/sbin/control</code> command should be available and executable on the system.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<p>If the <code>possible_values</code> attribute of the class instance is <code>[&#x27;ON&#x27;, &#x27;OFF&#x27;]</code> and the <code>control_value</code> attribute is <code>0</code>, the <code>set_control_status</code> method will log a message with the error code &#x27;D68&#x27; and the control name and status (e.g., <code>{&#x27;control&#x27;: &#x27;control_name&#x27;, &#x27;status&#x27;: &#x27;ON&#x27;}</code>). If the <code>/usr/sbin/control</code> command is not available or executable, the method will log an error message with the error code &#x27;E43&#x27; and the control name and status (e.g., <code>{&#x27;control&#x27;: &#x27;control_name&#x27;, &#x27;status&#x27;: &#x27;ON&#x27;}</code>).</p>
<hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/gpoa/frontend/applier_frontend"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">applier_frontend</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/gpoa/frontend/appliers/envvar"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">envvar</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#functiondef-control_substpreg_name" class="table-of-contents__link toc-highlight">FunctionDef control_subst(preg_name)</a></li><li><a href="#classdef-control" class="table-of-contents__link toc-highlight">ClassDef control</a><ul><li><a href="#functiondef-initself-name-value" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, name, value)</a></li><li><a href="#functiondef-_query_control_valuesself" class="table-of-contents__link toc-highlight">FunctionDef _query_control_values(self)</a></li><li><a href="#functiondef-_map_control_statusself-int_status" class="table-of-contents__link toc-highlight">FunctionDef _map_control_status(self, int_status)</a></li><li><a href="#functiondef-get_control_nameself" class="table-of-contents__link toc-highlight">FunctionDef get_control_name(self)</a></li><li><a href="#functiondef-get_control_statusself" class="table-of-contents__link toc-highlight">FunctionDef get_control_status(self)</a></li><li><a href="#functiondef-set_control_statusself" class="table-of-contents__link toc-highlight">FunctionDef set_control_status(self)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/gpoa/backend/samba_backend">Samba Backend</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 BaseALT LTD, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>