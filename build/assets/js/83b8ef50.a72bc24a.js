"use strict";(self.webpackChunkgpupdate_docs=self.webpackChunkgpupdate_docs||[]).push([[632],{9464:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var s=n(4848),o=n(8453);const r={},i=void 0,l={id:"gpoa/test/frontend/appliers/test_controls",title:"test_controls",description:"ClassDef ControlTestCase",source:"@site/docs/gpoa/test/frontend/appliers/test_controls.md",sourceDirName:"gpoa/test/frontend/appliers",slug:"/gpoa/test/frontend/appliers/test_controls",permalink:"/docs/gpoa/test/frontend/appliers/test_controls",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"sqlite_registry_compat",permalink:"/docs/gpoa/storage/sqlite_registry_compat"},next:{title:"test_packages",permalink:"/docs/gpoa/test/frontend/appliers/test_packages"}},c={},a=[{value:"ClassDef ControlTestCase",id:"classdef-controltestcase",level:2},{value:"FunctionDef test_control_with_int(self)",id:"functiondef-test_control_with_intself",level:3},{value:"FunctionDef test_control_int_out_of_range(self)",id:"functiondef-test_control_int_out_of_rangeself",level:3},{value:"FunctionDef test_control_with_str(self)",id:"functiondef-test_control_with_strself",level:3}];function h(e){const t={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"classdef-controltestcase",children:"ClassDef ControlTestCase"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"ControlTestCase"}),": The function of ControlTestCase is to provide semi-integrational tests for the control facility."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Attributes"}),": This class does not have any attributes."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":"]}),"\n",(0,s.jsx)(t.p,{children:"The ControlTestCase class is a subclass of unittest.TestCase and contains methods that test the control framework's functionality. The class contains three methods, each testing a different aspect of the control framework."}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_with_int"})," method tests the control framework's invocation with an integer value. It loads data from a PReg file, where all values are stored as strings, and transforms the value to string before passing it to the control function. This test ensures that the control framework can handle integer values correctly."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_int_out_of_range"})," method tests the control framework's invocation with an incorrect integer value that is out of range. Similar to the previous method, it loads data from a PReg file and transforms the value to string before passing it to the control function. This test ensures that the control framework can handle incorrect integer values correctly."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_with_str"})," method tests the control framework's invocation with a string value. It loads data from a PReg file and passes the string value directly to the control function. This test ensures that the control framework can handle string values correctly."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"load_preg"})," function is not defined in this code snippet, and it should be defined and implemented before using this class."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"control"})," function is not defined in this code snippet, and it should be defined and implemented before using this class."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"set_control_status"})," method is not defined in this code snippet, and it should be defined and implemented in the ",(0,s.jsx)(t.code,{children:"control"})," class before using this class."]}),"\n",(0,s.jsx)(t.li,{children:"The PReg files used in this class should be valid and contain the correct data to test the control framework's functionality."}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"control_name"})," and ",(0,s.jsx)(t.code,{children:"control_value"})," parameters used in this class should be valid and match the data in the PReg files."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_int_out_of_range"})," method uses a hardcoded ",(0,s.jsx)(t.code,{children:"control_name"})," and ",(0,s.jsx)(t.code,{children:"control_value"})," parameters. These parameters should be loaded from a PReg file or passed as arguments to the method to ensure that the test is flexible and can handle different use cases."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-test_control_with_intself",children:"FunctionDef test_control_with_int(self)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"test_control_with_int"}),": The function of test_control_with_int is to test the control framework invocation with an integer value. It is used to verify the functionality of the control class when the control value is an integer."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":"]}),"\n",(0,s.jsx)(t.p,{children:"\xb7 self: The instance of the ControlTestCase class to which this method belongs."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":"]}),"\n",(0,s.jsx)(t.p,{children:"The test_control_with_int method first loads the preg data from a file named 'control_int.pol' using the load_preg function. It then iterates over each entry in the preg data and extracts the control name and value. The value is converted to an integer using the int() function. A new control object is created with the control name and integer value. The set_control_status method is called on the control object to set the control status."}),"\n",(0,s.jsx)(t.p,{children:"This method is used to test the functionality of the control class when the control value is an integer. It verifies that the control status is set correctly based on the integer value. The method does not return any value and does not print any output. It is used for testing purposes only."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"The test_control_with_int method is a test method that is used to verify the functionality of the control class when the control value is an integer."}),"\n",(0,s.jsx)(t.li,{children:"The method assumes that the load_preg function is available and returns a valid preg object."}),"\n",(0,s.jsx)(t.li,{children:"The method tests the control framework invocation with an integer value and verifies that the control status is set correctly based on the integer value."}),"\n",(0,s.jsx)(t.li,{children:"The method does not return any value and does not print any output. It is used for testing purposes only."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Raw code:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"def test_control_with_int(self):\n    '''\n    Test procedure for control framework invocation with integer\n    value. The type of data loaded from PReg must be 'int' but\n    we're storing all values as strings inside the database. So,\n    for the test to be correct - we transform the value to string\n    first.\n    '''\n    preg_file = 'test/frontend/appliers/data/control_int.pol'\n\n    preg_data = load_preg(preg_file)\n    for entry in preg_data.entries:\n        control_name = entry.valuename\n        control_value = str(entry.data)\n\n        test_control = control(control_name, int(control_value))\n        test_control.set_control_status()\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-test_control_int_out_of_rangeself",children:"FunctionDef test_control_int_out_of_range(self)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"test_control_int_out_of_range"}),": The function of ",(0,s.jsx)(t.code,{children:"test_control_int_out_of_range"})," is to test the behavior of the ",(0,s.jsx)(t.code,{children:"control"})," class when an integer value that is out of range is passed as the control value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),": This function does not take any parameters."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":"]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_int_out_of_range"})," function is a test case method in the ",(0,s.jsx)(t.code,{children:"ControlTestCase"})," class that tests the ",(0,s.jsx)(t.code,{children:"control"})," class with an integer value that is out of range. It first initializes a ",(0,s.jsx)(t.code,{children:"control"})," object with a name and an integer value that is out of range. It then calls the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method of the ",(0,s.jsx)(t.code,{children:"control"})," object to set the status of the control."]}),"\n",(0,s.jsxs)(t.p,{children:["The function does not explicitly check for any specific behavior or output of the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method. Instead, it relies on the assertions and error handling mechanisms of the ",(0,s.jsx)(t.code,{children:"ControlTestCase"})," class to detect any errors or exceptions that may be raised during the execution of the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_int_out_of_range"})," function is called by the ",(0,s.jsx)(t.code,{children:"test_control_with_int"})," function in the ",(0,s.jsx)(t.code,{children:"ControlTestCase"})," class, which tests the ",(0,s.jsx)(t.code,{children:"control"})," class with different integer values, including an integer value that is out of range."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_int_out_of_range"})," function tests the behavior of the ",(0,s.jsx)(t.code,{children:"control"})," class when an integer value that is out of range is passed as the control value."]}),"\n",(0,s.jsxs)(t.li,{children:["The function does not explicitly check for any specific behavior or output of the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method."]}),"\n",(0,s.jsxs)(t.li,{children:["The function relies on the assertions and error handling mechanisms of the ",(0,s.jsx)(t.code,{children:"ControlTestCase"})," class to detect any errors or exceptions that may be raised during the execution of the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method."]}),"\n",(0,s.jsxs)(t.li,{children:["The function is called by the ",(0,s.jsx)(t.code,{children:"test_control_with_int"})," function in the ",(0,s.jsx)(t.code,{children:"ControlTestCase"})," class, which tests the ",(0,s.jsx)(t.code,{children:"control"})," class with different integer values, including an integer value that is out of range."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_int_out_of_range"})," function does not take any parameters."]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-test_control_with_strself",children:"FunctionDef test_control_with_str(self)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"test_control_with_str"}),": The function of ",(0,s.jsx)(t.code,{children:"test_control_with_str"})," is to test the behavior of the ",(0,s.jsx)(t.code,{children:"control"})," class when setting the status of a control with a string value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":"]}),"\n",(0,s.jsxs)(t.p,{children:["\xb7 ",(0,s.jsx)(t.code,{children:"self"}),": The instance of the ",(0,s.jsx)(t.code,{children:"ControlTestCase"})," class to which this method belongs."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":"]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"test_control_with_str"})," method creates a ",(0,s.jsx)(t.code,{children:"control"})," object with a name and a string value. It then sets the status of the control using the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method of the ",(0,s.jsx)(t.code,{children:"control"})," class. The method checks if the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method logs an error message with the error code 'E59', which indicates that the string value is not in the ",(0,s.jsx)(t.code,{children:"possible_values"})," list. If the error message is not logged, the method passes the test."]}),"\n",(0,s.jsxs)(t.p,{children:["This method is used to test the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method of the ",(0,s.jsx)(t.code,{children:"control"})," class with a string value. It ensures that the ",(0,s.jsx)(t.code,{children:"set_control_status"})," method correctly checks if the string value is in the ",(0,s.jsx)(t.code,{children:"possible_values"})," list."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"control"})," class should be defined and available."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"control"})," class should have a ",(0,s.jsx)(t.code,{children:"set_control_status"})," method."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"set_control_status"})," method should log an error message with the error code 'E59' if the string value is not in the ",(0,s.jsx)(t.code,{children:"possible_values"})," list."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Raw code:```\ndef test_control_with_str(self):\n'''\nTest procedure for control framework invocation with string\nvalue. The type of data loaded from PReg must be 'str'.\n'''\npreg_file = 'test/frontend/appliers/data/control_string.pol'"}),"\n",(0,s.jsx)(t.p,{children:"preg_data = load_preg(preg_file)\nfor entry in preg_data.entries:\ncontrol_name = entry.valuename\ncontrol_value = entry.data"}),"\n",(0,s.jsx)(t.p,{children:"test_control = control(control_name, str(control_value))\ntest_control.set_control_status()"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-==========",children:"\n\nThe `test_control_with_str` method is part of the `ControlTestCase` class, which is used to test the behavior of the `control` class. The method creates a `control` object with a name and a string value from the `control_string.pol` file. It then sets the status of the control using the `set_control_status` method of the `control` class.\n\nThe `load_preg` function is used to load the `control_string.pol` file into a `preg` object. The `preg` object is then iterated over to get the name and value of each control. The `control` object is created with the name and string value of each control.\n\nThe `set_control_status` method of the `control` class is then called with the `control` object as the argument. This method sets the status of the control based on its value. If the value is a string, the method checks if it is in the `possible_values` list. If the value is not in the list, the method logs an error message with the error code 'E59'.\n\nThe `test_control_with_str` method checks if the `set_control_status` method logs an error message with the error code 'E59' when the string value is not in the `possible_values` list. If the error message is not logged, the method passes the test.\n\nIn summary, the `test_control_with_str` method tests the behavior of the `control` class when setting the status of a control with a string value. It ensures that the `set_control_status` method correctly checks if the string value is in the `possible_values` list.\n***\n"})})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var s=n(6540);const o={},r=s.createContext(o);function i(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);