"use strict";(self.webpackChunkgpupdate_docs=self.webpackChunkgpupdate_docs||[]).push([[3825],{2274:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>l,frontMatter:()=>h,metadata:()=>c,toc:()=>r});var s=n(4848),i=n(8453);const h={},a=void 0,c={id:"gpoa/frontend/appliers/gsettings",title:"gsettings",description:"ClassDef system_gsetting",source:"@site/docs/gpoa/frontend/appliers/gsettings.md",sourceDirName:"gpoa/frontend/appliers",slug:"/gpoa/frontend/appliers/gsettings",permalink:"/gpupdate-docs/docs/gpoa/frontend/appliers/gsettings",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"folder",permalink:"/gpupdate-docs/docs/gpoa/frontend/appliers/folder"},next:{title:"ini_file",permalink:"/gpupdate-docs/docs/gpoa/frontend/appliers/ini_file"}},o={},r=[{value:"ClassDef system_gsetting",id:"classdef-system_gsetting",level:2},{value:"FunctionDef <strong>init</strong>(self, schema, path, value, lock, helper_function)",id:"functiondef-initself-schema-path-value-lock-helper_function",level:3},{value:"FunctionDef apply(self, settings, config, locks)",id:"functiondef-applyself-settings-config-locks",level:3},{value:"ClassDef system_gsettings",id:"classdef-system_gsettings",level:2},{value:"FunctionDef <strong>init</strong>(self, override_file_path)",id:"functiondef-initself-override_file_path",level:3},{value:"FunctionDef append(self, schema, path, data, lock, helper)",id:"functiondef-appendself-schema-path-data-lock-helper",level:3},{value:"FunctionDef apply(self)",id:"functiondef-applyself",level:3},{value:"FunctionDef glib_map(value, glib_type)",id:"functiondef-glib_mapvalue-glib_type",level:2},{value:"FunctionDef dconf_path(settings, path)",id:"functiondef-dconf_pathsettings-path",level:2},{value:"FunctionDef glib_value(schema, path, value, settings)",id:"functiondef-glib_valueschema-path-value-settings",level:2},{value:"FunctionDef check_existing_gsettings(schema, path)",id:"functiondef-check_existing_gsettingsschema-path",level:2},{value:"ClassDef user_gsettings",id:"classdef-user_gsettings",level:2},{value:"FunctionDef <strong>init</strong>(self)",id:"functiondef-initself",level:3},{value:"FunctionDef append(self, schema, path, value, helper)",id:"functiondef-appendself-schema-path-value-helper",level:3},{value:"FunctionDef apply(self)",id:"functiondef-applyself-1",level:3},{value:"ClassDef user_gsetting",id:"classdef-user_gsetting",level:2},{value:"FunctionDef <strong>init</strong>(self, schema, path, value, helper_function)",id:"functiondef-initself-schema-path-value-helper_function",level:3},{value:"FunctionDef apply(self)",id:"functiondef-applyself-2",level:3}];function d(e){const t={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"classdef-system_gsetting",children:"ClassDef system_gsetting"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"system_gsetting"}),": The ",(0,s.jsx)(t.code,{children:"system_gsetting"})," class is used to apply a system-level gsetting with a given schema, path, value, and lock status. It also allows for the use of a helper function to modify the value before applying it."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"attributes"}),":"]}),"\n",(0,s.jsxs)(t.p,{children:["\xb7 ",(0,s.jsx)(t.code,{children:"schema"}),": A string representing the schema of the gsetting."]}),"\n",(0,s.jsxs)(t.p,{children:["\xb7 ",(0,s.jsx)(t.code,{children:"path"}),": A string representing the path of the gsetting."]}),"\n",(0,s.jsxs)(t.p,{children:["\xb7 ",(0,s.jsx)(t.code,{children:"value"}),": The value to be set for the gsetting."]}),"\n",(0,s.jsxs)(t.p,{children:["\xb7 ",(0,s.jsx)(t.code,{children:"lock"}),": A boolean indicating whether the gsetting should be locked after being applied."]}),"\n",(0,s.jsxs)(t.p,{children:["\xb7 ",(0,s.jsx)(t.code,{children:"helper_function"}),": An optional function that takes the schema, path, and value as arguments and returns a modified value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":"]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"__init__"})," method initializes the class with the given schema, path, value, lock, and an optional helper function."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," method applies the gsetting with the given schema and path, and sets its value to the result of the helper function (if provided) or the original value. If a DuplicateSectionError occurs during the addition of the section, it is ignored. The method then sets the lock status of the gsetting and appends its path to the locks list."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"system_gsetting"})," class is used by the ",(0,s.jsx)(t.code,{children:"append"})," method in the ",(0,s.jsx)(t.code,{children:"system_gsettings"})," object to append a new gsetting to the list of gsettings. The ",(0,s.jsx)(t.code,{children:"append"})," method checks if the gsetting already exists, and if it does, it appends a new ",(0,s.jsx)(t.code,{children:"system_gsetting"})," object to the ",(0,s.jsx)(t.code,{children:"gsettings"})," list. If the gsetting does not exist, it logs an error message."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"helper_function"})," parameter is optional and can be set to ",(0,s.jsx)(t.code,{children:"None"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," method sets the value of the gsetting as a string, so the value should be convertible to a string."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"lock"})," parameter determines whether the gsetting is locked after being applied. If set to ",(0,s.jsx)(t.code,{children:"True"}),", the gsetting cannot be modified by non-privileged users."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," method appends the lock path to the ",(0,s.jsx)(t.code,{children:"locks"})," list, which can be used to release the locks at a later time."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"system_gsetting"})," class is used to apply a single gsetting, while the ",(0,s.jsx)(t.code,{children:"system_gsettings"})," object is used to manage a list of gsettings."]}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"functiondef-initself-schema-path-value-lock-helper_function",children:["FunctionDef ",(0,s.jsx)(t.strong,{children:"init"}),"(self, schema, path, value, lock, helper_function)"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.strong,{children:"init"})}),": The function of ",(0,s.jsx)(t.strong,{children:"init"})," is to initialize the system_gsetting object with the provided parameters."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 schema: A string representing the schema name for the GSettings.\n\xb7 path: A string representing the path for the GSettings.\n\xb7 value: A value to be set in the GSettings.\n\xb7 lock: A lock object to prevent concurrent access to the GSettings.\n\xb7 helper_function (optional): A helper function to be used for setting the value in the GSettings. If not provided, the default behavior is used."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.strong,{children:"init"})," function initializes the system_gsetting object by storing the provided parameters in instance variables. The schema, path, and lock variables are stored as-is, while the value is converted to a string before being stored. This is because GSettings values are always stored as strings."]}),"\n",(0,s.jsx)(t.p,{children:"If a helper_function is provided, it is stored in the instance variable helper_function. This can be used to customize the behavior of the system_gsetting object when setting the value in the GSettings."}),"\n",(0,s.jsx)(t.p,{children:"The lock object is used to prevent concurrent access to the GSettings. This is important because GSettings is not thread-safe, and concurrent access can lead to data corruption. By using a lock, we can ensure that only one thread can access the GSettings at a time."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nIt is important to always provide a lock object when initializing the system_gsetting object. Failing to do so can lead to data corruption in the GSettings."]}),"\n",(0,s.jsx)(t.p,{children:"When setting the value in the GSettings, it is recommended to use the helper_function parameter to customize the behavior. This can be useful for setting complex values or for performing additional checks before setting the value."}),"\n",(0,s.jsx)(t.p,{children:"When providing a helper_function, it is important to ensure that it is thread-safe. Any code that accesses the GSettings should be wrapped in the lock to prevent concurrent access."}),"\n",(0,s.jsx)(t.p,{children:"Finally, it is important to note that the system_gsetting object does not actually set the value in the GSettings. Instead, it provides a convenient interface for doing so. The actual setting of the value is performed by a separate function or method, which should be called after the system_gsetting object has been initialized."}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-applyself-settings-config-locks",children:"FunctionDef apply(self, settings, config, locks)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"apply"}),": The function of ",(0,s.jsx)(t.code,{children:"apply"})," is to modify the value of a key in a GSettings schema with a new value by using the ",(0,s.jsx)(t.code,{children:"glib_value"})," function to create a GLib.Variant object with the same type as the current value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 ",(0,s.jsx)(t.code,{children:"settings"}),": An object that contains the GSettings settings.\n\xb7 ",(0,s.jsx)(t.code,{children:"config"}),": An object that represents a configuration file and allows adding sections and setting values.\n\xb7 ",(0,s.jsx)(t.code,{children:"locks"}),": A list that stores the lock paths of the settings to be locked in the dconf database."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.code,{children:"apply"})," function first attempts to add a section with the schema name to the configuration file using the ",(0,s.jsx)(t.code,{children:"config.add_section"})," method. If a section with the same name already exists, it skips this step using a try-except block."]}),"\n",(0,s.jsxs)(t.p,{children:["Next, it retrieves the value for the key in the GSettings schema using the ",(0,s.jsx)(t.code,{children:"self.value"})," attribute. If the ",(0,s.jsx)(t.code,{children:"self.helper_function"})," attribute is not ",(0,s.jsx)(t.code,{children:"None"}),", it calls this helper function with the schema name, key path, and value as arguments, and updates the value using the returned value."]}),"\n",(0,s.jsxs)(t.p,{children:["Then, it calls the ",(0,s.jsx)(t.code,{children:"glib_value"})," function with the schema name, key path, new value, and GSettings object as arguments to create a GLib.Variant object with the correct type and the new value. This GLib.Variant object is then used to set the key value in the configuration file using the ",(0,s.jsx)(t.code,{children:"config.set"})," method."]}),"\n",(0,s.jsxs)(t.p,{children:["Finally, if the ",(0,s.jsx)(t.code,{children:"self.lock"})," attribute is ",(0,s.jsx)(t.code,{children:"True"}),", it calls the ",(0,s.jsx)(t.code,{children:"dconf_path"})," function with the GSettings object and key path as arguments to construct the full path of the setting in the dconf database. It then appends this lock path to the ",(0,s.jsx)(t.code,{children:"locks"})," list to lock the setting in the dconf database."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," function plays a crucial role in modifying the value of a key in a GSettings schema with a new value by creating a GLib.Variant object with the same type as the current value. It is used in the ",(0,s.jsx)(t.code,{children:"system_gsetting"})," object to apply the configuration changes to the system GSettings schema, and in the ",(0,s.jsx)(t.code,{children:"user_gsetting"})," object to apply the configuration changes to the user's GSettings schema."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nThe ",(0,s.jsx)(t.code,{children:"settings"}),", ",(0,s.jsx)(t.code,{children:"config"}),", and ",(0,s.jsx)(t.code,{children:"locks"})," parameters should be valid objects or lists respectively. If not, the function may raise an exception. The ",(0,s.jsx)(t.code,{children:"self.schema"}),", ",(0,s.jsx)(t.code,{children:"self.path"}),", and ",(0,s.jsx)(t.code,{children:"self.value"})," attributes should be valid GSettings schema name, path, and value respectively. If not, the ",(0,s.jsx)(t.code,{children:"glib_value"})," function may raise an exception. The ",(0,s.jsx)(t.code,{children:"self.helper_function"})," attribute should be a valid function if not ",(0,s.jsx)(t.code,{children:"None"}),". If not, the ",(0,s.jsx)(t.code,{children:"apply"})," function will not call it and use the ",(0,s.jsx)(t.code,{children:"self.value"})," attribute directly. The ",(0,s.jsx)(t.code,{children:"self.lock"})," attribute should be a boolean value. If ",(0,s.jsx)(t.code,{children:"True"}),", the ",(0,s.jsx)(t.code,{children:"apply"})," function will lock the setting in the dconf database. If ",(0,s.jsx)(t.code,{children:"False"}),", it will not lock the setting."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"classdef-system_gsettings",children:"ClassDef system_gsettings"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"system_gsettings"}),": The function of system_gsettings is to handle the manipulation of GSettings and lockdown files in the system."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"attributes"}),":\n\xb7 ",(0,s.jsx)(t.code,{children:"override_file_path"}),": A string that represents the path to the override file."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.code,{children:"system_gsettings"})," class has several attributes defined at the class level, which are file paths used for managing GSettings and lockdown files."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"__init__"})," method initializes the class with an ",(0,s.jsx)(t.code,{children:"override_file_path"})," parameter, which is the path to the override file. It also initializes two empty lists, ",(0,s.jsx)(t.code,{children:"gsettings"})," and ",(0,s.jsx)(t.code,{children:"locks"}),", to store instances of ",(0,s.jsx)(t.code,{children:"system_gsetting"})," and lock data, respectively."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"append"})," method takes in four parameters: ",(0,s.jsx)(t.code,{children:"schema"}),", ",(0,s.jsx)(t.code,{children:"path"}),", ",(0,s.jsx)(t.code,{children:"data"}),", ",(0,s.jsx)(t.code,{children:"lock"}),", and ",(0,s.jsx)(t.code,{children:"helper"}),". It checks if a ",(0,s.jsx)(t.code,{children:"system_gsetting"})," instance already exists with the given ",(0,s.jsx)(t.code,{children:"schema"})," and ",(0,s.jsx)(t.code,{children:"path"}),". If it does, it appends the new ",(0,s.jsx)(t.code,{children:"system_gsetting"})," instance to the ",(0,s.jsx)(t.code,{children:"gsettings"})," list. If not, it logs an error message."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," method applies the changes made to the ",(0,s.jsx)(t.code,{children:"gsettings"})," list by writing the data to a configuration file and updating the lockdown files. It first creates a ",(0,s.jsx)(t.code,{children:"configparser.ConfigParser"})," object and loops through the ",(0,s.jsx)(t.code,{children:"gsettings"})," list, applying each ",(0,s.jsx)(t.code,{children:"system_gsetting"})," instance to the configuration object. It then writes the configuration object to the ",(0,s.jsx)(t.code,{children:"override_file_path"})," file."]}),"\n",(0,s.jsx)(t.p,{children:"The method then creates the necessary directories for the lockdown files and removes any existing lockdown files. It then creates a new lockdown file and writes the lock data to it. Finally, it creates a new profile file and writes the profile data to it."}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"system_gsettings"})," class is used in the ",(0,s.jsx)(t.code,{children:"gpoa/frontend/gsettings_applier.py"})," module to handle the manipulation of GSettings and lockdown files. The ",(0,s.jsx)(t.code,{children:"gsettings_applier"})," class initializes an instance of ",(0,s.jsx)(t.code,{children:"system_gsettings"})," with the path to the override file. It then filters the registry entries based on the GSettings schema and lockdown schema and applies the changes to the ",(0,s.jsx)(t.code,{children:"system_gsettings"})," instance."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"system_gsettings"})," class assumes that the ",(0,s.jsx)(t.code,{children:"check_existing_gsettings"})," and ",(0,s.jsx)(t.code,{children:"log"})," functions are defined elsewhere in the codebase."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," method modifies system files, so it should be used with caution."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"override_file_path"})," parameter should be a valid file path with write permissions."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"gsettings"})," and ",(0,s.jsx)(t.code,{children:"locks"})," lists should not be modified directly, instead use the ",(0,s.jsx)(t.code,{children:"append"})," method to add new ",(0,s.jsx)(t.code,{children:"system_gsetting"})," instances."]}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"functiondef-initself-override_file_path",children:["FunctionDef ",(0,s.jsx)(t.strong,{children:"init"}),"(self, override_file_path)"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.strong,{children:"init"})}),": The function of ",(0,s.jsx)(t.strong,{children:"init"})," is to initialize the system_gsettings object with a given override_file_path."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 override_file_path: A string representing the file path of the override file."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe __init__ function initializes two empty lists, gsettings and locks, which will be used to store GSettings and locks respectively. The override_file_path parameter is also stored as an instance variable, which can be accessed later in the object's lifetime."]}),"\n",(0,s.jsx)(t.p,{children:"The gsettings list will be used to store the GSettings objects that are created during the lifetime of the system_gsettings object. The locks list will be used to store locks that are acquired during the lifetime of the system_gsettings object."}),"\n",(0,s.jsx)(t.p,{children:"The override_file_path parameter is used to specify the location of the override file that will be used to override the default GSettings values. This file path is stored as an instance variable, so it can be accessed later in the object's lifetime."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"The override_file_path parameter is required, and it must be a string representing a valid file path."}),"\n",(0,s.jsx)(t.li,{children:"The gsettings and locks lists are initialized as empty lists, and they will be populated during the lifetime of the system_gsettings object."}),"\n",(0,s.jsx)(t.li,{children:"The override_file_path is stored as an instance variable, so it can be accessed later in the object's lifetime."}),"\n",(0,s.jsx)(t.li,{children:"The __init__ function is called automatically when a new system_gsettings object is created, and it is used to initialize the object's state."}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-appendself-schema-path-data-lock-helper",children:"FunctionDef append(self, schema, path, data, lock, helper)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"append"}),": The ",(0,s.jsx)(t.code,{children:"append"})," function is used to add a new gsetting to the list of gsettings managed by the ",(0,s.jsx)(t.code,{children:"system_gsettings"})," object. It checks if the gsetting already exists, and if it does, it appends a new ",(0,s.jsx)(t.code,{children:"system_gsetting"})," object to the ",(0,s.jsx)(t.code,{children:"gsettings"})," list. If the gsetting does not exist, it logs an error message."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 ",(0,s.jsx)(t.code,{children:"schema"})," (str): A string representing the schema of the gsetting.\n\xb7 ",(0,s.jsx)(t.code,{children:"path"})," (str): A string representing the path of the gsetting.\n\xb7 ",(0,s.jsx)(t.code,{children:"data"})," (any): The value to be set for the gsetting.\n\xb7 ",(0,s.jsx)(t.code,{children:"lock"})," (bool): A boolean indicating whether the gsetting should be locked after being applied.\n\xb7 ",(0,s.jsx)(t.code,{children:"helper"})," (function): An optional function that takes the schema, path, and value as arguments and returns a modified value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.code,{children:"append"})," function first calls the ",(0,s.jsx)(t.code,{children:"check_existing_gsettings"})," function to check if the gsetting already exists. If it does, the function creates a new ",(0,s.jsx)(t.code,{children:"system_gsetting"})," object with the given schema, path, data, lock, and helper parameters, and appends it to the ",(0,s.jsx)(t.code,{children:"gsettings"})," list. If the gsetting does not exist, it logs an error message using the ",(0,s.jsx)(t.code,{children:"log"})," function."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"check_existing_gsettings"})," function takes a schema and path as input and returns a boolean indicating whether the gsetting already exists. It uses the ",(0,s.jsx)(t.code,{children:"Gio.SettingsSchemaSource.get_default()"})," method to get the default schema source, and then looks up the provided schema using the ",(0,s.jsx)(t.code,{children:"lookup()"})," method. If the schema is found, it checks if the path exists in the schema using the ",(0,s.jsx)(t.code,{children:"has_key()"})," method. If both conditions are true, the function returns ",(0,s.jsx)(t.code,{children:"True"}),", indicating that the gsetting already exists. Otherwise, it returns ",(0,s.jsx)(t.code,{children:"False"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"append"})," function is called in the ",(0,s.jsx)(t.code,{children:"run"})," method of the ",(0,s.jsx)(t.code,{children:"gsettings_applier"})," object. The ",(0,s.jsx)(t.code,{children:"run"})," method applies all the gsettings in the ",(0,s.jsx)(t.code,{children:"gsettings_keys"})," list to the system. For each gsetting in the list, it creates a ",(0,s.jsx)(t.code,{children:"system_gsetting"})," object with the given schema, path, data, lock, and helper parameters, and appends it to the ",(0,s.jsx)(t.code,{children:"gsettings"})," list. If the gsetting already exists, it creates a new ",(0,s.jsx)(t.code,{children:"system_gsetting"})," object with the same schema, path, and lock parameters, but with a modified data parameter using the helper function (if provided)."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"helper"})," parameter is optional and can be set to ",(0,s.jsx)(t.code,{children:"None"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"data"})," parameter should be convertible to a string, as it is set as a string in the ",(0,s.jsx)(t.code,{children:"system_gsetting"})," object."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"lock"})," parameter determines whether the gsetting is locked after being applied. If set to ",(0,s.jsx)(t.code,{children:"True"}),", the gsetting cannot be modified by non-privileged users."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"append"})," function does not return any value, but appends a new ",(0,s.jsx)(t.code,{children:"system_gsetting"})," object to the ",(0,s.jsx)(t.code,{children:"gsettings"})," list if the gsetting does not already exist."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"check_existing_gsettings"})," function only checks for the existence of the gsetting in the system schema directory. If the gsetting is located in the user schema directory, it will not be found."]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-applyself",children:"FunctionDef apply(self)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"apply"}),": The function of apply is to apply the gsettings specified in the configuration file."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 self: The instance of the class."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"functiondef-glib_mapvalue-glib_type",children:"FunctionDef glib_map(value, glib_type)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"glib_map"}),": The function of glib_map is to create a GLib.Variant object with a specified type and value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),"\n\xb7 ",(0,s.jsx)(t.code,{children:"value"}),": The value to be wrapped in a GLib.Variant object.\n\xb7 ",(0,s.jsx)(t.code,{children:"glib_type"}),": A string representing the GLib type of the value. It can be 'i' for integer, 'b' for boolean, 'q' for int64, or any other type string that GLib.Variant supports."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),"\nThe function first assumes that the ",(0,s.jsx)(t.code,{children:"value"})," can be used as the value of the GLib.Variant object directly. Then, it checks if the ",(0,s.jsx)(t.code,{children:"glib_type"})," is 'i', 'b', or 'q'. If so, it converts ",(0,s.jsx)(t.code,{children:"value"})," to an integer first before creating the GLib.Variant object. This is because the GLib.Variant constructor requires an integer argument for these types."]}),"\n",(0,s.jsxs)(t.p,{children:["From a functional perspective, this function plays a crucial role in the ",(0,s.jsx)(t.code,{children:"glib_value"})," function in gpoa/frontend/appliers/gsettings.py/glib_value. The ",(0,s.jsx)(t.code,{children:"glib_value"})," function retrieves the current value of a key in a GSettings schema and modifies it with a new value. To do so, it needs to create a GLib.Variant object with the same type as the current value. This is where ",(0,s.jsx)(t.code,{children:"glib_map"})," comes in. It creates a GLib.Variant object with the correct type and the new value, which can then be used to modify the key in the GSettings schema."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),"\nThe ",(0,s.jsx)(t.code,{children:"glib_type"})," parameter should be a string representing a valid GLib type. If it is not, the function may raise a GLib.Error exception."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Output Example"}),"\nSuppose we call ",(0,s.jsx)(t.code,{children:"glib_map(123, 'i')"}),", the function will return a GLib.Variant object with the value 123 and the type 'i'. If we call ",(0,s.jsx)(t.code,{children:"glib_map('true', 'b')"}),", the function will return a GLib.Variant object with the value 1 and the type 'b', because 'true' is a string representation of a boolean value in GLib."]}),"\n",(0,s.jsx)(t.h2,{id:"functiondef-dconf_pathsettings-path",children:"FunctionDef dconf_path(settings, path)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"dconf_path"}),": The function of ",(0,s.jsx)(t.code,{children:"dconf_path"})," is to construct and return the full path of a setting in the dconf database."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 ",(0,s.jsx)(t.code,{children:"settings"}),": An object that contains the dconf settings.\n\xb7 ",(0,s.jsx)(t.code,{children:"path"}),": A string that represents the relative path of the setting in the dconf database."]}),"\n",(0,s.jsx)(t.h2,{id:"functiondef-glib_valueschema-path-value-settings",children:"FunctionDef glib_value(schema, path, value, settings)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"glib_value"}),": The function of glib_value is to modify the value of a key in a GSettings schema with a new value by creating a GLib.Variant object with the same type as the current value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 ",(0,s.jsx)(t.code,{children:"schema"}),": A string representing the name of the GSettings schema.\n\xb7 ",(0,s.jsx)(t.code,{children:"path"}),": A string representing the path of the key in the GSettings schema.\n\xb7 ",(0,s.jsx)(t.code,{children:"value"}),": The new value to be set for the key.\n\xb7 ",(0,s.jsx)(t.code,{children:"settings"}),": A Gio.Settings object representing the GSettings schema."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe glib_value function first retrieves the current value of the key in the GSettings schema using the ",(0,s.jsx)(t.code,{children:"settings.get_value(path)"})," method. It then queries the data type for the key using the ",(0,s.jsx)(t.code,{children:"key.get_type_string()"})," method. After that, it builds the new value with the determined type using the glib_map function, which creates a GLib.Variant object with the correct type and the new value. This GLib.Variant object can then be used to modify the key in the GSettings schema."]}),"\n",(0,s.jsxs)(t.p,{children:["From a functional perspective, this function plays a crucial role in the ",(0,s.jsx)(t.code,{children:"apply"})," function in gpoa/frontend/appliers/gsettings.py/system_gsetting and gpoa/frontend/appliers/gsettings.py/user_gsetting. The ",(0,s.jsx)(t.code,{children:"apply"})," function in both objects retrieves the current value of a key in a GSettings schema and modifies it with a new value. To do so, it needs to create a GLib.Variant object with the same type as the current value. This is where glib_value comes in. It creates a GLib.Variant object with the correct type and the new value, which can then be used to modify the key in the GSettings schema."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nThe ",(0,s.jsx)(t.code,{children:"schema"}),", ",(0,s.jsx)(t.code,{children:"path"}),", and ",(0,s.jsx)(t.code,{children:"settings"})," parameters should be valid GSettings schema name, path, and Gio.Settings object respectively. If not, the function may raise an exception."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Output Example"}),":\nSuppose we call ",(0,s.jsx)(t.code,{children:"glib_value('org.gnome.desktop.background', 'picture-uri', 'file:///home/user/image.jpg')"}),", the function will return a GLib.Variant object with the value 'file:///home/user/image.jpg' and the type 's' (string) if the current value of the key 'picture-uri' is a string."]}),"\n",(0,s.jsx)(t.h2,{id:"functiondef-check_existing_gsettingsschema-path",children:"FunctionDef check_existing_gsettings(schema, path)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"check_existing_gsettings"}),": The function of check_existing_gsettings is to check if a specific schema and path already exist in the GSettings."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 schema (str): A string representing the name of the schema to be checked.\n\xb7 path (str): A string representing the path to be checked."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe function begins by getting the default Gio.SettingsSchemaSource using the get_default() method. It then looks up the provided schema using the lookup() method, which returns a Gio.SettingsSchema object if found. By setting the second argument of lookup() to False, it ensures that the search is performed only in the system schema directory."]}),"\n",(0,s.jsx)(t.p,{children:"Next, it checks if the sourceSchema object is not None and if it has the provided path as a key using the has_key() method. If both conditions are True, the function returns True, indicating that the schema and path already exist. Otherwise, it returns False."}),"\n",(0,s.jsx)(t.p,{children:"This function is used in the append() method of both system_gsettings and user_gsettings objects. In both cases, if the schema and path already exist, the corresponding gsetting is appended to the gsettings object. If not, a log message is generated indicating that the schema and path do not exist."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nThis function only checks for the existence of the schema and path in the system schema directory. If the schema and path are located in the user schema directory, they will not be found."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Output Example"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"check_existing_gsettings('org.gnome.desktop.background', 'picture-uri')\n# Returns True if the schema and path already exist, False otherwise.\n"})}),"\n",(0,s.jsx)(t.h2,{id:"classdef-user_gsettings",children:"ClassDef user_gsettings"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"user_gsettings"}),": The function of user_gsettings is to manage a list of user's gsettings. It allows appending new gsettings with schema, path, value, and an optional helper function. Once all gsettings are added, they can be applied using the ",(0,s.jsx)(t.code,{children:"apply()"})," method."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"attributes"}),":"]}),"\n",(0,s.jsx)(t.p,{children:"\xb7 gsettings: A list of user_gsetting objects."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":"]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"__init__"})," method initializes an empty list of gsettings."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"append"})," method checks if a gsetting with the same schema and path already exists in the list using the ",(0,s.jsx)(t.code,{children:"check_existing_gsettings()"})," function. If it does, the new gsetting is appended to the list. If not, a log message is created using the ",(0,s.jsx)(t.code,{children:"log()"})," function."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"apply()"})," method iterates through the list of gsettings and applies each one using the ",(0,s.jsx)(t.code,{children:"apply()"})," method of the user_gsetting object. It also logs the schema, path, and value of each gsetting before applying it."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"user_gsettings"})," class is used in the ",(0,s.jsx)(t.code,{children:"gsettings_applier_user"})," class to manage a list of gsettings that will be applied to the user's system. The ",(0,s.jsx)(t.code,{children:"gsettings_applier_user"})," class initializes an empty ",(0,s.jsx)(t.code,{children:"user_gsettings"})," object and populates it with gsettings based on the keys in the Windows registry. The ",(0,s.jsx)(t.code,{children:"windows_settings"})," list contains mappings between Windows registry keys and gsettings keys, which are used to create the gsettings objects."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"check_existing_gsettings()"})," function is not defined in the provided code, so it should be defined elsewhere in the project."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"log()"})," function is also not defined in the provided code, but it is used to log messages in several places. It should be defined elsewhere in the project."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"user_gsetting"})," class is not defined in the provided code, but it is used in the ",(0,s.jsx)(t.code,{children:"append()"})," method. It should be defined elsewhere in the project."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"gsettings_filter"})," and ",(0,s.jsx)(t.code,{children:"gsettings_keys"})," attributes are not used in the provided code, so they may be unnecessary."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"__registry_branch"}),", ",(0,s.jsx)(t.code,{children:"__module_name"}),", and ",(0,s.jsx)(t.code,{children:"__module_experimental"})," attributes are not defined in the provided code, so they should be defined elsewhere in the project."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"check_enabled()"})," and ",(0,s.jsx)(t.code,{children:"check_windows_mapping_enabled()"})," functions are not defined in the provided code, so they should be defined elsewhere in the project."]}),"\n"]}),"\n",(0,s.jsxs)(t.h3,{id:"functiondef-initself",children:["FunctionDef ",(0,s.jsx)(t.strong,{children:"init"}),"(self)"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.strong,{children:"init"})}),": The function of ",(0,s.jsx)(t.strong,{children:"init"})," is to initialize the user_gsettings object and create an empty list for storing GSettings schema keys."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),": This function does not take any parameters."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.code,{children:"__init__"})," function is a special method in Python classes, called when an object is created from the class. In this case, when a new ",(0,s.jsx)(t.code,{children:"user_gsettings"})," object is created, the ",(0,s.jsx)(t.code,{children:"__init__"})," method initializes the object by creating an empty list called ",(0,s.jsx)(t.code,{children:"gsettings"}),". This list will be used to store GSettings schema keys for the user's settings."]}),"\n",(0,s.jsx)(t.p,{children:"Here's a step-by-step breakdown of the code:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"def __init__(self):"})," defines the special ",(0,s.jsx)(t.code,{children:"__init__"})," method for the ",(0,s.jsx)(t.code,{children:"user_gsettings"})," class. The ",(0,s.jsx)(t.code,{children:"self"})," parameter is a reference to the current instance of the class and is used to access variables and methods associated with that instance."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"self.gsettings = list()"})," creates an empty list object and assigns it to the ",(0,s.jsx)(t.code,{children:"gsettings"})," attribute of the current ",(0,s.jsx)(t.code,{children:"user_gsettings"})," instance."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nThis ",(0,s.jsx)(t.code,{children:"__init__"})," function is called automatically when a new ",(0,s.jsx)(t.code,{children:"user_gsettings"})," object is created. You don't need to call it explicitly. When working with this object, you can directly access and manipulate the ",(0,s.jsx)(t.code,{children:"gsettings"})," list using the dot notation, like ",(0,s.jsx)(t.code,{children:"my_user_gsettings_obj.gsettings"}),". Remember that this list will be used to store GSettings schema keys, so make sure to add only valid schema keys to it."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-appendself-schema-path-value-helper",children:"FunctionDef append(self, schema, path, value, helper)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"append"}),": The function of append is to append a value to a specific schema and path in the GSettings if it already exists. If not, a log message is generated indicating that the schema and path do not exist."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 schema (str): A string representing the name of the schema to be checked and appended.\n\xb7 path (str): A string representing the path to be checked and appended.\n\xb7 value: The value to be appended.\n\xb7 helper (optional, callable): An optional helper function that takes the schema, path, and value as arguments and returns a modified value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.code,{children:"append"})," function first checks if the schema and path already exist in the GSettings using the ",(0,s.jsx)(t.code,{children:"check_existing_gsettings"})," function. If the schema and path exist, the function appends the given value to the corresponding key in the GSettings using the ",(0,s.jsx)(t.code,{children:"append"})," method of the ",(0,s.jsx)(t.code,{children:"Gio.Settings"})," object."]}),"\n",(0,s.jsxs)(t.p,{children:["Before appending the value, the function checks if the ",(0,s.jsx)(t.code,{children:"helper"})," parameter is provided. If so, it uses the helper function to modify the value. The helper function takes the schema, path, and value as arguments and returns a modified value."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"append"})," function is used in the ",(0,s.jsx)(t.code,{children:"windows_mapping_append"})," method of the ",(0,s.jsx)(t.code,{children:"gsettings_applier_user"})," object in the ",(0,s.jsx)(t.code,{children:"gsettings_applier.py"})," module. In this method, the ",(0,s.jsx)(t.code,{children:"append"})," function is called for each mapping in the ",(0,s.jsx)(t.code,{children:"__windows_settings"})," dictionary. The ",(0,s.jsx)(t.code,{children:"schema"})," and ",(0,s.jsx)(t.code,{children:"path"})," parameters are set to the ",(0,s.jsx)(t.code,{children:"gsettings_schema"})," and ",(0,s.jsx)(t.code,{children:"gsettings_key"})," attributes of the mapping object, respectively. The ",(0,s.jsx)(t.code,{children:"value"})," parameter is set to the value of the corresponding key in the Windows registry."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"append"})," function is also used in the ",(0,s.jsx)(t.code,{children:"run"})," method of the ",(0,s.jsx)(t.code,{children:"gsettings_applier_user"})," object in the ",(0,s.jsx)(t.code,{children:"gsettings_applier.py"})," module. In this method, the ",(0,s.jsx)(t.code,{children:"append"})," function is called for each GSettings key in the ",(0,s.jsx)(t.code,{children:"gsettings_keys"})," list. The ",(0,s.jsx)(t.code,{children:"schema"}),", ",(0,s.jsx)(t.code,{children:"path"}),", and ",(0,s.jsx)(t.code,{children:"value"})," parameters are set to the corresponding attributes of the key object. The ",(0,s.jsx)(t.code,{children:"helper"})," parameter is set to the ",(0,s.jsx)(t.code,{children:"uri_fetch_helper"})," function if the key is the wallpaper entry, and ",(0,s.jsx)(t.code,{children:"None"})," otherwise."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nWhen using the ",(0,s.jsx)(t.code,{children:"append"})," function, make sure to provide the correct schema and path to the key. If a helper function is provided, ensure that it takes the correct arguments and returns a modified value that can be appended to the schema. When calling the ",(0,s.jsx)(t.code,{children:"append"})," function from the ",(0,s.jsx)(t.code,{children:"windows_mapping_append"})," method, be aware that it will only append the setting if the key already exists in the schema. When calling the ",(0,s.jsx)(t.code,{children:"append"})," function from the ",(0,s.jsx)(t.code,{children:"run"})," method, be aware that it will overwrite the existing value in the schema if the key already exists."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-applyself-1",children:"FunctionDef apply(self)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"apply"}),": The function of apply is to iterate through the gsettings list and apply each gsetting."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),": This function does not take any parameters."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.code,{children:"apply"})," function begins by iterating through the ",(0,s.jsx)(t.code,{children:"gsettings"})," list using a for loop (",(0,s.jsx)(t.code,{children:"for gsetting in self.gsettings:"}),"). For each gsetting in the list, it creates a new dictionary ",(0,s.jsx)(t.code,{children:"logdata"}),' to store log information. The keys of this dictionary are "gsetting.schema", "gsetting.path", and "gsetting.value", and the corresponding values are obtained from the current gsetting object (',(0,s.jsx)(t.code,{children:"gsetting.schema"}),", ",(0,s.jsx)(t.code,{children:"gsetting.path"}),", and ",(0,s.jsx)(t.code,{children:"gsetting.value"}),")."]}),"\n",(0,s.jsxs)(t.p,{children:["Then, the ",(0,s.jsx)(t.code,{children:"logdata"})," dictionary is passed as an argument to the ",(0,s.jsx)(t.code,{children:"log"}),' function along with the string "D85". This logs the gsetting\'s schema, path, and value to provide more context about what is being applied.']}),"\n",(0,s.jsxs)(t.p,{children:["Finally, the ",(0,s.jsx)(t.code,{children:"apply"})," method of the current gsetting object is called, which actually applies the gsetting."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," function is called in the ",(0,s.jsx)(t.code,{children:"run"})," method of the ",(0,s.jsx)(t.code,{children:"gsettings_applier_user"})," object in the ",(0,s.jsx)(t.code,{children:"gsettings_applier.py"})," module. The ",(0,s.jsx)(t.code,{children:"run"})," method calculates all configured gsettings and adds them to the ",(0,s.jsx)(t.code,{children:"gsettings"})," list. After that, it calls the ",(0,s.jsx)(t.code,{children:"apply"})," method of the ",(0,s.jsx)(t.code,{children:"gsettings"})," object to apply all the calculated gsettings."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nThe ",(0,s.jsx)(t.code,{children:"apply"})," function assumes that the ",(0,s.jsx)(t.code,{children:"gsettings"})," list contains valid ",(0,s.jsx)(t.code,{children:"gsetting"})," objects with ",(0,s.jsx)(t.code,{children:"schema"}),", ",(0,s.jsx)(t.code,{children:"path"}),", and ",(0,s.jsx)(t.code,{children:"value"})," attributes. If the list contains invalid objects, the function may raise an ",(0,s.jsx)(t.code,{children:"AttributeError"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Additionally, the ",(0,s.jsx)(t.code,{children:"apply"})," function relies on the ",(0,s.jsx)(t.code,{children:"log"})," function to log the gsetting's schema, path, and value. If the ",(0,s.jsx)(t.code,{children:"log"})," function is not properly implemented, the logging may not work as expected."]}),"\n",(0,s.jsxs)(t.p,{children:["Furthermore, the ",(0,s.jsx)(t.code,{children:"apply"})," function calls the ",(0,s.jsx)(t.code,{children:"apply"})," method of each gsetting object to apply it. If the ",(0,s.jsx)(t.code,{children:"apply"})," method of a gsetting object is not properly implemented, the gsetting may not be applied correctly."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"classdef-user_gsetting",children:"ClassDef user_gsetting"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"user_gsetting"}),": The function of user_gsetting is to set a value in the GSettings schema with a specified schema, path, and value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"attributes"}),":\n\xb7 schema: A string representing the schema name to be accessed.\n\xb7 path: A string representing the path to the key in the schema.\n\xb7 value: The value to be set in the key.\n\xb7 helper_function: An optional function that takes the schema, path, and value as arguments and returns a modified value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.code,{children:"__init__"})," method initializes the user_gsetting object with the given schema, path, value, and an optional helper function."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," method is where the main functionality resides. It first creates a Gio.Settings object with the specified schema. Then, it checks if the helper function is provided. If so, it uses the helper function to modify the value. After that, it creates a glib_value object with the schema, path, value, and settings. Finally, it sets the value in the settings object and synchronizes it."]}),"\n",(0,s.jsx)(t.p,{children:"This class is used to set a value in the GSettings schema, and it can be used in conjunction with the helper function to modify the value before setting it."}),"\n",(0,s.jsxs)(t.p,{children:["From a functional perspective, this class is called by the ",(0,s.jsx)(t.code,{children:"append"})," method in the ",(0,s.jsx)(t.code,{children:"user_gsettings"})," object. The ",(0,s.jsx)(t.code,{children:"append"})," method checks if the key already exists in the schema. If it does, it creates a new ",(0,s.jsx)(t.code,{children:"user_gsetting"})," object and appends it to the list of settings to be applied. If not, it logs an error message indicating that the key does not exist."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nWhen using this class, make sure to provide the correct schema and path to the key. If a helper function is provided, ensure that it takes the correct arguments and returns a modified value that can be set in the schema. When calling this class from the ",(0,s.jsx)(t.code,{children:"append"})," method, be aware that it will only append the setting if the key already exists in the schema."]}),"\n",(0,s.jsxs)(t.h3,{id:"functiondef-initself-schema-path-value-helper_function",children:["FunctionDef ",(0,s.jsx)(t.strong,{children:"init"}),"(self, schema, path, value, helper_function)"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.strong,{children:"init"})}),": The function of ",(0,s.jsx)(t.strong,{children:"init"})," is to initialize the user_gsetting object with the necessary parameters."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 schema: This parameter is used to specify the schema of the gsetting.\n\xb7 path: This parameter is used to specify the path of the gsetting.\n\xb7 value: This parameter is used to specify the value of the gsetting.\n\xb7 helper_function: This parameter is an optional function that can be used to perform additional operations related to the gsetting."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(t.strong,{children:"init"})," function initializes the user_gsetting object by setting the schema, path, and value attributes with the provided arguments. If a helper_function is provided, it is also stored as an attribute of the object. This function does not perform any additional operations other than initializing the object."]}),"\n",(0,s.jsx)(t.p,{children:"The schema parameter is used to specify the schema of the gsetting, which is a named collection of gsetting keys. The path parameter is used to specify the path of the gsetting, which is a string that identifies the gsetting within the schema. The value parameter is used to specify the value of the gsetting."}),"\n",(0,s.jsx)(t.p,{children:"The helper_function parameter is an optional parameter that can be used to perform additional operations related to the gsetting. For example, the helper_function could be used to validate the value of the gsetting before it is set."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":\nIt is important to note that the ",(0,s.jsx)(t.strong,{children:"init"})," function does not actually set the value of the gsetting. It only initializes the object with the necessary parameters. To set the value of the gsetting, you will need to call the appropriate method of the object."]}),"\n",(0,s.jsx)(t.p,{children:"Additionally, the helper_function parameter is optional and does not need to be provided when initializing the object. However, if a helper_function is provided, it should be a callable object (e.g., a function or a bound method) that takes no arguments."}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"functiondef-applyself-2",children:"FunctionDef apply(self)"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"apply"}),": The function of apply is to modify the value of a key in a GSettings schema with a new value by creating a GLib.Variant object with the same type as the current value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"parameters"}),":\n\xb7 ",(0,s.jsx)(t.code,{children:"self"}),": The user_gsetting object that calls this function."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"apply"})," function performs the following steps:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Access the current schema: It creates a Gio.Settings object using the schema name of the user_gsetting object. This object allows the function to interact with the GSettings schema."}),"\n",(0,s.jsx)(t.li,{children:"Update result with helper function: If a helper function is defined for the user_gsetting object, the function applies it to the new value and the schema/path to generate an updated value."}),"\n",(0,s.jsxs)(t.li,{children:["Get typed value by schema: It calls the ",(0,s.jsx)(t.code,{children:"glib_value"})," function with the schema, path, and the new or updated value to create a GLib.Variant object with the correct type and the new value."]}),"\n",(0,s.jsxs)(t.li,{children:["Set the value: It sets the value of the key in the GSettings schema using the ",(0,s.jsx)(t.code,{children:"settings.set_value(path, result)"})," method."]}),"\n",(0,s.jsxs)(t.li,{children:["Sync the settings: It saves the changes to the schema by calling the ",(0,s.jsx)(t.code,{children:"settings.sync()"})," method."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["From a functional perspective, the ",(0,s.jsx)(t.code,{children:"apply"})," function plays a crucial role in updating the value of a key in a GSettings schema. It relies on the ",(0,s.jsx)(t.code,{children:"glib_value"})," function to create a GLib.Variant object with the correct type and the new value. This GLib.Variant object is then used to modify the key in the GSettings schema."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"self"})," parameter should be a valid user_gsetting object with a schema, path, and new value. If not, the function may raise an exception."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"glib_value"})," function should also receive valid parameters, as mentioned in its documentation."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Example:\nSuppose we have a user_gsetting object with schema 'org.gnome.desktop.background', path 'picture-uri', and new value 'file:///home/user/image.jpg'. The ",(0,s.jsx)(t.code,{children:"apply"})," function will create a GLib.Variant object with the value 'file:///home/user/image.jpg' and the type 's' (string) if the current value of the key 'picture-uri' is a string. It will then set the value of the key 'picture-uri' in the GSettings schema 'org.gnome.desktop.background' with the new GLib.Variant object. Finally, it will save the changes to the schema by calling the ",(0,s.jsx)(t.code,{children:"settings.sync()"})," method."]}),"\n",(0,s.jsx)(t.hr,{})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var s=n(6540);const i={},h=s.createContext(i);function a(e){const t=s.useContext(h);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(h.Provider,{value:t},e.children)}}}]);