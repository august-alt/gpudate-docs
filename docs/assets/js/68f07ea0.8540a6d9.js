"use strict";(self.webpackChunkgpupdate_docs=self.webpackChunkgpupdate_docs||[]).push([[6976],{1753:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>h});var s=i(4848),t=i(8453);const r={},a=void 0,o={id:"gpoa/frontend/frontend_manager",title:"frontend_manager",description:"FunctionDef determine_username(username)",source:"@site/docs/gpoa/frontend/frontend_manager.md",sourceDirName:"gpoa/frontend",slug:"/gpoa/frontend/frontend_manager",permalink:"/gpupdate-docs/docs/gpoa/frontend/frontend_manager",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"folder_applier",permalink:"/gpupdate-docs/docs/gpoa/frontend/folder_applier"},next:{title:"gsettings_applier",permalink:"/gpupdate-docs/docs/gpoa/frontend/gsettings_applier"}},c={},h=[{value:"FunctionDef determine_username(username)",id:"functiondef-determine_usernameusername",level:2},{value:"FunctionDef apply_user_context(user_appliers)",id:"functiondef-apply_user_contextuser_appliers",level:2},{value:"ClassDef frontend_manager",id:"classdef-frontend_manager",level:2},{value:"FunctionDef <strong>init</strong>(self, username, is_machine)",id:"functiondef-initself-username-is_machine",level:3},{value:"FunctionDef _init_machine_appliers(self)",id:"functiondef-_init_machine_appliersself",level:3},{value:"FunctionDef _init_user_appliers(self)",id:"functiondef-_init_user_appliersself",level:3},{value:"FunctionDef machine_apply(self)",id:"functiondef-machine_applyself",level:3},{value:"FunctionDef user_apply(self)",id:"functiondef-user_applyself",level:3},{value:"FunctionDef apply_parameters(self)",id:"functiondef-apply_parametersself",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"functiondef-determine_usernameusername",children:"FunctionDef determine_username(username)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"determine_username"}),": The function of determine_username is to check if the specified username is valid in order to prevent unauthorized operations. If no username is specified, it uses the name of the process owner."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"parameters"}),":\n\xb7 username (str, optional): The username to be checked. Default is None."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),":\nThe function first initializes a variable ",(0,s.jsx)(n.code,{children:"name"})," with the value of the ",(0,s.jsx)(n.code,{children:"username"})," parameter. If the ",(0,s.jsx)(n.code,{children:"username"})," parameter is not set, it retrieves the username of the current process using the ",(0,s.jsx)(n.code,{children:"get_process_user()"})," function."]}),"\n",(0,s.jsxs)(n.p,{children:["Then, it checks if the ",(0,s.jsx)(n.code,{children:"username"})," parameter matches the UID of the current process using the ",(0,s.jsx)(n.code,{children:"username_match_uid(name)"})," function. If the ",(0,s.jsx)(n.code,{children:"username"})," parameter does not match the UID of the current process and the current process does not have root permissions, it raises an exception."]}),"\n",(0,s.jsxs)(n.p,{children:["Finally, it logs the username using the ",(0,s.jsx)(n.code,{children:"log()"})," function and returns the ",(0,s.jsx)(n.code,{children:"name"})," variable."]}),"\n",(0,s.jsxs)(n.p,{children:["This function is used in the ",(0,s.jsx)(n.code,{children:"__init__"})," method of the ",(0,s.jsx)(n.code,{children:"frontend_manager"})," class to initialize the ",(0,s.jsx)(n.code,{children:"username"})," attribute of the class. It is also used in various parts of the project to ensure that the specified username matches the current process's UID before performing certain operations."]}),"\n",(0,s.jsxs)(n.p,{children:["The function relies on the ",(0,s.jsx)(n.code,{children:"get_process_user()"}),", ",(0,s.jsx)(n.code,{children:"username_match_uid()"}),", and ",(0,s.jsx)(n.code,{children:"is_root()"})," functions to perform its operations. It assumes that the ",(0,s.jsx)(n.code,{children:"pwd"})," and ",(0,s.jsx)(n.code,{children:"gpoa.util.users"})," modules have been imported before it is called."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The function is case-sensitive, so it differentiates between uppercase and lowercase characters in the passed username."}),"\n",(0,s.jsxs)(n.li,{children:["If the ",(0,s.jsx)(n.code,{children:"get_process_user()"})," or ",(0,s.jsx)(n.code,{children:"username_match_uid()"})," functions fail to obtain the username or match the UID of the current process, the function may not work as expected."]}),"\n",(0,s.jsx)(n.li,{children:"The function should only be used to check if the specified username matches the current process's UID before performing certain operations. It should not be used to grant root permissions to a process."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output Example"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:["If the current process is owned by the user ",(0,s.jsx)(n.code,{children:"john"}),", and the function is called with the argument ",(0,s.jsx)(n.code,{children:"'john'"}),", it will return ",(0,s.jsx)(n.code,{children:"'john'"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["If the current process is not owned by the user ",(0,s.jsx)(n.code,{children:"john"}),", and the function is called with the argument ",(0,s.jsx)(n.code,{children:"'john'"}),", it will raise an exception:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"raise Exception('Current process UID does not match specified username')\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If the function is called with no arguments, it will retrieve the username of the current process and return it. For example, if the current process is owned by the user ",(0,s.jsx)(n.code,{children:"john"}),", it will return ",(0,s.jsx)(n.code,{children:"'john'"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"functiondef-apply_user_contextuser_appliers",children:"FunctionDef apply_user_context(user_appliers)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"apply_user_context"}),": The function of apply_user_context is to apply user context for a given set of user appliers."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"parameters"}),":\n\xb7 user_appliers: A dictionary containing applier_name as key and applier_object as value."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),":\nThe function iterates over the user_appliers dictionary and for each applier_name and applier_object, it logs the name of the applier. Then, it tries to call the user_context_apply() method of the applier_object. If any exception occurs during the execution of this method, it logs the applier name and the exception message."]}),"\n",(0,s.jsx)(n.p,{children:"From a functional perspective, this function is called by the user_apply() method of the frontend_manager object. The user_apply() method applies the user context for all the appliers if the user is not a root user. If the user is a root user, it applies the admin context first and then applies the user context for all the appliers."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The function assumes that the user_appliers parameter is a dictionary containing applier_name as key and applier_object as value."}),"\n",(0,s.jsx)(n.li,{children:"The function logs the name of the applier before applying the user context."}),"\n",(0,s.jsx)(n.li,{children:"If any exception occurs during the execution of the user_context_apply() method, the function logs the applier name and the exception message."}),"\n",(0,s.jsx)(n.li,{children:"It is recommended to handle the exceptions in a more meaningful way based on the application requirements."}),"\n",(0,s.jsx)(n.li,{children:"The function does not return any value."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"classdef-frontend_manager",children:"ClassDef frontend_manager"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"frontend_manager"}),": The function of frontend_manager is to decide when and how to run appliers for machine and user parts of policies."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"attributes"}),":\n\xb7 username: A string representing the username.\n\xb7 is_machine: A boolean value indicating whether the appliers are for machine or user parts of policies.\n\xb7 process_uname: The username of the current process.\n\xb7 sid: The security identifier (SID) of the user.\n\xb7 file_cache: An instance of fs_file_cache class for file caching.\n\xb7 machine_appliers: A dictionary containing appliers for machine parts of policies.\n\xb7 user_appliers: A dictionary containing appliers for user parts of policies."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(n.code,{children:"__init__"})," method initializes the frontend_manager class with the given username and is_machine parameters. It sets up the storage, determines the username, sets the process user and SID, initializes the file cache, and initializes either machine or user appliers based on the is_machine parameter."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"_init_machine_appliers"})," method initializes the machine_appliers dictionary with various appliers for machine parts of policies. These appliers include control_applier, polkit_applier, systemd_applier, and others."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"_init_user_appliers"})," method initializes the user_appliers dictionary with various appliers for user parts of policies. These appliers include shortcut_applier_user, folder_applier_user, and others."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"machine_apply"})," method runs all the appliers in the machine_appliers dictionary with administrator privileges."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"user_apply"})," method runs all the appliers in the user_appliers dictionary. If the current process has administrator privileges, it runs the appliers in the admin context, otherwise, it runs them in the user context."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"apply_parameters"})," method decides which appliers to run based on the is_machine parameter. If is_machine is True, it runs the machine_apply method, otherwise, it runs the user_apply method."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The frontend_manager class should only be used to manage appliers for machine and user parts of policies."}),"\n",(0,s.jsx)(n.li,{children:"The class assumes that the necessary appliers are available in the registry."}),"\n",(0,s.jsx)(n.li,{children:"The class assumes that the necessary permissions are available to run the appliers."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output Example"}),":\nThe output of the frontend_manager class is not a specific value, but rather the result of running the appliers for machine and user parts of policies. The output will vary based on the specific appliers and policies being used."]}),"\n",(0,s.jsxs)(n.h3,{id:"functiondef-initself-username-is_machine",children:["FunctionDef ",(0,s.jsx)(n.strong,{children:"init"}),"(self, username, is_machine)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.strong,{children:"init"})}),": The function of ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.strong,{children:"init"})})," is to initialize the frontend manager object with the given username and is_machine flag. This function sets up the necessary attributes for the frontend manager, including storage, username, process user, SID, and file cache, and initializes the machine or user appliers based on the is_machine flag."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"parameters"}),":\n\xb7 ",(0,s.jsx)(n.strong,{children:"self"}),": The instance of the FrontendManager class.\n\xb7 ",(0,s.jsx)(n.strong,{children:"username"}),": A string representing the username for which the frontend manager is being initialized. This can be a user or machine name.\n\xb7 ",(0,s.jsx)(n.strong,{children:"is_machine"}),": A boolean value indicating whether the frontend manager is being initialized for a machine or not."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["The function initializes the storage attribute by calling the ",(0,s.jsx)(n.code,{children:"registry_factory"})," function with 'registry' as the name parameter. This creates a registry storage object that can be used to interact with the Windows Registry and other storage mechanisms."]}),"\n",(0,s.jsxs)(n.li,{children:["The function calls the ",(0,s.jsx)(n.code,{children:"determine_username"})," function with the given username parameter to set the username attribute. This function checks if the specified username is valid and returns the valid username. If no username is specified, it uses the name of the process owner."]}),"\n",(0,s.jsx)(n.li,{children:"The function sets the is_machine attribute to the given is_machine flag."}),"\n",(0,s.jsxs)(n.li,{children:["The function calls the ",(0,s.jsx)(n.code,{children:"get_process_user"})," function to get the username of the current process and sets the process_uname attribute."]}),"\n",(0,s.jsxs)(n.li,{children:["The function calls the ",(0,s.jsx)(n.code,{children:"get_sid"})," function with the domain, username, and is_machine attributes to get the SID (Security Identifier) for the user or machine and sets the sid attribute."]}),"\n",(0,s.jsxs)(n.li,{children:["The function initializes the file_cache attribute by creating an instance of the ",(0,s.jsx)(n.code,{children:"fs_file_cache"})," class with 'file_cache' as the cache name and username as the optional username. This creates a file cache object that can be used to cache files in a specific directory for a given cache name and username."]}),"\n",(0,s.jsxs)(n.li,{children:["The function initializes the machine_appliers or user_appliers dictionary based on the is_machine flag. If is_machine is True, it calls the ",(0,s.jsx)(n.code,{children:"_init_machine_appliers"})," method to initialize the machine appliers dictionary. If is_machine is False, it calls the ",(0,s.jsx)(n.code,{children:"_init_user_appliers"})," method to initialize the user appliers dictionary."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Relationship with its callees in the project"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"registry_factory"})," function is called to create a registry storage object that can be used to interact with the Windows Registry and other storage mechanisms."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"determine_username"})," function is called to check if the specified username is valid and returns the valid username. If no username is specified, it uses the name of the process owner."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"get_process_user"})," function is called to get the username of the current process."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"get_sid"})," function is called to get the SID (Security Identifier) for the user or machine."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"fs_file_cache"})," class is called to create a file cache object that can be used to cache files in a specific directory for a given cache name and username."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"_init_machine_appliers"})," or ",(0,s.jsx)(n.code,{children:"_init_user_appliers"})," method is called to"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"functiondef-_init_machine_appliersself",children:"FunctionDef _init_machine_appliers(self)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"_init_machine_appliers"})}),": The function of ",(0,s.jsx)(n.code,{children:"_init_machine_appliers"})," is to initialize the ",(0,s.jsx)(n.code,{children:"machine_appliers"})," dictionary with instances of various policy appliers for machine-level policies."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Parameters"}),":\n\xb7 ",(0,s.jsx)(n.code,{children:"self"}),": The instance of the ",(0,s.jsx)(n.code,{children:"frontend_manager"})," class."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),":\nThe ",(0,s.jsx)(n.code,{children:"_init_machine_appliers"})," method initializes the ",(0,s.jsx)(n.code,{children:"machine_appliers"})," dictionary with instances of various policy appliers for machine-level policies. It first checks if the current user is a machine user or not. If it is, it initializes the ",(0,s.jsx)(n.code,{children:"machine_appliers"})," dictionary with instances of the following policy appliers:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gsettings_applier"}),": This applier is responsible for applying GSettings policies in the gpoa project. It initializes an instance of the ",(0,s.jsx)(n.code,{children:"gsettings_applier"})," class with the ",(0,s.jsx)(n.code,{children:"storage"}),", ",(0,s.jsx)(n.code,{children:"file_cache"}),", and ",(0,s.jsx)(n.code,{children:"sid"})," attributes of the ",(0,s.jsx)(n.code,{children:"frontend_manager"})," instance."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"chromium_applier"}),": This applier is responsible for applying Chromium-related policies in the gpoa project. It initializes an instance of the ",(0,s.jsx)(n.code,{children:"chromium_applier"})," class with the ",(0,s.jsx)(n.code,{children:"storage"}),", ",(0,s.jsx)(n.code,{children:"sid"}),", and ",(0,s.jsx)(n.code,{children:"username"})," attributes of the ",(0,s.jsx)(n.code,{children:"frontend_manager"})," instance."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"_init_machine_appliers"})," method is called in the ",(0,s.jsx)(n.code,{children:"__init__"})," method of the ",(0,s.jsx)(n.code,{children:"frontend_manager"})," class if the current user is a machine user."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),":\nThe ",(0,s.jsx)(n.code,{children:"_init_machine_appliers"})," method is intended to be used as a part of the gpoa project for initializing machine-level policy appliers. Subclasses should not override this method, but can add or remove policy appliers from the ",(0,s.jsx)(n.code,{children:"machine_appliers"})," dictionary as needed."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"functiondef-_init_user_appliersself",children:"FunctionDef _init_user_appliers(self)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"_init_user_appliers"}),": The function of _init_user_appliers is to initialize the user appliers dictionary, which is used to manage and apply various settings and configurations for users in the gpoa project."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"parameters"}),":\n\xb7 storage: An instance of the storage class, which is used to interact with the Windows Registry and other storage mechanisms.\n\xb7 sid: The security identifier (SID) of the user or machine for which policies are being applied.\n\xb7 username: The username for which policies are being applied, if applicable."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),":\nThe _init_user_appliers() method initializes the user appliers dictionary, which is used to manage and apply various settings and configurations for users in the gpoa project. It initializes the storage, sid, and username attributes, and then creates instances of the various user appliers classes, including scripts_applier_user, ini_applier_user, and gsettings_applier_user. These instances are added to the user_appliers dictionary with their corresponding keys, which are used to identify the appliers when they are applied in the user context."]}),"\n",(0,s.jsx)(n.p,{children:"The method also checks whether the current module is enabled in the gpoa configuration by calling the check_enabled() method. If the module is not enabled, it is not added to the user_appliers dictionary."}),"\n",(0,s.jsx)(n.p,{children:"The user_appliers dictionary is used by the frontend_manager to apply policies related to users in the gpoa project. The appliers are applied in the user context by calling the user_context_apply() method of each applier instance."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),":\nThe _init_user_appliers() method is intended to be used as a part of the frontend_manager class, and it should not be used directly. The method is responsible for initializing the user appliers dictionary, and it should not be used to manage and apply other settings and configurations. The user_appliers dictionary is intended to be used as a part of the frontend_manager's user appliers, and it should not be used directly. The user_context_apply() method of each applier instance is intended to be called by the frontend_manager to apply policies related to users in the gpoa project. Subclasses should not override the _init_user_appliers() method, but should instead override the run() method of the individual appliers to provide the actual policy application logic. Subclasses should also set the __module_name__, __module_experimental__, and __module_enabled__ attributes appropriately."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"functiondef-machine_applyself",children:"FunctionDef machine_apply(self)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"machine_apply"}),": The function of machine_apply is to run global appliers with administrator privileges."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"parameters"}),": This function does not take any parameters."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),": The machine_apply function first checks if the current process has root permissions by calling the is_root function. If the current process does not have root permissions, it logs an error message (E13) and returns. If the current process has root permissions, it proceeds to log a debug message (D16). Then, it iterates over the machine_appliers dictionary, which contains applier names as keys and applier objects as values. For each applier object, it calls the apply method. If there is an exception while calling the apply method, it logs an error message (E24) with the applier name and the exception message."]}),"\n",(0,s.jsx)(n.p,{children:"The machine_apply function is called by the apply_parameters function in the same frontend_manager class. The apply_parameters function decides which appliers to run based on whether the current operation is for a machine or a user. If it is for a machine, it calls the machine_apply function."}),"\n",(0,s.jsx)(n.p,{children:"It is important to note that the machine_apply function should only be called when the current process has root permissions. This is because the appliers that it runs may require administrator privileges to modify system-wide settings."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": It is recommended to use the machine_apply function only in the context of the frontend_manager class and only when the current process has root permissions."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:">>> frontend_manager.machine_apply()\nD16\nI00: Applying applier1\nI01: Applying applier2\n...\n"})}),"\n",(0,s.jsx)(n.p,{children:"In this example, the machine_apply function runs all the appliers in the machine_appliers dictionary and logs the progress."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"functiondef-user_applyself",children:"FunctionDef user_apply(self)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user_apply"}),": The function of user_apply is to run appliers for users with or without root privileges."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"parameters"}),": This function does not take any parameters."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),":\nThe user_apply function checks if the current process has root permissions using the is_root() function. If the current process has root permissions, it iterates over the user_appliers dictionary and for each applier_name and applier_object, it calls the admin_context_apply() method of the applier_object. If any exception occurs during the execution of this method, it logs the applier name and the exception message. After that, it calls the apply_user_context() function with the user_appliers dictionary as a parameter. If the current process does not have root permissions, it directly calls the apply_user_context() function with the user_appliers dictionary as a parameter."]}),"\n",(0,s.jsx)(n.p,{children:"From a functional perspective, this function is called by the apply_parameters() method of the frontend_manager object. The apply_parameters() method decides which appliers to run based on the is_machine attribute of the frontend_manager object. If the is_machine attribute is True, it calls the machine_apply() method, otherwise, it calls the user_apply() method."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The function assumes that the user_appliers parameter is a dictionary containing applier_name as key and applier_object as value."}),"\n",(0,s.jsx)(n.li,{children:"The function logs the name of the applier before applying the user context."}),"\n",(0,s.jsx)(n.li,{children:"If any exception occurs during the execution of the admin_context_apply() or user_context_apply() method, the function logs the applier name and the exception message."}),"\n",(0,s.jsx)(n.li,{children:"It is recommended to handle the exceptions in a more meaningful way based on the application requirements."}),"\n",(0,s.jsx)(n.li,{children:"The function does not return any value."}),"\n",(0,s.jsx)(n.li,{children:"The function should only be used when it is necessary to run appliers for users with or without root privileges."}),"\n",(0,s.jsx)(n.li,{children:"The function may raise an exception if the current process does not have sufficient permissions to drop privileges."}),"\n",(0,s.jsx)(n.li,{children:"The function may raise an exception if the specified user does not exist or does not have a valid home directory."}),"\n",(0,s.jsx)(n.li,{children:"The function may raise an exception if the D-Bus session daemon or dconf-service cannot be started."}),"\n",(0,s.jsx)(n.li,{children:"The function may raise an exception if the appliers raise any exceptions."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Relation with other functions"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the is_root() function to check if the current process has root permissions."}),"\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the admin_context_apply() method of the applier_object for each applier in the user_appliers dictionary if the current process has root permissions."}),"\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the apply_user_context() function with the user_appliers dictionary as a parameter if the current process has root permissions or not."}),"\n",(0,s.jsx)(n.li,{children:"The apply_parameters() method of the frontend_manager object calls the user_apply() method if the is_machine attribute is False."}),"\n",(0,s.jsx)(n.li,{children:"The machine_apply() method of the frontend_manager object is called if the is_machine attribute is True."}),"\n",(0,s.jsx)(n.li,{children:"The user_context_apply() method of the applier_object is called by the apply_user_context() function for each applier in the user_appliers dictionary."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output Example"}),":"]}),"\n",(0,s.jsx)(n.p,{children:"The user_apply function does not return any value, but it logs the name of the applier before applying the user context and if any exception occurs during the execution of the admin_context_apply() or user_context_apply() method, it logs the applier name and the exception message."}),"\n",(0,s.jsx)(n.p,{children:"Here is an example output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"D55 {'name': 'applier1'}\nD55 {'name': 'applier2'}\nE20 {'applier': 'applier1', 'exception': 'Exception message 1'}\nD55 {'name': 'applier3'}\nE20 {'applier': 'applier2', 'exception': 'Exception message 2'}\n"})}),"\n",(0,s.jsx)(n.p,{children:"In this example, the user_apply function logs the name of the appliers 'applier1' and 'applier2' before applying the user context. After that, it logs the applier name and the exception message for 'applier1' and 'applier2' because an exception occurred during the execution of the admin_context_apply() method. Finally, it logs the name of the applier 'applier3' before applying the user context."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"functiondef-apply_parametersself",children:"FunctionDef apply_parameters(self)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"apply_parameters"}),": The function of apply_parameters is to decide which appliers to run based on whether the current operation is for a machine or a user."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Parameters"}),": This function does not take any parameters."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Description"}),":\nThe apply_parameters function is a method of the frontend_manager class. It decides which appliers to run based on the is_machine attribute of the frontend_manager object. If the is_machine attribute is True, it calls the machine_apply function, otherwise, it calls the user_apply function."]}),"\n",(0,s.jsx)(n.p,{children:"The machine_apply function runs global appliers with administrator privileges. It first checks if the current process has root permissions by calling the is_root function. If the current process does not have root permissions, it logs an error message (E13) and returns. If the current process has root permissions, it proceeds to log a debug message (D16). Then, it iterates over the machine_appliers dictionary, which contains applier names as keys and applier objects as values. For each applier object, it calls the apply method. If there is an exception while calling the apply method, it logs an error message (E24) with the applier name and the exception message."}),"\n",(0,s.jsx)(n.p,{children:"The user_apply function checks if the current process has root permissions using the is_root() function. If the current process has root permissions, it iterates over the user_appliers dictionary and for each applier_name and applier_object, it calls the admin_context_apply() method of the applier_object. If any exception occurs during the execution of this method, it logs the applier name and the exception message. After that, it calls the apply_user_context() function with the user_appliers dictionary as a parameter. If the current process does not have root permissions, it directly calls the apply_user_context() function with the user_appliers dictionary as a parameter."}),"\n",(0,s.jsx)(n.p,{children:"It is important to note that the machine_apply function should only be called when the current process has root permissions. This is because the appliers that it runs may require administrator privileges to modify system-wide settings."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The function does not take any parameters."}),"\n",(0,s.jsx)(n.li,{children:"The function calls the machine_apply function if the is_machine attribute is True, otherwise, it calls the user_apply function."}),"\n",(0,s.jsx)(n.li,{children:"The machine_apply function should only be called when the current process has root permissions."}),"\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the is_root() function to check if the current process has root permissions."}),"\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the admin_context_apply() method of the applier_object for each applier in the user_appliers dictionary if the current process has root permissions."}),"\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the apply_user_context() function with the user_appliers dictionary as a parameter if the current process has root permissions or not."}),"\n",(0,s.jsx)(n.li,{children:"The apply_parameters() method of the frontend_manager object calls the user_apply() method if the is_machine attribute is False."}),"\n",(0,s.jsx)(n.li,{children:"The machine_apply() method of the frontend_manager object is called if the is_machine attribute is True."}),"\n",(0,s.jsx)(n.li,{children:"The user_context_apply() method of the applier_object is called by the apply_user_context() function for each applier in the user_appliers dictionary."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Relation with other functions"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the is_root() function to check if the current process has root permissions."}),"\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the admin_context_apply() method of the applier_object for each applier in the user_appliers dictionary if the current process has root permissions."}),"\n",(0,s.jsx)(n.li,{children:"The user_apply function calls the apply_user_context() function with the user_appliers dictionary as a parameter if the current process has root permissions or not."}),"\n",(0,s.jsx)(n.li,{children:"The apply_parameters() method of the frontend_manager object calls the user_apply() method if the is_machine attribute is False."}),"\n",(0,s.jsx)(n.li,{children:"The machine_apply() method of the frontend_manager object is called if the is_machine attribute is True."}),"\n",(0,s.jsx)(n.li,{children:"The user_context_apply() method of the applier_object is called by the apply_user_context() function for each applier in the user_appliers dictionary."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var s=i(6540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);