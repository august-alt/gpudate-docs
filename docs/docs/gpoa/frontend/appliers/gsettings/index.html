<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-gpoa/frontend/appliers/gsettings" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">gsettings | GPUpdate Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gpupdate-docs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://gpupdate-docs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://gpupdate-docs.github.io/docs/gpoa/frontend/appliers/gsettings"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="gsettings | GPUpdate Docs"><meta data-rh="true" name="description" content="ClassDef system_gsetting"><meta data-rh="true" property="og:description" content="ClassDef system_gsetting"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/appliers/gsettings"><link data-rh="true" rel="alternate" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/appliers/gsettings" hreflang="en"><link data-rh="true" rel="alternate" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/appliers/gsettings" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d27c289a.css">
<script src="/assets/js/runtime~main.e7149247.js" defer="defer"></script>
<script src="/assets/js/main.19b81b89.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">GPUpdate Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/gpoa/backend/applier_backend">gpoa</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/backend/applier_backend">backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/gpoa/frontend/applier_frontend">frontend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/applier_frontend">applier_frontend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/gpoa/frontend/appliers/control">appliers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/control">control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/envvar">envvar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/file_cp">file_cp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/firewall_rule">firewall_rule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/folder">folder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/gpoa/frontend/appliers/gsettings">gsettings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/ini_file">ini_file</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/netshare">netshare</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/polkit">polkit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/systemd">systemd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/appliers/util">util</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/chromium_applier">chromium_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/cifs_applier">cifs_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/control_applier">control_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/cups_applier">cups_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/envvar_applier">envvar_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/file_applier">file_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/firefox_applier">firefox_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/firewall_applier">firewall_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/folder_applier">folder_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/frontend_manager">frontend_manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/gsettings_applier">gsettings_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/ini_applier">ini_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/kde_applier">kde_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/networkshare_applier">networkshare_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/ntp_applier">ntp_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/package_applier">package_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/polkit_applier">polkit_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/scripts_applier">scripts_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/shortcut_applier">shortcut_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/systemd_applier">systemd_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/yandex_browser_applier">yandex_browser_applier</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/gpt/">gpt</a><button aria-label="Expand sidebar category &#x27;gpt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/plugin/">plugin</a><button aria-label="Expand sidebar category &#x27;plugin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/storage/cache">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/test/frontend/appliers/test_controls">test</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/util/">util</a><button aria-label="Expand sidebar category &#x27;util&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tools/parsing_chrom_admx_intvalues">tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">gpoa</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">frontend</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">appliers</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">gsettings</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>gsettings</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-system_gsetting">ClassDef system_gsetting<a href="#classdef-system_gsetting" class="hash-link" aria-label="Direct link to ClassDef system_gsetting" title="Direct link to ClassDef system_gsetting">​</a></h2>
<p><strong>system_gsetting</strong>: The <code>system_gsetting</code> class is used to apply a system-level gsetting with a given schema, path, value, and lock status. It also allows for the use of a helper function to modify the value before applying it.</p>
<p><strong>attributes</strong>:</p>
<p>· <code>schema</code>: A string representing the schema of the gsetting.</p>
<p>· <code>path</code>: A string representing the path of the gsetting.</p>
<p>· <code>value</code>: The value to be set for the gsetting.</p>
<p>· <code>lock</code>: A boolean indicating whether the gsetting should be locked after being applied.</p>
<p>· <code>helper_function</code>: An optional function that takes the schema, path, and value as arguments and returns a modified value.</p>
<p><strong>Code Description</strong>:</p>
<p>The <code>__init__</code> method initializes the class with the given schema, path, value, lock, and an optional helper function.</p>
<p>The <code>apply</code> method applies the gsetting with the given schema and path, and sets its value to the result of the helper function (if provided) or the original value. If a DuplicateSectionError occurs during the addition of the section, it is ignored. The method then sets the lock status of the gsetting and appends its path to the locks list.</p>
<p>The <code>system_gsetting</code> class is used by the <code>append</code> method in the <code>system_gsettings</code> object to append a new gsetting to the list of gsettings. The <code>append</code> method checks if the gsetting already exists, and if it does, it appends a new <code>system_gsetting</code> object to the <code>gsettings</code> list. If the gsetting does not exist, it logs an error message.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>helper_function</code> parameter is optional and can be set to <code>None</code>.</li>
<li>The <code>apply</code> method sets the value of the gsetting as a string, so the value should be convertible to a string.</li>
<li>The <code>lock</code> parameter determines whether the gsetting is locked after being applied. If set to <code>True</code>, the gsetting cannot be modified by non-privileged users.</li>
<li>The <code>apply</code> method appends the lock path to the <code>locks</code> list, which can be used to release the locks at a later time.</li>
<li>The <code>system_gsetting</code> class is used to apply a single gsetting, while the <code>system_gsettings</code> object is used to manage a list of gsettings.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-schema-path-value-lock-helper_function">FunctionDef <strong>init</strong>(self, schema, path, value, lock, helper_function)<a href="#functiondef-initself-schema-path-value-lock-helper_function" class="hash-link" aria-label="Direct link to functiondef-initself-schema-path-value-lock-helper_function" title="Direct link to functiondef-initself-schema-path-value-lock-helper_function">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong>init</strong> is to initialize the system_gsetting object with the provided parameters.</p>
<p><strong>parameters</strong>:
· schema: A string representing the schema name for the GSettings.
· path: A string representing the path for the GSettings.
· value: A value to be set in the GSettings.
· lock: A lock object to prevent concurrent access to the GSettings.
· helper_function (optional): A helper function to be used for setting the value in the GSettings. If not provided, the default behavior is used.</p>
<p><strong>Code Description</strong>:
The <strong>init</strong> function initializes the system_gsetting object by storing the provided parameters in instance variables. The schema, path, and lock variables are stored as-is, while the value is converted to a string before being stored. This is because GSettings values are always stored as strings.</p>
<p>If a helper_function is provided, it is stored in the instance variable helper_function. This can be used to customize the behavior of the system_gsetting object when setting the value in the GSettings.</p>
<p>The lock object is used to prevent concurrent access to the GSettings. This is important because GSettings is not thread-safe, and concurrent access can lead to data corruption. By using a lock, we can ensure that only one thread can access the GSettings at a time.</p>
<p><strong>Note</strong>:
It is important to always provide a lock object when initializing the system_gsetting object. Failing to do so can lead to data corruption in the GSettings.</p>
<p>When setting the value in the GSettings, it is recommended to use the helper_function parameter to customize the behavior. This can be useful for setting complex values or for performing additional checks before setting the value.</p>
<p>When providing a helper_function, it is important to ensure that it is thread-safe. Any code that accesses the GSettings should be wrapped in the lock to prevent concurrent access.</p>
<p>Finally, it is important to note that the system_gsetting object does not actually set the value in the GSettings. Instead, it provides a convenient interface for doing so. The actual setting of the value is performed by a separate function or method, which should be called after the system_gsetting object has been initialized.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-applyself-settings-config-locks">FunctionDef apply(self, settings, config, locks)<a href="#functiondef-applyself-settings-config-locks" class="hash-link" aria-label="Direct link to FunctionDef apply(self, settings, config, locks)" title="Direct link to FunctionDef apply(self, settings, config, locks)">​</a></h3>
<p><strong>apply</strong>: The function of <code>apply</code> is to modify the value of a key in a GSettings schema with a new value by using the <code>glib_value</code> function to create a GLib.Variant object with the same type as the current value.</p>
<p><strong>parameters</strong>:
· <code>settings</code>: An object that contains the GSettings settings.
· <code>config</code>: An object that represents a configuration file and allows adding sections and setting values.
· <code>locks</code>: A list that stores the lock paths of the settings to be locked in the dconf database.</p>
<p><strong>Code Description</strong>:
The <code>apply</code> function first attempts to add a section with the schema name to the configuration file using the <code>config.add_section</code> method. If a section with the same name already exists, it skips this step using a try-except block.</p>
<p>Next, it retrieves the value for the key in the GSettings schema using the <code>self.value</code> attribute. If the <code>self.helper_function</code> attribute is not <code>None</code>, it calls this helper function with the schema name, key path, and value as arguments, and updates the value using the returned value.</p>
<p>Then, it calls the <code>glib_value</code> function with the schema name, key path, new value, and GSettings object as arguments to create a GLib.Variant object with the correct type and the new value. This GLib.Variant object is then used to set the key value in the configuration file using the <code>config.set</code> method.</p>
<p>Finally, if the <code>self.lock</code> attribute is <code>True</code>, it calls the <code>dconf_path</code> function with the GSettings object and key path as arguments to construct the full path of the setting in the dconf database. It then appends this lock path to the <code>locks</code> list to lock the setting in the dconf database.</p>
<p>The <code>apply</code> function plays a crucial role in modifying the value of a key in a GSettings schema with a new value by creating a GLib.Variant object with the same type as the current value. It is used in the <code>system_gsetting</code> object to apply the configuration changes to the system GSettings schema, and in the <code>user_gsetting</code> object to apply the configuration changes to the user&#x27;s GSettings schema.</p>
<p><strong>Note</strong>:
The <code>settings</code>, <code>config</code>, and <code>locks</code> parameters should be valid objects or lists respectively. If not, the function may raise an exception. The <code>self.schema</code>, <code>self.path</code>, and <code>self.value</code> attributes should be valid GSettings schema name, path, and value respectively. If not, the <code>glib_value</code> function may raise an exception. The <code>self.helper_function</code> attribute should be a valid function if not <code>None</code>. If not, the <code>apply</code> function will not call it and use the <code>self.value</code> attribute directly. The <code>self.lock</code> attribute should be a boolean value. If <code>True</code>, the <code>apply</code> function will lock the setting in the dconf database. If <code>False</code>, it will not lock the setting.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-system_gsettings">ClassDef system_gsettings<a href="#classdef-system_gsettings" class="hash-link" aria-label="Direct link to ClassDef system_gsettings" title="Direct link to ClassDef system_gsettings">​</a></h2>
<p><strong>system_gsettings</strong>: The function of system_gsettings is to handle the manipulation of GSettings and lockdown files in the system.</p>
<p><strong>attributes</strong>:
· <code>override_file_path</code>: A string that represents the path to the override file.</p>
<p><strong>Code Description</strong>:
The <code>system_gsettings</code> class has several attributes defined at the class level, which are file paths used for managing GSettings and lockdown files.</p>
<p>The <code>__init__</code> method initializes the class with an <code>override_file_path</code> parameter, which is the path to the override file. It also initializes two empty lists, <code>gsettings</code> and <code>locks</code>, to store instances of <code>system_gsetting</code> and lock data, respectively.</p>
<p>The <code>append</code> method takes in four parameters: <code>schema</code>, <code>path</code>, <code>data</code>, <code>lock</code>, and <code>helper</code>. It checks if a <code>system_gsetting</code> instance already exists with the given <code>schema</code> and <code>path</code>. If it does, it appends the new <code>system_gsetting</code> instance to the <code>gsettings</code> list. If not, it logs an error message.</p>
<p>The <code>apply</code> method applies the changes made to the <code>gsettings</code> list by writing the data to a configuration file and updating the lockdown files. It first creates a <code>configparser.ConfigParser</code> object and loops through the <code>gsettings</code> list, applying each <code>system_gsetting</code> instance to the configuration object. It then writes the configuration object to the <code>override_file_path</code> file.</p>
<p>The method then creates the necessary directories for the lockdown files and removes any existing lockdown files. It then creates a new lockdown file and writes the lock data to it. Finally, it creates a new profile file and writes the profile data to it.</p>
<p>The <code>system_gsettings</code> class is used in the <code>gpoa/frontend/gsettings_applier.py</code> module to handle the manipulation of GSettings and lockdown files. The <code>gsettings_applier</code> class initializes an instance of <code>system_gsettings</code> with the path to the override file. It then filters the registry entries based on the GSettings schema and lockdown schema and applies the changes to the <code>system_gsettings</code> instance.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>system_gsettings</code> class assumes that the <code>check_existing_gsettings</code> and <code>log</code> functions are defined elsewhere in the codebase.</li>
<li>The <code>apply</code> method modifies system files, so it should be used with caution.</li>
<li>The <code>override_file_path</code> parameter should be a valid file path with write permissions.</li>
<li>The <code>gsettings</code> and <code>locks</code> lists should not be modified directly, instead use the <code>append</code> method to add new <code>system_gsetting</code> instances.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-override_file_path">FunctionDef <strong>init</strong>(self, override_file_path)<a href="#functiondef-initself-override_file_path" class="hash-link" aria-label="Direct link to functiondef-initself-override_file_path" title="Direct link to functiondef-initself-override_file_path">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong>init</strong> is to initialize the system_gsettings object with a given override_file_path.</p>
<p><strong>parameters</strong>:
· override_file_path: A string representing the file path of the override file.</p>
<p><strong>Code Description</strong>:
The __init__ function initializes two empty lists, gsettings and locks, which will be used to store GSettings and locks respectively. The override_file_path parameter is also stored as an instance variable, which can be accessed later in the object&#x27;s lifetime.</p>
<p>The gsettings list will be used to store the GSettings objects that are created during the lifetime of the system_gsettings object. The locks list will be used to store locks that are acquired during the lifetime of the system_gsettings object.</p>
<p>The override_file_path parameter is used to specify the location of the override file that will be used to override the default GSettings values. This file path is stored as an instance variable, so it can be accessed later in the object&#x27;s lifetime.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The override_file_path parameter is required, and it must be a string representing a valid file path.</li>
<li>The gsettings and locks lists are initialized as empty lists, and they will be populated during the lifetime of the system_gsettings object.</li>
<li>The override_file_path is stored as an instance variable, so it can be accessed later in the object&#x27;s lifetime.</li>
<li>The __init__ function is called automatically when a new system_gsettings object is created, and it is used to initialize the object&#x27;s state.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-appendself-schema-path-data-lock-helper">FunctionDef append(self, schema, path, data, lock, helper)<a href="#functiondef-appendself-schema-path-data-lock-helper" class="hash-link" aria-label="Direct link to FunctionDef append(self, schema, path, data, lock, helper)" title="Direct link to FunctionDef append(self, schema, path, data, lock, helper)">​</a></h3>
<p><strong>append</strong>: The <code>append</code> function is used to add a new gsetting to the list of gsettings managed by the <code>system_gsettings</code> object. It checks if the gsetting already exists, and if it does, it appends a new <code>system_gsetting</code> object to the <code>gsettings</code> list. If the gsetting does not exist, it logs an error message.</p>
<p><strong>parameters</strong>:
· <code>schema</code> (str): A string representing the schema of the gsetting.
· <code>path</code> (str): A string representing the path of the gsetting.
· <code>data</code> (any): The value to be set for the gsetting.
· <code>lock</code> (bool): A boolean indicating whether the gsetting should be locked after being applied.
· <code>helper</code> (function): An optional function that takes the schema, path, and value as arguments and returns a modified value.</p>
<p><strong>Code Description</strong>:
The <code>append</code> function first calls the <code>check_existing_gsettings</code> function to check if the gsetting already exists. If it does, the function creates a new <code>system_gsetting</code> object with the given schema, path, data, lock, and helper parameters, and appends it to the <code>gsettings</code> list. If the gsetting does not exist, it logs an error message using the <code>log</code> function.</p>
<p>The <code>check_existing_gsettings</code> function takes a schema and path as input and returns a boolean indicating whether the gsetting already exists. It uses the <code>Gio.SettingsSchemaSource.get_default()</code> method to get the default schema source, and then looks up the provided schema using the <code>lookup()</code> method. If the schema is found, it checks if the path exists in the schema using the <code>has_key()</code> method. If both conditions are true, the function returns <code>True</code>, indicating that the gsetting already exists. Otherwise, it returns <code>False</code>.</p>
<p>The <code>append</code> function is called in the <code>run</code> method of the <code>gsettings_applier</code> object. The <code>run</code> method applies all the gsettings in the <code>gsettings_keys</code> list to the system. For each gsetting in the list, it creates a <code>system_gsetting</code> object with the given schema, path, data, lock, and helper parameters, and appends it to the <code>gsettings</code> list. If the gsetting already exists, it creates a new <code>system_gsetting</code> object with the same schema, path, and lock parameters, but with a modified data parameter using the helper function (if provided).</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>helper</code> parameter is optional and can be set to <code>None</code>.</li>
<li>The <code>data</code> parameter should be convertible to a string, as it is set as a string in the <code>system_gsetting</code> object.</li>
<li>The <code>lock</code> parameter determines whether the gsetting is locked after being applied. If set to <code>True</code>, the gsetting cannot be modified by non-privileged users.</li>
<li>The <code>append</code> function does not return any value, but appends a new <code>system_gsetting</code> object to the <code>gsettings</code> list if the gsetting does not already exist.</li>
<li>The <code>check_existing_gsettings</code> function only checks for the existence of the gsetting in the system schema directory. If the gsetting is located in the user schema directory, it will not be found.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-applyself">FunctionDef apply(self)<a href="#functiondef-applyself" class="hash-link" aria-label="Direct link to FunctionDef apply(self)" title="Direct link to FunctionDef apply(self)">​</a></h3>
<p><strong>apply</strong>: The function of apply is to apply the gsettings specified in the configuration file.</p>
<p><strong>parameters</strong>:
· self: The instance of the class.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-glib_mapvalue-glib_type">FunctionDef glib_map(value, glib_type)<a href="#functiondef-glib_mapvalue-glib_type" class="hash-link" aria-label="Direct link to FunctionDef glib_map(value, glib_type)" title="Direct link to FunctionDef glib_map(value, glib_type)">​</a></h2>
<p><strong>glib_map</strong>: The function of glib_map is to create a GLib.Variant object with a specified type and value.</p>
<p><strong>parameters</strong>
· <code>value</code>: The value to be wrapped in a GLib.Variant object.
· <code>glib_type</code>: A string representing the GLib type of the value. It can be &#x27;i&#x27; for integer, &#x27;b&#x27; for boolean, &#x27;q&#x27; for int64, or any other type string that GLib.Variant supports.</p>
<p><strong>Code Description</strong>
The function first assumes that the <code>value</code> can be used as the value of the GLib.Variant object directly. Then, it checks if the <code>glib_type</code> is &#x27;i&#x27;, &#x27;b&#x27;, or &#x27;q&#x27;. If so, it converts <code>value</code> to an integer first before creating the GLib.Variant object. This is because the GLib.Variant constructor requires an integer argument for these types.</p>
<p>From a functional perspective, this function plays a crucial role in the <code>glib_value</code> function in gpoa/frontend/appliers/gsettings.py/glib_value. The <code>glib_value</code> function retrieves the current value of a key in a GSettings schema and modifies it with a new value. To do so, it needs to create a GLib.Variant object with the same type as the current value. This is where <code>glib_map</code> comes in. It creates a GLib.Variant object with the correct type and the new value, which can then be used to modify the key in the GSettings schema.</p>
<p><strong>Note</strong>
The <code>glib_type</code> parameter should be a string representing a valid GLib type. If it is not, the function may raise a GLib.Error exception.</p>
<p><strong>Output Example</strong>
Suppose we call <code>glib_map(123, &#x27;i&#x27;)</code>, the function will return a GLib.Variant object with the value 123 and the type &#x27;i&#x27;. If we call <code>glib_map(&#x27;true&#x27;, &#x27;b&#x27;)</code>, the function will return a GLib.Variant object with the value 1 and the type &#x27;b&#x27;, because &#x27;true&#x27; is a string representation of a boolean value in GLib.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-dconf_pathsettings-path">FunctionDef dconf_path(settings, path)<a href="#functiondef-dconf_pathsettings-path" class="hash-link" aria-label="Direct link to FunctionDef dconf_path(settings, path)" title="Direct link to FunctionDef dconf_path(settings, path)">​</a></h2>
<p><strong>dconf_path</strong>: The function of <code>dconf_path</code> is to construct and return the full path of a setting in the dconf database.</p>
<p><strong>parameters</strong>:
· <code>settings</code>: An object that contains the dconf settings.
· <code>path</code>: A string that represents the relative path of the setting in the dconf database.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-glib_valueschema-path-value-settings">FunctionDef glib_value(schema, path, value, settings)<a href="#functiondef-glib_valueschema-path-value-settings" class="hash-link" aria-label="Direct link to FunctionDef glib_value(schema, path, value, settings)" title="Direct link to FunctionDef glib_value(schema, path, value, settings)">​</a></h2>
<p><strong>glib_value</strong>: The function of glib_value is to modify the value of a key in a GSettings schema with a new value by creating a GLib.Variant object with the same type as the current value.</p>
<p><strong>parameters</strong>:
· <code>schema</code>: A string representing the name of the GSettings schema.
· <code>path</code>: A string representing the path of the key in the GSettings schema.
· <code>value</code>: The new value to be set for the key.
· <code>settings</code>: A Gio.Settings object representing the GSettings schema.</p>
<p><strong>Code Description</strong>:
The glib_value function first retrieves the current value of the key in the GSettings schema using the <code>settings.get_value(path)</code> method. It then queries the data type for the key using the <code>key.get_type_string()</code> method. After that, it builds the new value with the determined type using the glib_map function, which creates a GLib.Variant object with the correct type and the new value. This GLib.Variant object can then be used to modify the key in the GSettings schema.</p>
<p>From a functional perspective, this function plays a crucial role in the <code>apply</code> function in gpoa/frontend/appliers/gsettings.py/system_gsetting and gpoa/frontend/appliers/gsettings.py/user_gsetting. The <code>apply</code> function in both objects retrieves the current value of a key in a GSettings schema and modifies it with a new value. To do so, it needs to create a GLib.Variant object with the same type as the current value. This is where glib_value comes in. It creates a GLib.Variant object with the correct type and the new value, which can then be used to modify the key in the GSettings schema.</p>
<p><strong>Note</strong>:
The <code>schema</code>, <code>path</code>, and <code>settings</code> parameters should be valid GSettings schema name, path, and Gio.Settings object respectively. If not, the function may raise an exception.</p>
<p><strong>Output Example</strong>:
Suppose we call <code>glib_value(&#x27;org.gnome.desktop.background&#x27;, &#x27;picture-uri&#x27;, &#x27;file:///home/user/image.jpg&#x27;)</code>, the function will return a GLib.Variant object with the value &#x27;file:///home/user/image.jpg&#x27; and the type &#x27;s&#x27; (string) if the current value of the key &#x27;picture-uri&#x27; is a string.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-check_existing_gsettingsschema-path">FunctionDef check_existing_gsettings(schema, path)<a href="#functiondef-check_existing_gsettingsschema-path" class="hash-link" aria-label="Direct link to FunctionDef check_existing_gsettings(schema, path)" title="Direct link to FunctionDef check_existing_gsettings(schema, path)">​</a></h2>
<p><strong>check_existing_gsettings</strong>: The function of check_existing_gsettings is to check if a specific schema and path already exist in the GSettings.</p>
<p><strong>parameters</strong>:
· schema (str): A string representing the name of the schema to be checked.
· path (str): A string representing the path to be checked.</p>
<p><strong>Code Description</strong>:
The function begins by getting the default Gio.SettingsSchemaSource using the get_default() method. It then looks up the provided schema using the lookup() method, which returns a Gio.SettingsSchema object if found. By setting the second argument of lookup() to False, it ensures that the search is performed only in the system schema directory.</p>
<p>Next, it checks if the sourceSchema object is not None and if it has the provided path as a key using the has_key() method. If both conditions are True, the function returns True, indicating that the schema and path already exist. Otherwise, it returns False.</p>
<p>This function is used in the append() method of both system_gsettings and user_gsettings objects. In both cases, if the schema and path already exist, the corresponding gsetting is appended to the gsettings object. If not, a log message is generated indicating that the schema and path do not exist.</p>
<p><strong>Note</strong>:
This function only checks for the existence of the schema and path in the system schema directory. If the schema and path are located in the user schema directory, they will not be found.</p>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">check_existing_gsettings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;org.gnome.desktop.background&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;picture-uri&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Returns True if the schema and path already exist, False otherwise.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-user_gsettings">ClassDef user_gsettings<a href="#classdef-user_gsettings" class="hash-link" aria-label="Direct link to ClassDef user_gsettings" title="Direct link to ClassDef user_gsettings">​</a></h2>
<p><strong>user_gsettings</strong>: The function of user_gsettings is to manage a list of user&#x27;s gsettings. It allows appending new gsettings with schema, path, value, and an optional helper function. Once all gsettings are added, they can be applied using the <code>apply()</code> method.</p>
<p><strong>attributes</strong>:</p>
<p>· gsettings: A list of user_gsetting objects.</p>
<p><strong>Code Description</strong>:</p>
<p>The <code>__init__</code> method initializes an empty list of gsettings.</p>
<p>The <code>append</code> method checks if a gsetting with the same schema and path already exists in the list using the <code>check_existing_gsettings()</code> function. If it does, the new gsetting is appended to the list. If not, a log message is created using the <code>log()</code> function.</p>
<p>The <code>apply()</code> method iterates through the list of gsettings and applies each one using the <code>apply()</code> method of the user_gsetting object. It also logs the schema, path, and value of each gsetting before applying it.</p>
<p>The <code>user_gsettings</code> class is used in the <code>gsettings_applier_user</code> class to manage a list of gsettings that will be applied to the user&#x27;s system. The <code>gsettings_applier_user</code> class initializes an empty <code>user_gsettings</code> object and populates it with gsettings based on the keys in the Windows registry. The <code>windows_settings</code> list contains mappings between Windows registry keys and gsettings keys, which are used to create the gsettings objects.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>check_existing_gsettings()</code> function is not defined in the provided code, so it should be defined elsewhere in the project.</li>
<li>The <code>log()</code> function is also not defined in the provided code, but it is used to log messages in several places. It should be defined elsewhere in the project.</li>
<li>The <code>user_gsetting</code> class is not defined in the provided code, but it is used in the <code>append()</code> method. It should be defined elsewhere in the project.</li>
<li>The <code>gsettings_filter</code> and <code>gsettings_keys</code> attributes are not used in the provided code, so they may be unnecessary.</li>
<li>The <code>__registry_branch</code>, <code>__module_name</code>, and <code>__module_experimental</code> attributes are not defined in the provided code, so they should be defined elsewhere in the project.</li>
<li>The <code>check_enabled()</code> and <code>check_windows_mapping_enabled()</code> functions are not defined in the provided code, so they should be defined elsewhere in the project.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself">FunctionDef <strong>init</strong>(self)<a href="#functiondef-initself" class="hash-link" aria-label="Direct link to functiondef-initself" title="Direct link to functiondef-initself">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong>init</strong> is to initialize the user_gsettings object and create an empty list for storing GSettings schema keys.</p>
<p><strong>parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>:
The <code>__init__</code> function is a special method in Python classes, called when an object is created from the class. In this case, when a new <code>user_gsettings</code> object is created, the <code>__init__</code> method initializes the object by creating an empty list called <code>gsettings</code>. This list will be used to store GSettings schema keys for the user&#x27;s settings.</p>
<p>Here&#x27;s a step-by-step breakdown of the code:</p>
<ol>
<li><code>def __init__(self):</code> defines the special <code>__init__</code> method for the <code>user_gsettings</code> class. The <code>self</code> parameter is a reference to the current instance of the class and is used to access variables and methods associated with that instance.</li>
<li><code>self.gsettings = list()</code> creates an empty list object and assigns it to the <code>gsettings</code> attribute of the current <code>user_gsettings</code> instance.</li>
</ol>
<p><strong>Note</strong>:
This <code>__init__</code> function is called automatically when a new <code>user_gsettings</code> object is created. You don&#x27;t need to call it explicitly. When working with this object, you can directly access and manipulate the <code>gsettings</code> list using the dot notation, like <code>my_user_gsettings_obj.gsettings</code>. Remember that this list will be used to store GSettings schema keys, so make sure to add only valid schema keys to it.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-appendself-schema-path-value-helper">FunctionDef append(self, schema, path, value, helper)<a href="#functiondef-appendself-schema-path-value-helper" class="hash-link" aria-label="Direct link to FunctionDef append(self, schema, path, value, helper)" title="Direct link to FunctionDef append(self, schema, path, value, helper)">​</a></h3>
<p><strong>append</strong>: The function of append is to append a value to a specific schema and path in the GSettings if it already exists. If not, a log message is generated indicating that the schema and path do not exist.</p>
<p><strong>parameters</strong>:
· schema (str): A string representing the name of the schema to be checked and appended.
· path (str): A string representing the path to be checked and appended.
· value: The value to be appended.
· helper (optional, callable): An optional helper function that takes the schema, path, and value as arguments and returns a modified value.</p>
<p><strong>Code Description</strong>:
The <code>append</code> function first checks if the schema and path already exist in the GSettings using the <code>check_existing_gsettings</code> function. If the schema and path exist, the function appends the given value to the corresponding key in the GSettings using the <code>append</code> method of the <code>Gio.Settings</code> object.</p>
<p>Before appending the value, the function checks if the <code>helper</code> parameter is provided. If so, it uses the helper function to modify the value. The helper function takes the schema, path, and value as arguments and returns a modified value.</p>
<p>The <code>append</code> function is used in the <code>windows_mapping_append</code> method of the <code>gsettings_applier_user</code> object in the <code>gsettings_applier.py</code> module. In this method, the <code>append</code> function is called for each mapping in the <code>__windows_settings</code> dictionary. The <code>schema</code> and <code>path</code> parameters are set to the <code>gsettings_schema</code> and <code>gsettings_key</code> attributes of the mapping object, respectively. The <code>value</code> parameter is set to the value of the corresponding key in the Windows registry.</p>
<p>The <code>append</code> function is also used in the <code>run</code> method of the <code>gsettings_applier_user</code> object in the <code>gsettings_applier.py</code> module. In this method, the <code>append</code> function is called for each GSettings key in the <code>gsettings_keys</code> list. The <code>schema</code>, <code>path</code>, and <code>value</code> parameters are set to the corresponding attributes of the key object. The <code>helper</code> parameter is set to the <code>uri_fetch_helper</code> function if the key is the wallpaper entry, and <code>None</code> otherwise.</p>
<p><strong>Note</strong>:
When using the <code>append</code> function, make sure to provide the correct schema and path to the key. If a helper function is provided, ensure that it takes the correct arguments and returns a modified value that can be appended to the schema. When calling the <code>append</code> function from the <code>windows_mapping_append</code> method, be aware that it will only append the setting if the key already exists in the schema. When calling the <code>append</code> function from the <code>run</code> method, be aware that it will overwrite the existing value in the schema if the key already exists.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-applyself-1">FunctionDef apply(self)<a href="#functiondef-applyself-1" class="hash-link" aria-label="Direct link to FunctionDef apply(self)" title="Direct link to FunctionDef apply(self)">​</a></h3>
<p><strong>apply</strong>: The function of apply is to iterate through the gsettings list and apply each gsetting.</p>
<p><strong>parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>:
The <code>apply</code> function begins by iterating through the <code>gsettings</code> list using a for loop (<code>for gsetting in self.gsettings:</code>). For each gsetting in the list, it creates a new dictionary <code>logdata</code> to store log information. The keys of this dictionary are &quot;gsetting.schema&quot;, &quot;gsetting.path&quot;, and &quot;gsetting.value&quot;, and the corresponding values are obtained from the current gsetting object (<code>gsetting.schema</code>, <code>gsetting.path</code>, and <code>gsetting.value</code>).</p>
<p>Then, the <code>logdata</code> dictionary is passed as an argument to the <code>log</code> function along with the string &quot;D85&quot;. This logs the gsetting&#x27;s schema, path, and value to provide more context about what is being applied.</p>
<p>Finally, the <code>apply</code> method of the current gsetting object is called, which actually applies the gsetting.</p>
<p>The <code>apply</code> function is called in the <code>run</code> method of the <code>gsettings_applier_user</code> object in the <code>gsettings_applier.py</code> module. The <code>run</code> method calculates all configured gsettings and adds them to the <code>gsettings</code> list. After that, it calls the <code>apply</code> method of the <code>gsettings</code> object to apply all the calculated gsettings.</p>
<p><strong>Note</strong>:
The <code>apply</code> function assumes that the <code>gsettings</code> list contains valid <code>gsetting</code> objects with <code>schema</code>, <code>path</code>, and <code>value</code> attributes. If the list contains invalid objects, the function may raise an <code>AttributeError</code>.</p>
<p>Additionally, the <code>apply</code> function relies on the <code>log</code> function to log the gsetting&#x27;s schema, path, and value. If the <code>log</code> function is not properly implemented, the logging may not work as expected.</p>
<p>Furthermore, the <code>apply</code> function calls the <code>apply</code> method of each gsetting object to apply it. If the <code>apply</code> method of a gsetting object is not properly implemented, the gsetting may not be applied correctly.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-user_gsetting">ClassDef user_gsetting<a href="#classdef-user_gsetting" class="hash-link" aria-label="Direct link to ClassDef user_gsetting" title="Direct link to ClassDef user_gsetting">​</a></h2>
<p><strong>user_gsetting</strong>: The function of user_gsetting is to set a value in the GSettings schema with a specified schema, path, and value.</p>
<p><strong>attributes</strong>:
· schema: A string representing the schema name to be accessed.
· path: A string representing the path to the key in the schema.
· value: The value to be set in the key.
· helper_function: An optional function that takes the schema, path, and value as arguments and returns a modified value.</p>
<p><strong>Code Description</strong>:
The <code>__init__</code> method initializes the user_gsetting object with the given schema, path, value, and an optional helper function.</p>
<p>The <code>apply</code> method is where the main functionality resides. It first creates a Gio.Settings object with the specified schema. Then, it checks if the helper function is provided. If so, it uses the helper function to modify the value. After that, it creates a glib_value object with the schema, path, value, and settings. Finally, it sets the value in the settings object and synchronizes it.</p>
<p>This class is used to set a value in the GSettings schema, and it can be used in conjunction with the helper function to modify the value before setting it.</p>
<p>From a functional perspective, this class is called by the <code>append</code> method in the <code>user_gsettings</code> object. The <code>append</code> method checks if the key already exists in the schema. If it does, it creates a new <code>user_gsetting</code> object and appends it to the list of settings to be applied. If not, it logs an error message indicating that the key does not exist.</p>
<p><strong>Note</strong>:
When using this class, make sure to provide the correct schema and path to the key. If a helper function is provided, ensure that it takes the correct arguments and returns a modified value that can be set in the schema. When calling this class from the <code>append</code> method, be aware that it will only append the setting if the key already exists in the schema.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-schema-path-value-helper_function">FunctionDef <strong>init</strong>(self, schema, path, value, helper_function)<a href="#functiondef-initself-schema-path-value-helper_function" class="hash-link" aria-label="Direct link to functiondef-initself-schema-path-value-helper_function" title="Direct link to functiondef-initself-schema-path-value-helper_function">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong>init</strong> is to initialize the user_gsetting object with the necessary parameters.</p>
<p><strong>parameters</strong>:
· schema: This parameter is used to specify the schema of the gsetting.
· path: This parameter is used to specify the path of the gsetting.
· value: This parameter is used to specify the value of the gsetting.
· helper_function: This parameter is an optional function that can be used to perform additional operations related to the gsetting.</p>
<p><strong>Code Description</strong>:
The <strong>init</strong> function initializes the user_gsetting object by setting the schema, path, and value attributes with the provided arguments. If a helper_function is provided, it is also stored as an attribute of the object. This function does not perform any additional operations other than initializing the object.</p>
<p>The schema parameter is used to specify the schema of the gsetting, which is a named collection of gsetting keys. The path parameter is used to specify the path of the gsetting, which is a string that identifies the gsetting within the schema. The value parameter is used to specify the value of the gsetting.</p>
<p>The helper_function parameter is an optional parameter that can be used to perform additional operations related to the gsetting. For example, the helper_function could be used to validate the value of the gsetting before it is set.</p>
<p><strong>Note</strong>:
It is important to note that the <strong>init</strong> function does not actually set the value of the gsetting. It only initializes the object with the necessary parameters. To set the value of the gsetting, you will need to call the appropriate method of the object.</p>
<p>Additionally, the helper_function parameter is optional and does not need to be provided when initializing the object. However, if a helper_function is provided, it should be a callable object (e.g., a function or a bound method) that takes no arguments.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-applyself-2">FunctionDef apply(self)<a href="#functiondef-applyself-2" class="hash-link" aria-label="Direct link to FunctionDef apply(self)" title="Direct link to FunctionDef apply(self)">​</a></h3>
<p><strong>apply</strong>: The function of apply is to modify the value of a key in a GSettings schema with a new value by creating a GLib.Variant object with the same type as the current value.</p>
<p><strong>parameters</strong>:
· <code>self</code>: The user_gsetting object that calls this function.</p>
<p>The <code>apply</code> function performs the following steps:</p>
<ol>
<li>Access the current schema: It creates a Gio.Settings object using the schema name of the user_gsetting object. This object allows the function to interact with the GSettings schema.</li>
<li>Update result with helper function: If a helper function is defined for the user_gsetting object, the function applies it to the new value and the schema/path to generate an updated value.</li>
<li>Get typed value by schema: It calls the <code>glib_value</code> function with the schema, path, and the new or updated value to create a GLib.Variant object with the correct type and the new value.</li>
<li>Set the value: It sets the value of the key in the GSettings schema using the <code>settings.set_value(path, result)</code> method.</li>
<li>Sync the settings: It saves the changes to the schema by calling the <code>settings.sync()</code> method.</li>
</ol>
<p>From a functional perspective, the <code>apply</code> function plays a crucial role in updating the value of a key in a GSettings schema. It relies on the <code>glib_value</code> function to create a GLib.Variant object with the correct type and the new value. This GLib.Variant object is then used to modify the key in the GSettings schema.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>self</code> parameter should be a valid user_gsetting object with a schema, path, and new value. If not, the function may raise an exception.</li>
<li>The <code>glib_value</code> function should also receive valid parameters, as mentioned in its documentation.</li>
</ul>
<p>Example:
Suppose we have a user_gsetting object with schema &#x27;org.gnome.desktop.background&#x27;, path &#x27;picture-uri&#x27;, and new value &#x27;file:///home/user/image.jpg&#x27;. The <code>apply</code> function will create a GLib.Variant object with the value &#x27;file:///home/user/image.jpg&#x27; and the type &#x27;s&#x27; (string) if the current value of the key &#x27;picture-uri&#x27; is a string. It will then set the value of the key &#x27;picture-uri&#x27; in the GSettings schema &#x27;org.gnome.desktop.background&#x27; with the new GLib.Variant object. Finally, it will save the changes to the schema by calling the <code>settings.sync()</code> method.</p>
<hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/gpoa/frontend/appliers/folder"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">folder</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/gpoa/frontend/appliers/ini_file"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ini_file</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#classdef-system_gsetting" class="table-of-contents__link toc-highlight">ClassDef system_gsetting</a><ul><li><a href="#functiondef-initself-schema-path-value-lock-helper_function" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, schema, path, value, lock, helper_function)</a></li><li><a href="#functiondef-applyself-settings-config-locks" class="table-of-contents__link toc-highlight">FunctionDef apply(self, settings, config, locks)</a></li></ul></li><li><a href="#classdef-system_gsettings" class="table-of-contents__link toc-highlight">ClassDef system_gsettings</a><ul><li><a href="#functiondef-initself-override_file_path" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, override_file_path)</a></li><li><a href="#functiondef-appendself-schema-path-data-lock-helper" class="table-of-contents__link toc-highlight">FunctionDef append(self, schema, path, data, lock, helper)</a></li><li><a href="#functiondef-applyself" class="table-of-contents__link toc-highlight">FunctionDef apply(self)</a></li></ul></li><li><a href="#functiondef-glib_mapvalue-glib_type" class="table-of-contents__link toc-highlight">FunctionDef glib_map(value, glib_type)</a></li><li><a href="#functiondef-dconf_pathsettings-path" class="table-of-contents__link toc-highlight">FunctionDef dconf_path(settings, path)</a></li><li><a href="#functiondef-glib_valueschema-path-value-settings" class="table-of-contents__link toc-highlight">FunctionDef glib_value(schema, path, value, settings)</a></li><li><a href="#functiondef-check_existing_gsettingsschema-path" class="table-of-contents__link toc-highlight">FunctionDef check_existing_gsettings(schema, path)</a></li><li><a href="#classdef-user_gsettings" class="table-of-contents__link toc-highlight">ClassDef user_gsettings</a><ul><li><a href="#functiondef-initself" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self)</a></li><li><a href="#functiondef-appendself-schema-path-value-helper" class="table-of-contents__link toc-highlight">FunctionDef append(self, schema, path, value, helper)</a></li><li><a href="#functiondef-applyself-1" class="table-of-contents__link toc-highlight">FunctionDef apply(self)</a></li></ul></li><li><a href="#classdef-user_gsetting" class="table-of-contents__link toc-highlight">ClassDef user_gsetting</a><ul><li><a href="#functiondef-initself-schema-path-value-helper_function" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, schema, path, value, helper_function)</a></li><li><a href="#functiondef-applyself-2" class="table-of-contents__link toc-highlight">FunctionDef apply(self)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/gpoa/backend/samba_backend">Samba Backend</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 BaseALT LTD, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>