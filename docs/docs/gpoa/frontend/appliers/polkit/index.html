<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-gpoa/frontend/appliers/polkit" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">polkit | GPUpdate Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://august-alt.github.io/gpupdate-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://august-alt.github.io/gpupdate-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/appliers/polkit"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="polkit | GPUpdate Docs"><meta data-rh="true" name="description" content="ClassDef polkit"><meta data-rh="true" property="og:description" content="ClassDef polkit"><link data-rh="true" rel="icon" href="/gpupdate-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/appliers/polkit"><link data-rh="true" rel="alternate" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/appliers/polkit" hreflang="en"><link data-rh="true" rel="alternate" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/appliers/polkit" hreflang="x-default"><link rel="stylesheet" href="/gpupdate-docs/assets/css/styles.d27c289a.css">
<script src="/gpupdate-docs/assets/js/runtime~main.9c9ca5ac.js" defer="defer"></script>
<script src="/gpupdate-docs/assets/js/main.77502ab4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/gpupdate-docs/"><div class="navbar__logo"><img src="/gpupdate-docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/gpupdate-docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">GPUpdate Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/gpupdate-docs/docs/gpoa/backend/applier_backend">gpoa</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/backend/applier_backend">backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/applier_frontend">frontend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/applier_frontend">applier_frontend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/control">appliers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/control">control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/envvar">envvar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/file_cp">file_cp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/firewall_rule">firewall_rule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/folder">folder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/gsettings">gsettings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/ini_file">ini_file</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/netshare">netshare</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/polkit">polkit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/systemd">systemd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/util">util</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/chromium_applier">chromium_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/cifs_applier">cifs_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/control_applier">control_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/cups_applier">cups_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/envvar_applier">envvar_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/file_applier">file_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/firefox_applier">firefox_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/firewall_applier">firewall_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/folder_applier">folder_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/frontend_manager">frontend_manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/gsettings_applier">gsettings_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/ini_applier">ini_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/kde_applier">kde_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/networkshare_applier">networkshare_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/ntp_applier">ntp_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/package_applier">package_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/polkit_applier">polkit_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/scripts_applier">scripts_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/shortcut_applier">shortcut_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/systemd_applier">systemd_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/yandex_browser_applier">yandex_browser_applier</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/gpt/">gpt</a><button aria-label="Expand sidebar category &#x27;gpt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/plugin/">plugin</a><button aria-label="Expand sidebar category &#x27;plugin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/storage/cache">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/test/frontend/appliers/test_controls">test</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/">util</a><button aria-label="Expand sidebar category &#x27;util&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/gpupdate-docs/docs/tools/parsing_chrom_admx_intvalues">tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/gpupdate-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">gpoa</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">frontend</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">appliers</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">polkit</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>polkit</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-polkit">ClassDef polkit<a href="#classdef-polkit" class="hash-link" aria-label="Direct link to ClassDef polkit" title="Direct link to ClassDef polkit">​</a></h2>
<p><strong>polkit</strong>: The function of polkit is to generate Polkit rules files based on provided templates and arguments.</p>
<p><strong>attributes</strong>:</p>
<ul>
<li><code>template_name</code>: The name of the template file to be used for generating the Polkit rules file.</li>
<li><code>arglist</code>: A dictionary of arguments that will be passed to the Jinja2 template engine for rendering the template.</li>
<li><code>username</code>: An optional parameter used to specify the username for the generated Polkit rules file. If not provided, the rules file will not be user-specific.</li>
</ul>
<p><strong>Code Description</strong>:
The <code>polkit</code> class initializes several attributes, including the template path, policy directory, and a Jinja2 template loader and environment. The <code>__init__</code> method sets the class properties based on the provided <code>template_name</code>, <code>arglist</code>, and <code>username</code>.</p>
<p>The <code>_is_empty</code> method checks if the <code>arglist</code> is empty or not. If it is empty, the method returns <code>True</code>, otherwise <code>False</code>.</p>
<p>The <code>generate</code> method checks if the <code>arglist</code> is empty. If it is, the method checks if the output file already exists and removes it if it does. If the <code>arglist</code> is not empty, the method loads the template using the Jinja2 environment, renders the template with the provided arguments, and writes the output to the specified file. The method also logs data about the generated file and arguments.</p>
<p><strong>Relationship with Callers</strong>:
The <code>polkit</code> class is used by the <code>polkit_applier</code> class to generate Polkit rules files based on the contents of a registry storage. The <code>polkit_applier</code> class creates instances of the <code>polkit</code> class for each template and set of arguments it needs to process.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>username</code> parameter is optional and can be omitted if the Polkit rules file should not be user-specific.</li>
<li>If the <code>arglist</code> is empty, the generated Polkit rules file will be empty as well.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">polkit_instance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> polkit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;template_name&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;key&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;value&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">polkit_instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">generate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will generate a Polkit rules file based on the <code>template_name</code> and the provided <code>arglist</code>. The output file will be located in <code>/etc/polkit-1/rules.d/</code> and will be named <code>template_name.rules</code> or <code>template_name.username.rules</code> if a <code>username</code> was provided.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-template_name-arglist-username">FunctionDef <strong>init</strong>(self, template_name, arglist, username)<a href="#functiondef-initself-template_name-arglist-username" class="hash-link" aria-label="Direct link to functiondef-initself-template_name-arglist-username" title="Direct link to functiondef-initself-template_name-arglist-username">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong>init</strong> is to initialize the polkit object with the given parameters.</p>
<p><strong>parameters</strong>:
· template_name: A string representing the name of the template to be used.
· arglist: A list of arguments to be passed to the template.
· username: An optional string representing the username for which the policy is being created.</p>
<p><strong>Code Description</strong>:
The __init__ function initializes the polkit object by setting the template_name, arglist, and username attributes. The template_name attribute is set to the value of the template_name parameter. The arglist attribute is set to the value of the arglist parameter. The username attribute is set to the value of the username parameter if it is provided, otherwise it is set to None.</p>
<p>The infilename attribute is then set to a string that is the concatenation of the template_name attribute and the string &#x27;.rules.j2&#x27;. This attribute represents the name of the template file that will be used to generate the policy.</p>
<p>The outfile attribute is set based on the value of the username attribute. If the username attribute is not None, the outfile attribute is set to the path of the output file that will contain the generated policy for the specified username. Otherwise, the outfile attribute is set to the path of the output file that will contain the generated policy for all users.</p>
<p><strong>Note</strong>:
The __policy_dir attribute is not defined in this __init__ function. It should be defined in the parent class or set as a class variable. If it is not defined, the __init__ function will raise a NameError.</p>
<p>The arglist parameter should be a list of arguments that can be passed to the template. The contents of this list will depend on the specific template being used.</p>
<p>The username parameter is optional and can be omitted if the policy is being created for all users. If the username parameter is provided, the generated policy will only apply to the specified user.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-_is_emptyself">FunctionDef _is_empty(self)<a href="#functiondef-_is_emptyself" class="hash-link" aria-label="Direct link to FunctionDef _is_empty(self)" title="Direct link to FunctionDef _is_empty(self)">​</a></h3>
<p><strong><code>_is_empty</code></strong>: The function of <code>_is_empty</code> is to check if the <code>args</code> attribute of the <code>polkit</code> object is empty or not, excluding the key &#x27;User&#x27;.</p>
<p><strong>parameters</strong>:</p>
<p>· <code>self</code>: The instance of the <code>polkit</code> class.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-generateself">FunctionDef generate(self)<a href="#functiondef-generateself" class="hash-link" aria-label="Direct link to FunctionDef generate(self)" title="Direct link to FunctionDef generate(self)">​</a></h3>
<p><strong>generate</strong>: The function of generate is to render and write a policy template to a file if the <code>args</code> attribute of the <code>polkit</code> object is not empty.</p>
<p><strong>parameters</strong>:</p>
<p>· <code>self</code>: The instance of the <code>polkit</code> class.</p>
<p><strong>Code Description</strong>:</p>
<p>The <code>generate</code> function first checks if the <code>args</code> attribute of the <code>polkit</code> object is empty or not, excluding the key &#x27;User&#x27; by calling the <code>_is_empty</code> function. If it is empty, the function returns without doing anything.</p>
<p>If the <code>args</code> attribute is not empty, the function gets a template using the <code>get_template</code> method of the <code>TemplateEnvironment</code> object with the <code>infilename</code> attribute of the <code>polkit</code> object as the template file name. Then, the function renders the template using the <code>render</code> method of the <code>Template</code> object with the <code>args</code> attribute of the <code>polkit</code> object as the rendering context.</p>
<p>After that, the function opens the <code>outfile</code> attribute of the <code>polkit</code> object in write mode and writes the rendered template to the file.</p>
<p>Finally, the function creates a dictionary <code>logdata</code> containing the <code>outfile</code> and <code>args</code> attributes of the <code>polkit</code> object and calls the <code>log</code> function with the string <code>&#x27;D77&#x27;</code> and the <code>logdata</code> dictionary as arguments to log the successful generation of the policy file.</p>
<p>If an exception occurs during the execution of the function, the function creates a dictionary <code>logdata</code> containing the <code>outfile</code> and <code>args</code> attributes of the <code>polkit</code> object and calls the <code>log</code> function with the string <code>&#x27;E44&#x27;</code> and the <code>logdata</code> dictionary as arguments to log the failure of the policy file generation.</p>
<p>The <code>generate</code> function is called by the <code>apply</code> function of the <code>polkit_applier</code> class and the <code>admin_context_apply</code> function of the <code>polkit_applier_user</code> class, which are responsible for triggering the control facility invocation.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>generate</code> function assumes that the <code>infilename</code> attribute of the <code>polkit</code> object is a valid template file name and the <code>outfile</code> attribute of the <code>polkit</code> object is a writable file path.</li>
<li>The <code>generate</code> function does not check if the <code>outfile</code> already exists before writing to it. If the <code>outfile</code> already exists, it will be overwritten.</li>
<li>The <code>generate</code> function logs the successful or failed generation of the policy file using the <code>log</code> function.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<p>Assuming the <code>args</code> attribute of the <code>polkit</code> object is <code>{&#x27;User&#x27;: &#x27;user1&#x27;, &#x27;Action&#x27;: &#x27;action1&#x27;, &#x27;Resource&#x27;: &#x27;resource1&#x27;}</code> and the <code>infilename</code> attribute of the <code>polkit</code> object is <code>&#x27;policy.template&#x27;</code> and the <code>outfile</code> attribute of the <code>polkit</code> object is <code>&#x27;/etc/polkit/policy.d/local.d/my_policy.conf&#x27;</code>, the <code>generate</code> function will render the <code>policy.template</code> file using the <code>args</code> attribute as the rendering context and write the rendered template to <code>/etc/polkit/policy.d/local.d/my_policy.conf</code>. The function will also log the successful generation of the policy file using the <code>log</code> function.</p>
<hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/gpupdate-docs/docs/gpoa/frontend/appliers/netshare"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">netshare</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gpupdate-docs/docs/gpoa/frontend/appliers/systemd"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">systemd</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#classdef-polkit" class="table-of-contents__link toc-highlight">ClassDef polkit</a><ul><li><a href="#functiondef-initself-template_name-arglist-username" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, template_name, arglist, username)</a></li><li><a href="#functiondef-_is_emptyself" class="table-of-contents__link toc-highlight">FunctionDef _is_empty(self)</a></li><li><a href="#functiondef-generateself" class="table-of-contents__link toc-highlight">FunctionDef generate(self)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gpupdate-docs/docs/gpoa/backend/samba_backend">Samba Backend</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 BaseALT LTD, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>