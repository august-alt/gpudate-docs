<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-gpoa/frontend/appliers/envvar" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">envvar | GPUpdate Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://august-alt.github.io/gpupdate-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://august-alt.github.io/gpupdate-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/appliers/envvar"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="envvar | GPUpdate Docs"><meta data-rh="true" name="description" content="ClassDef Envvar"><meta data-rh="true" property="og:description" content="ClassDef Envvar"><link data-rh="true" rel="icon" href="/gpupdate-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/appliers/envvar"><link data-rh="true" rel="alternate" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/appliers/envvar" hreflang="en"><link data-rh="true" rel="alternate" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/appliers/envvar" hreflang="x-default"><link rel="stylesheet" href="/gpupdate-docs/assets/css/styles.d27c289a.css">
<script src="/gpupdate-docs/assets/js/runtime~main.9c9ca5ac.js" defer="defer"></script>
<script src="/gpupdate-docs/assets/js/main.77502ab4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/gpupdate-docs/"><div class="navbar__logo"><img src="/gpupdate-docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/gpupdate-docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">GPUpdate Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/gpupdate-docs/docs/gpoa/backend/applier_backend">gpoa</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/backend/applier_backend">backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/applier_frontend">frontend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/applier_frontend">applier_frontend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/control">appliers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/control">control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/envvar">envvar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/file_cp">file_cp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/firewall_rule">firewall_rule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/folder">folder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/gsettings">gsettings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/ini_file">ini_file</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/netshare">netshare</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/polkit">polkit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/systemd">systemd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/util">util</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/chromium_applier">chromium_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/cifs_applier">cifs_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/control_applier">control_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/cups_applier">cups_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/envvar_applier">envvar_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/file_applier">file_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/firefox_applier">firefox_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/firewall_applier">firewall_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/folder_applier">folder_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/frontend_manager">frontend_manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/gsettings_applier">gsettings_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/ini_applier">ini_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/kde_applier">kde_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/networkshare_applier">networkshare_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/ntp_applier">ntp_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/package_applier">package_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/polkit_applier">polkit_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/scripts_applier">scripts_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/shortcut_applier">shortcut_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/systemd_applier">systemd_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/yandex_browser_applier">yandex_browser_applier</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/gpt/">gpt</a><button aria-label="Expand sidebar category &#x27;gpt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/plugin/">plugin</a><button aria-label="Expand sidebar category &#x27;plugin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/storage/cache">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/test/frontend/appliers/test_controls">test</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/">util</a><button aria-label="Expand sidebar category &#x27;util&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/gpupdate-docs/docs/tools/parsing_chrom_admx_intvalues">tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/gpupdate-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">gpoa</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">frontend</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">appliers</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">envvar</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>envvar</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-envvar">ClassDef Envvar<a href="#classdef-envvar" class="hash-link" aria-label="Direct link to ClassDef Envvar" title="Direct link to ClassDef Envvar">​</a></h2>
<p><strong>Envvar</strong>: The function of Envvar is to manage and update environment variables for a user or root, by reading from and writing to a specified environment file.</p>
<p><strong>attributes</strong>:
· envvars: A list of environment variable objects, each containing a name, value, and action (create, delete, update, or replace).
· username: A string representing the username of the user for whom environment variables are being managed. Defaults to an empty string.
· envvar_file_path: A string representing the file path to the environment file for the specified user.</p>
<p><strong>Code Description</strong>:
The Envvar class has an initializer method that sets the username and envvars attributes, and determines the file path for the environment file based on the username. If the username is &#x27;root&#x27;, the file path is set to &#x27;/etc/gpupdate/environment&#x27;. Otherwise, the file path is set to the user&#x27;s home directory followed by &#x27;.gpupdate_environment&#x27;.</p>
<p>The class also has three methods: _open_envvar_file, _create_action, and _delete_action. The _open_envvar_file method opens the environment file in read-write mode, creating it if it does not exist. The _create_action method creates new environment variables in the file if they do not already exist. The _delete_action method deletes environment variables from the file if they exist.</p>
<p>The act method is the primary method of the class, and performs the following steps:</p>
<ol>
<li>Reads the contents of the environment file into a list of strings.</li>
<li>Iterates through each environment variable object in the envvars list.</li>
<li>Determines the action to be taken based on the action attribute of the environment variable object.</li>
<li>Updates the environment file accordingly, either by creating, deleting, or updating environment variables.</li>
<li>Writes the updated list of strings back to the environment file.</li>
</ol>
<p>The Envvar class is called by the apply method in the EnvvarApplier class and the user_context_apply method in the EnvvarApplierUser class. In both cases, an instance of the Envvar class is created, passing in the envvars list and the username. The act method is then called on the instance, updating the environment file as necessary.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The Envvar class assumes that the environment file exists and is in the correct location. It does not handle errors that may occur if the file is missing or inaccessible.</li>
<li>The Envvar class does not validate the input it receives. It is the responsibility of the calling code to ensure that the envvars list and username attribute are valid.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<p>Assuming the following input:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">envvars </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EnvvarObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;NAME1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;value1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;CREATE&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EnvvarObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;NAME2&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;value2&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;UPDATE&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EnvvarObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;NAME3&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;value3&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;DELETE&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user1&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The Envvar class would update the environment file to contain the following lines:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME1=value1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME2=&quot;value2&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that the second environment variable is surrounded by quotes, as it was updated from a different value. The third environment variable is not present in the file, as it was deleted.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-envvars-username">FunctionDef <strong>init</strong>(self, envvars, username)<a href="#functiondef-initself-envvars-username" class="hash-link" aria-label="Direct link to functiondef-initself-envvars-username" title="Direct link to functiondef-initself-envvars-username">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of the <strong>__init__</strong> method in the Envvar class is to initialize the object&#x27;s attributes with the provided parameters and set the path of the environment file based on the username.</p>
<p><strong>parameters</strong>:</p>
<p>· <strong>envvars</strong>: A dictionary containing environment variables.</p>
<p>· <strong>username</strong> (<em>str</em>, optional): The username for which to retrieve the home directory. The default value is an empty string.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-_open_envvar_fileself">FunctionDef _open_envvar_file(self)<a href="#functiondef-_open_envvar_fileself" class="hash-link" aria-label="Direct link to FunctionDef _open_envvar_file(self)" title="Direct link to FunctionDef _open_envvar_file(self)">​</a></h3>
<p><strong>&#x27;_open_envvar_file</strong>&#x27;: This function is responsible for opening the environment variable file specified by the <code>envvar_file_path</code> attribute of the Envvar class.</p>
<p><strong>parameters</strong>
· <code>self</code>: The instance of the Envvar class. This is a conventional first parameter for instance methods in Python, which allows the method to access and manipulate the data and behavior of the class.</p>
<p><strong>Code Description</strong></p>
<ol>
<li>The function initializes a file descriptor <code>fd</code> to <code>None</code>. This variable will be used to store the file object that results from opening the environment variable file.</li>
<li>It checks if the environment variable file exists using the <code>isfile</code> function.<!-- -->
<ul>
<li>If the file exists, the file is opened in read-write mode using <code>open(self.envvar_file_path, &#x27;r+&#x27;)</code>.</li>
<li>If the file does not exist, the function creates the file by opening it in write mode using <code>open(self.envvar_file_path, &#x27;w&#x27;)</code>, then closes the file and reopens it in read-write mode using <code>open(self.envvar_file_path, &#x27;r+&#x27;)</code>.</li>
</ul>
</li>
<li>The function returns the file object <code>fd</code>.</li>
</ol>
<p><strong>Note</strong></p>
<ul>
<li>The function ensures that the environment variable file is opened in read-write mode, allowing the Envvar class to read and write to the file.</li>
<li>If the environment variable file does not exist, the function creates the file before opening it.</li>
<li>The function closes the file and reopens it in read-write mode to ensure that the file pointer is at the beginning of the file.</li>
</ul>
<p><strong>Output Example</strong>
Assuming <code>self.envvar_file_path</code> is set to <code>&#x27;/path/to/envvar.txt&#x27;</code>, a possible return value of <code>_open_envvar_file</code> is a file object representing the environment variable file <code>&#x27;/path/to/envvar.txt&#x27;</code>. The file object has various attributes and methods that can be used to manipulate the file, such as <code>fd.read()</code> to read the contents of the file, <code>fd.write(&#x27;new_env_var&#x27;)</code> to write a new environment variable to the file, and <code>fd.close()</code> to close the file.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-_create_actionself-create_dict-envvar_file">FunctionDef _create_action(self, create_dict, envvar_file)<a href="#functiondef-_create_actionself-create_dict-envvar_file" class="hash-link" aria-label="Direct link to FunctionDef _create_action(self, create_dict, envvar_file)" title="Direct link to FunctionDef _create_action(self, create_dict, envvar_file)">​</a></h3>
<p><strong>_create_action</strong>: The function of <code>_create_action</code> is to create and add new environment variables to a given file if they do not already exist.</p>
<p><strong>parameters</strong>:
· <code>create_dict</code>: A dictionary containing the names and values of the environment variables to be created. The keys in this dictionary represent the names of the environment variables, and the values correspond to the values of these variables.
· <code>envvar_file</code>: A file object representing the environment variable file where the new variables will be added.</p>
<p><strong>Code Description</strong>:
The function begins by reading all the lines from the <code>envvar_file</code> using the <code>readlines()</code> method and storing them in the <code>lines_old</code> list (line 2). It then initializes an empty list called <code>lines_new</code> (line 3) to store the new lines containing the environment variables that need to be added.</p>
<p>For each name in the <code>create_dict</code>, the function checks if the name already exists in the <code>lines_old</code> list (lines 5-9). If the environment variable is found, the <code>exist</code> variable is set to <code>True</code>, and the function breaks out of the inner loop. If the environment variable does not exist, the function appends a new line containing the name and value of the environment variable to the <code>lines_new</code> list (line 11).</p>
<p>Finally, if there are any new lines to be added (i.e., <code>len(lines_new) &gt; 0</code>), the function writes the <code>lines_new</code> list to the <code>envvar_file</code> using the <code>writelines()</code> method (line 14).</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>create_dict</code> parameter should only contain the names and values of the environment variables that need to be added. If an environment variable already exists in the <code>envvar_file</code>, the function will not modify or overwrite it.</li>
<li>The <code>envvar_file</code> parameter should be an open file object in write mode (&#x27;w&#x27;) or append mode (&#x27;a&#x27;). If the file does not exist, the function will create it when writing the new lines.</li>
<li>The function does not handle any exceptions. Therefore, it is recommended to include error handling code to manage scenarios like a missing or unreadable <code>envvar_file</code> or an invalid <code>create_dict</code>.</li>
<li>The function is case-sensitive when searching for existing environment variables in the <code>envvar_file</code>. Make sure to provide the correct case for the environment variable names in the <code>create_dict</code>.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-_delete_actionself-delete_dict-envvar_file">FunctionDef _delete_action(self, delete_dict, envvar_file)<a href="#functiondef-_delete_actionself-delete_dict-envvar_file" class="hash-link" aria-label="Direct link to FunctionDef _delete_action(self, delete_dict, envvar_file)" title="Direct link to FunctionDef _delete_action(self, delete_dict, envvar_file)">​</a></h3>
<p><strong>_delete_action</strong>: The function of <code>_delete_action</code> is to remove specified variables from a given environment variable file.</p>
<p><strong>parameters</strong>:
· <code>delete_dict</code>: A dictionary containing the names of the environment variables to be deleted. The keys are the names of the variables, and the values are not used in this function.
· <code>envvar_file</code>: A file object representing the environment variable file to be modified.</p>
<p><strong>Code Description</strong>:
The function first reads all the lines from the <code>envvar_file</code> and stores them in the <code>lines</code> list (<code>lines = envvar_file.readlines()</code>). It then iterates over the <code>delete_dict</code> to find and remove the corresponding lines in the <code>lines</code> list. If a line starts with the name of a variable to be deleted (<code>if line.startswith(name + &#x27;=&#x27;)</code>), it removes that line from the list (<code>lines.remove(line)</code>). After processing all the lines, if any variable has been deleted, it writes the remaining lines back to the <code>envvar_file</code> (<code>envvar_file.writelines(lines)</code>).</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The function does not check if the variables provided in the <code>delete_dict</code> actually exist in the <code>envvar_file</code>. If a variable does not exist, the function will simply not remove any lines.</li>
<li>The function does not modify the original <code>envvar_file</code> in-place. Instead, it reads the entire file into memory, processes the lines, and then writes the modified lines back to the file. This means that if the file is very large, this function may consume a significant amount of memory.</li>
<li>The function does not add any error handling or logging. If an error occurs (e.g., if the file cannot be read or written), the function will raise an exception. In a production environment, you may want to add appropriate error handling and logging to make the function more robust.</li>
<li>The function modifies the <code>lines</code> list in-place while iterating over it. This is generally not recommended, as it can lead to unexpected behavior. In this specific case, it works because the <code>remove</code> operation reduces the size of the list, so the iteration does not skip any elements. However, as a best practice, consider creating a new list or using a different data structure (e.g., a set) to store the lines and perform the deletions.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-actself">FunctionDef act(self)<a href="#functiondef-actself" class="hash-link" aria-label="Direct link to FunctionDef act(self)" title="Direct link to FunctionDef act(self)">​</a></h3>
<p><strong>act</strong>: The function of act is to process and write environment variables to a file based on the given envvars and the action to be performed (CREATE, REPLACE, UPDATE, or DELETE).</p>
<p><strong>parameters</strong>:
· self: The Envvar object that calls the method.</p>
<hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/gpupdate-docs/docs/gpoa/frontend/appliers/control"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">control</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gpupdate-docs/docs/gpoa/frontend/appliers/file_cp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">file_cp</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#classdef-envvar" class="table-of-contents__link toc-highlight">ClassDef Envvar</a><ul><li><a href="#functiondef-initself-envvars-username" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, envvars, username)</a></li><li><a href="#functiondef-_open_envvar_fileself" class="table-of-contents__link toc-highlight">FunctionDef _open_envvar_file(self)</a></li><li><a href="#functiondef-_create_actionself-create_dict-envvar_file" class="table-of-contents__link toc-highlight">FunctionDef _create_action(self, create_dict, envvar_file)</a></li><li><a href="#functiondef-_delete_actionself-delete_dict-envvar_file" class="table-of-contents__link toc-highlight">FunctionDef _delete_action(self, delete_dict, envvar_file)</a></li><li><a href="#functiondef-actself" class="table-of-contents__link toc-highlight">FunctionDef act(self)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gpupdate-docs/docs/gpoa/backend/samba_backend">Samba Backend</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 BaseALT LTD, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>