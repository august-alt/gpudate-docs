<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-gpoa/frontend/file_applier" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">file_applier | GPUpdate Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gpupdate-docs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://gpupdate-docs.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://gpupdate-docs.github.io/docs/gpoa/frontend/file_applier"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="file_applier | GPUpdate Docs"><meta data-rh="true" name="description" content="ClassDef file_applier"><meta data-rh="true" property="og:description" content="ClassDef file_applier"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/file_applier"><link data-rh="true" rel="alternate" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/file_applier" hreflang="en"><link data-rh="true" rel="alternate" href="https://gpupdate-docs.github.io/docs/gpoa/frontend/file_applier" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d27c289a.css">
<script src="/assets/js/runtime~main.e7149247.js" defer="defer"></script>
<script src="/assets/js/main.19b81b89.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">GPUpdate Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/gpoa/backend/applier_backend">gpoa</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/backend/applier_backend">backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/gpoa/frontend/applier_frontend">frontend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/applier_frontend">applier_frontend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/frontend/appliers/control">appliers</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/chromium_applier">chromium_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/cifs_applier">cifs_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/control_applier">control_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/cups_applier">cups_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/envvar_applier">envvar_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/gpoa/frontend/file_applier">file_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/firefox_applier">firefox_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/firewall_applier">firewall_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/folder_applier">folder_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/frontend_manager">frontend_manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/gsettings_applier">gsettings_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/ini_applier">ini_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/kde_applier">kde_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/networkshare_applier">networkshare_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/ntp_applier">ntp_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/package_applier">package_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/polkit_applier">polkit_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/scripts_applier">scripts_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/shortcut_applier">shortcut_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/systemd_applier">systemd_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gpoa/frontend/yandex_browser_applier">yandex_browser_applier</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/gpt/">gpt</a><button aria-label="Expand sidebar category &#x27;gpt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/plugin/">plugin</a><button aria-label="Expand sidebar category &#x27;plugin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/storage/cache">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/gpoa/test/frontend/appliers/test_controls">test</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/gpoa/util/">util</a><button aria-label="Expand sidebar category &#x27;util&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tools/parsing_chrom_admx_intvalues">tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">gpoa</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">frontend</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">file_applier</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>file_applier</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-file_applier">ClassDef file_applier<a href="#classdef-file_applier" class="hash-link" aria-label="Direct link to ClassDef file_applier" title="Direct link to ClassDef file_applier">​</a></h2>
<p><strong>file_applier</strong>: The function of the <code>file_applier</code> class is to handle file-related operations in the gpoa project. It is a subclass of <code>applier_frontend</code> and provides specific implementation for file-related policy application.</p>
<p><strong>Attributes</strong>:</p>
<ul>
<li><code>storage</code>: An instance of the storage class, which is used to interact with the Windows Registry and other storage mechanisms.</li>
<li><code>file_cache</code>: A file cache object used for storing files temporarily.</li>
<li><code>sid</code>: The security identifier (SID) of the user or machine for which policies are being applied.</li>
<li><code>files</code>: A list of files to be applied, initialized in the constructor by calling <code>self.storage.get_files(self.sid)</code>.</li>
<li><code>__module_name</code>: The name of the module, set to &#x27;FilesApplier&#x27;.</li>
<li><code>__module_experimental</code>: A flag indicating if the module is experimental, set to True.</li>
<li><code>__module_enabled</code>: A flag indicating if the module is enabled, initialized in the constructor by calling <code>check_enabled(self.storage, self.__module_name, self.__module_experimental)</code>.</li>
</ul>
<p><strong>Code Description</strong>:
The <code>file_applier</code> class is a subclass of <code>applier_frontend</code> and provides specific implementation for file-related policy application. The constructor initializes the <code>storage</code>, <code>exe_check</code>, <code>sid</code>, <code>file_cache</code>, and <code>files</code> attributes. It also sets the <code>__module_enabled</code> attribute based on the result of a call to <code>check_enabled()</code>.</p>
<p>The <code>run()</code> method iterates through the <code>files</code> list and calls <code>Files_cp(file, self.file_cache, self.exe_check)</code> for each file, which is responsible for copying the file to the file cache and performing execution checks.</p>
<p>The <code>apply()</code> method checks if the module is enabled by evaluating <code>self.__module_enabled</code>. If it is enabled, the <code>run()</code> method is called to apply the policies. Otherwise, a log message &#x27;D168&#x27; is generated.</p>
<p><strong>Note</strong>:
The <code>file_applier</code> class is intended to be used as a part of the gpoa project for handling file-related policy application. It is a subclass of <code>applier_frontend</code> and provides specific implementation for file-related policy application. When using this class, ensure that the required attributes are properly initialized and that the class is used within the context of the gpoa project.</p>
<p>The <code>file_applier</code> class is instantiated and added to the <code>machine_appliers</code> dictionary in the <code>_init_machine_appliers</code> method of the <code>frontend_manager</code> class. This allows the gpoa application to manage and apply policies for files using the <code>file_applier</code> class.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-storage-file_cache-sid">FunctionDef <strong>init</strong>(self, storage, file_cache, sid)<a href="#functiondef-initself-storage-file_cache-sid" class="hash-link" aria-label="Direct link to functiondef-initself-storage-file_cache-sid" title="Direct link to functiondef-initself-storage-file_cache-sid">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong><strong>init</strong></strong> is to initialize the file applier object with the necessary parameters and attributes.</p>
<p><strong>parameters</strong>:
· <code>storage</code>: An object that provides access to the storage where the files are located.
· <code>file_cache</code>: An object that provides access to the file cache.
· <code>sid</code>: A security identifier (SID) that is used to filter the files based on their SID.</p>
<p><strong>Code Description</strong>:
The <strong><strong>init</strong></strong> function initializes the file applier object by setting the <code>storage</code>, <code>file_cache</code>, and <code>sid</code> attributes. It then retrieves the list of files associated with the given SID using the <code>get_files</code> method of the <code>storage</code> object. The function also initializes an <code>Execution_check</code> object using the <code>storage</code> object to check the execution status of files in the storage.</p>
<p>The <code>__module_enabled</code> attribute is set to the result of the <code>check_enabled</code> function, which checks if the module is enabled or not based on the storage and the name of the module. The <code>check_enabled</code> function is defined in the <code>applier_frontend.py</code> module and takes three parameters: <code>storage</code>, <code>module_name</code>, and <code>module_experimental</code>.</p>
<p>The <code>__module_name</code> and <code>__module_experimental</code> attributes are not defined in the <code>__init__</code> function, but they are used in the <code>check_enabled</code> function. Therefore, it is assumed that they are defined elsewhere in the <code>file_applier</code> class.</p>
<p>The <code>__init__</code> function is called when a new <code>file_applier</code> object is created. It is used to set up the necessary attributes and objects required for the file applier to function properly.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>storage</code> parameter should be a valid storage object that provides access to the storage where the files are located.</li>
<li>The <code>file_cache</code> parameter should be a valid file cache object that provides access to the file cache.</li>
<li>The <code>sid</code> parameter should be a valid SID in the format of S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-xxxxxxxxxx-xxxx.</li>
<li>The <code>Execution_check</code> object is initialized with the <code>storage</code> object to check the execution status of files in the storage.</li>
<li>The <code>check_enabled</code> function is used to check if the module is enabled or not based on the storage and the name of the module. The <code>__module_name</code> and <code>__module_experimental</code> attributes are used in this function.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-runself">FunctionDef run(self)<a href="#functiondef-runself" class="hash-link" aria-label="Direct link to FunctionDef run(self)" title="Direct link to FunctionDef run(self)">​</a></h3>
<p><strong>run</strong>: The function of run is to apply the file actions for each file in the files list.</p>
<p><strong>parameters</strong>:
· None, this function does not take any parameters.</p>
<p><strong>Code Description</strong>:
The <code>run</code> function is a method of the <code>file_applier</code> class, which is used to apply the file actions for each file in the <code>files</code> list. It iterates through the <code>files</code> list and for each file, it creates an instance of the <code>Files_cp</code> class, passing the file object, file cache, and executable check objects as parameters. This will perform the necessary file actions (copy, update, delete, or replace) based on the provided parameters.</p>
<p>The <code>Files_cp</code> class is defined in the <code>file_cp.py</code> module and it is responsible for performing the file actions. It uses the <code>file_obj</code> parameter to get the necessary information about the file, such as the target path, source path, and action to be performed. The <code>file_cache</code> parameter is used for caching files, and the <code>exe_check</code> parameter is used for checking executable files. The <code>username</code> parameter is optional and should only be used if file ownership change is required.</p>
<p>The <code>run</code> function should be used in conjunction with the <code>file_applier</code> class, which provides the necessary file objects for the <code>Files_cp</code> class to perform actions on.</p>
<p><strong>Note</strong>:
· The <code>Files_cp</code> class should be used in conjunction with the <code>file_applier</code> class, which provides the necessary file objects for the <code>Files_cp</code> class to perform actions on.
· The <code>run</code> function does not take any parameters, it uses the <code>files</code> list that is defined in the <code>file_applier</code> class.
· The <code>username</code> parameter in the <code>Files_cp</code> class is optional and should only be used if file ownership change is required.</p>
<p><strong>Relation with other parts of the project</strong>:
The <code>run</code> function is called in the <code>apply</code> function of the <code>file_applier</code> class, which is responsible for applying the file actions. The <code>apply</code> function checks if the module is enabled, and if it is, it calls the <code>run</code> function to apply the file actions.</p>
<p>The <code>Files_cp</code> class is defined in the <code>file_cp.py</code> module, which is imported in the <code>file_applier.py</code> module. The <code>Files_cp</code> class is used in the <code>run</code> function to perform the necessary file actions.</p>
<p>The <code>file_applier</code> class is defined in the <code>file_applier.py</code> module, which contains the <code>apply</code> function that calls the <code>run</code> function. The <code>file_applier</code> class provides the necessary file objects for the <code>Files_cp</code> class to perform actions on.</p>
<p>The <code>file_cache</code> and <code>exe_check</code> objects are used in the <code>Files_cp</code> class, they are provided by the <code>file_applier</code> class.</p>
<p>The <code>files</code> list is defined in the <code>file_applier</code> class, it is used in the <code>run</code> function to iterate through the files and perform the necessary file actions.</p>
<p>The <code>run</code> function is called in the <code>apply</code> function of the <code>file_applier</code> class, it is responsible for applying the file actions. The <code>Files_cp</code> class is used in the <code>run</code> function to perform the necessary file actions. The <code>file_cache</code> and <code>exe_check</code> objects are used in the <code>Files_cp</code> class, they are provided by the <code>file_applier</code> class. The <code>files</code> list is defined in the <code>file_applier</code> class, it is used in the <code>run</code> function to iterate through the files and perform the necessary file actions.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-applyself">FunctionDef apply(self)<a href="#functiondef-applyself" class="hash-link" aria-label="Direct link to FunctionDef apply(self)" title="Direct link to FunctionDef apply(self)">​</a></h3>
<p><strong>apply</strong>: The function of apply is to execute the file actions for each file in the <code>files</code> list if the module is enabled.</p>
<p><strong>parameters</strong>: The function does not take any parameters.</p>
<p><strong>Code Description</strong>:
The <code>apply</code> function is a method of the <code>file_applier</code> class, which is used to execute the file actions for each file in the <code>files</code> list if the module is enabled. It first checks if the module is enabled using the <code>__module_enabled</code> attribute. If the module is enabled, it logs a message with code &#x27;D167&#x27; using the <code>log</code> function and then calls the <code>run</code> function to execute the file actions. If the module is not enabled, it logs a message with code &#x27;D168&#x27; using the <code>log</code> function.</p>
<p>The <code>run</code> function is defined in the same class and is responsible for creating an instance of the <code>Files_cp</code> class for each file in the <code>files</code> list, passing the file object, file cache, and executable check objects as parameters. The <code>Files_cp</code> class is defined in the <code>file_cp.py</code> module and is responsible for performing the necessary file actions (copy, update, delete, or replace) based on the provided parameters.</p>
<p>The <code>log</code> function is defined in the <code>logging.py</code> module and is used to log messages with a specific message code. It determines the log level based on the first character of the message code and logs the message accordingly.</p>
<p>The <code>__module_enabled</code> attribute is a boolean value that indicates whether the module is enabled or not. It is set in the constructor of the <code>file_applier</code> class.</p>
<p>The <code>files</code> list is a list of file objects that need to have file actions executed on them. It is defined in the constructor of the <code>file_applier</code> class.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>apply</code> function should only be used to execute file actions if the module is enabled.</li>
<li>The <code>run</code> function is responsible for creating an instance of the <code>Files_cp</code> class for each file in the <code>files</code> list and executing the necessary file actions.</li>
<li>The <code>log</code> function is used to log messages with a specific message code.</li>
<li>The <code>__module_enabled</code> attribute is a boolean value that indicates whether the module is enabled or not.</li>
<li>The <code>files</code> list is a list of file objects that need to have file actions executed on them.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-file_applier_user">ClassDef file_applier_user<a href="#classdef-file_applier_user" class="hash-link" aria-label="Direct link to ClassDef file_applier_user" title="Direct link to ClassDef file_applier_user">​</a></h2>
<p><strong>file_applier_user</strong>: The function of file_applier_user is to apply policies related to files for a specific user in the gpoa project.</p>
<p><strong>attributes</strong>:
· storage: An instance of the storage class, which is used to interact with the Windows Registry and other storage mechanisms.
· file_cache: An instance of the file_cache class, which is used to cache files that are being applied.
· sid: The security identifier (SID) of the user or machine for which policies are being applied.
· username: The username for which policies are being applied.
· exe_check: An instance of the Execution_check class, which is used to check whether a file can be executed.
· files: A list of files that need to be applied for the user.
· __module_name: The name of the module, which is &#x27;FilesApplierUser&#x27;.
· __module_experimental: A boolean value indicating whether the module is experimental or not, which is True.
· __module_enabled: A boolean value indicating whether the module is enabled or not, which is determined by the check_enabled() method.</p>
<p><strong>Code Description</strong>:
The file_applier_user class is a subclass of applier_frontend class and is used to apply policies related to files for a specific user. It inherits the attributes and methods from the applier_frontend class and adds some additional attributes and methods to provide the actual policy application logic for files.</p>
<p>The __init__() method initializes the storage, file_cache, sid, username, exe_check attributes, and sets the __module_enabled attribute based on the result of a call to check_enabled() method. The check_enabled() method checks whether the current module is enabled in the gpoa configuration, and returns True if it is, and False otherwise.</p>
<p>The run() method applies the files for the user by calling the Files_cp() method for each file in the files list.</p>
<p>The admin_context_apply() method is intended to be called in the admin context, it checks whether the module is enabled or not, if it is enabled, it calls the run() method to apply the files for the user, otherwise, it does nothing.</p>
<p>The user_context_apply() method is intended to be called in the user context, but it doesn&#x27;t have any implementation in this class, so it does nothing.</p>
<p>The __module_name__, __module_experimental__, and __module_enabled__ attributes are used by the gpoa application to determine whether the current module should be loaded and applied.</p>
<p>The file_applier_user class is used by the frontend_manager class to apply policies related to files for a specific user. It is instantiated with the storage, file_cache, sid, and username parameters and added to the user_appliers dictionary with the key &#x27;files&#x27; in the _init_user_appliers() method of the frontend_manager class.</p>
<p><strong>Note</strong>:
The file_applier_user class is intended to be used in the gpoa project to apply policies related to files for a specific user. Subclasses should not override the user_context_apply() and admin_context_apply() methods, but they can override the run() method to provide the actual policy application logic for files. Subclasses should also set the __module_name__, __module_experimental__, and __module_enabled__ attributes appropriately.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-storage-file_cache-sid-username">FunctionDef <strong>init</strong>(self, storage, file_cache, sid, username)<a href="#functiondef-initself-storage-file_cache-sid-username" class="hash-link" aria-label="Direct link to functiondef-initself-storage-file_cache-sid-username" title="Direct link to functiondef-initself-storage-file_cache-sid-username">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong><strong>init</strong></strong> is to initialize the file_applier_user object with the necessary parameters and attributes.</p>
<p><strong>parameters</strong>:
· storage: The storage object that contains the information about the files.
· file_cache: The file cache object that contains the information about the cached files.
· sid: The security identifier (SID) to be used for filtering the files in the storage.
· username: The username to be used for filtering the files in the storage.</p>
<p><strong>Code Description</strong>:
The <strong><strong>init</strong></strong> function initializes the file_applier_user object by setting the values of the storage, file_cache, sid, and username parameters to the corresponding instance variables. It also initializes the exe_check instance variable by creating an Execution_check object with the storage parameter.</p>
<p>Furthermore, the function retrieves the list of files associated with the given SID by calling the get_files method of the storage object and assigns the result to the files instance variable.</p>
<p>Additionally, the function calls the check_enabled function with the storage, module_name, and module_experimental parameters to determine whether the module is enabled or not. The result is assigned to the <strong>__module_enabled</strong> instance variable.</p>
<p>The <strong><strong>init</strong></strong> function is called when a new file_applier_user object is created. It initializes the object with the necessary parameters and attributes, and prepares it for further use in the application.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <strong>sid</strong> parameter should be a valid SID in the format of S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-xxxxxxxxxx-xxxx.</li>
<li>The <strong>check_enabled</strong> function is defined in the applier_frontend module and is used to determine whether the module is enabled or not based on the storage and the name of the module.</li>
<li>The <strong>Execution_check</strong> class is defined in the file_cp module and is used to check the execution status of files in the storage based on marker keys in the Windows registry.</li>
<li>The <strong>get_files</strong> function is defined in the sqlite_registry module and is used to retrieve a list of file_entry objects from the database based on a given SID.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-runself-1">FunctionDef run(self)<a href="#functiondef-runself-1" class="hash-link" aria-label="Direct link to FunctionDef run(self)" title="Direct link to FunctionDef run(self)">​</a></h3>
<p><strong>run</strong>: The function of run is to iterate through a list of files and apply the file operations (copy, update, delete, or replace) using the Files_cp class for each file.</p>
<p><strong>parameters</strong>:
· self: The instance of the file_applier_user class.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-admin_context_applyself">FunctionDef admin_context_apply(self)<a href="#functiondef-admin_context_applyself" class="hash-link" aria-label="Direct link to FunctionDef admin_context_apply(self)" title="Direct link to FunctionDef admin_context_apply(self)">​</a></h3>
<p><strong>admin_context_apply</strong>: The function of admin_context_apply is to execute the run method if the module is enabled, or log a message indicating that the module is not enabled.</p>
<p><strong>parameters</strong>:</p>
<p>· self: The instance of the file_applier_user class.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-user_context_applyself">FunctionDef user_context_apply(self)<a href="#functiondef-user_context_applyself" class="hash-link" aria-label="Direct link to FunctionDef user_context_apply(self)" title="Direct link to FunctionDef user_context_apply(self)">​</a></h3>
<p><strong>user_context_apply</strong>: The function of user_context_apply is to apply user context.</p>
<p><strong>parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>:</p>
<p>The user_context_apply function is a method of the file_applier_user class, defined in the file_applier.py module. This function does not contain any code implementation, as indicated by the &quot;pass&quot; statement. It is likely that this function is intended to serve as a placeholder for future implementation.</p>
<p>When called, the function will not perform any actions. However, since it is a part of the file_applier_user class, it is likely that it will be used to apply user context as a part of the file application process.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>This function does not contain any implementation, so it will not perform any actions when called.</li>
<li>The function is a part of the file_applier_user class, which suggests that it will be used to apply user context as a part of the file application process.</li>
<li>Developers should add the necessary code implementation to this function to enable it to perform the intended action of applying user context.</li>
</ul>
<hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/gpoa/frontend/envvar_applier"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">envvar_applier</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/gpoa/frontend/firefox_applier"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">firefox_applier</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#classdef-file_applier" class="table-of-contents__link toc-highlight">ClassDef file_applier</a><ul><li><a href="#functiondef-initself-storage-file_cache-sid" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, storage, file_cache, sid)</a></li><li><a href="#functiondef-runself" class="table-of-contents__link toc-highlight">FunctionDef run(self)</a></li><li><a href="#functiondef-applyself" class="table-of-contents__link toc-highlight">FunctionDef apply(self)</a></li></ul></li><li><a href="#classdef-file_applier_user" class="table-of-contents__link toc-highlight">ClassDef file_applier_user</a><ul><li><a href="#functiondef-initself-storage-file_cache-sid-username" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, storage, file_cache, sid, username)</a></li><li><a href="#functiondef-runself-1" class="table-of-contents__link toc-highlight">FunctionDef run(self)</a></li><li><a href="#functiondef-admin_context_applyself" class="table-of-contents__link toc-highlight">FunctionDef admin_context_apply(self)</a></li><li><a href="#functiondef-user_context_applyself" class="table-of-contents__link toc-highlight">FunctionDef user_context_apply(self)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/gpoa/backend/samba_backend">Samba Backend</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 BaseALT LTD, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>