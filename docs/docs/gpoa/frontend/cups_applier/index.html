<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-gpoa/frontend/cups_applier" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">cups_applier | GPUpdate Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://august-alt.github.io/gpupdate-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://august-alt.github.io/gpupdate-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/cups_applier"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="cups_applier | GPUpdate Docs"><meta data-rh="true" name="description" content="FunctionDef storagegetprinters(storage, sid)"><meta data-rh="true" property="og:description" content="FunctionDef storagegetprinters(storage, sid)"><link data-rh="true" rel="icon" href="/gpupdate-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/cups_applier"><link data-rh="true" rel="alternate" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/cups_applier" hreflang="en"><link data-rh="true" rel="alternate" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/frontend/cups_applier" hreflang="x-default"><link rel="stylesheet" href="/gpupdate-docs/assets/css/styles.d27c289a.css">
<script src="/gpupdate-docs/assets/js/runtime~main.9c9ca5ac.js" defer="defer"></script>
<script src="/gpupdate-docs/assets/js/main.77502ab4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/gpupdate-docs/"><div class="navbar__logo"><img src="/gpupdate-docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/gpupdate-docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">GPUpdate Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/gpupdate-docs/docs/gpoa/backend/applier_backend">gpoa</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/backend/applier_backend">backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/applier_frontend">frontend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/applier_frontend">applier_frontend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/appliers/control">appliers</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/chromium_applier">chromium_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/cifs_applier">cifs_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/control_applier">control_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/cups_applier">cups_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/envvar_applier">envvar_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/file_applier">file_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/firefox_applier">firefox_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/firewall_applier">firewall_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/folder_applier">folder_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/frontend_manager">frontend_manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/gsettings_applier">gsettings_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/ini_applier">ini_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/kde_applier">kde_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/networkshare_applier">networkshare_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/ntp_applier">ntp_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/package_applier">package_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/polkit_applier">polkit_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/scripts_applier">scripts_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/shortcut_applier">shortcut_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/systemd_applier">systemd_applier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/yandex_browser_applier">yandex_browser_applier</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/gpt/">gpt</a><button aria-label="Expand sidebar category &#x27;gpt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/plugin/">plugin</a><button aria-label="Expand sidebar category &#x27;plugin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/storage/cache">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/test/frontend/appliers/test_controls">test</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/">util</a><button aria-label="Expand sidebar category &#x27;util&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/gpupdate-docs/docs/tools/parsing_chrom_admx_intvalues">tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/gpupdate-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">gpoa</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">frontend</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">cups_applier</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>cups_applier</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-storage_get_printersstorage-sid">FunctionDef storage_get_printers(storage, sid)<a href="#functiondef-storage_get_printersstorage-sid" class="hash-link" aria-label="Direct link to FunctionDef storage_get_printers(storage, sid)" title="Direct link to FunctionDef storage_get_printers(storage, sid)">​</a></h2>
<p><strong>storage_get_printers</strong>: The function of <code>storage_get_printers</code> is to query printer configurations from the storage. It takes a <code>storage</code> object and a <code>sid</code> as arguments and returns a list of <code>printer_entry</code> objects associated with the given <code>sid</code> from the storage.</p>
<p><strong>parameters</strong>:
· <code>storage</code>: The storage object that contains the printer configurations.
· <code>sid</code>: The Security Identifier (SID) to be used for filtering the <code>printer_entry</code> objects in the storage.</p>
<p><strong>Code Description</strong>:
The <code>storage_get_printers</code> function is called in the <code>run</code> method of both <code>cups_applier</code> and <code>cups_applier_user</code> classes in the <code>cups_applier.py</code> module. It is responsible for retrieving the printer configurations associated with a given SID from the storage.</p>
<p>The function first initializes an empty list <code>printers</code> to store the <code>printer_entry</code> objects. It then calls the <code>get_printers</code> method of the <code>sqlite_registry</code> class, which is a method of the <code>storage</code> object, and passes the <code>sid</code> as an argument. The <code>get_printers</code> method returns a list of <code>printer_entry</code> objects associated with the given SID, which is then appended to the <code>printers</code> list.</p>
<p>Finally, the <code>printers</code> list is returned, which contains the <code>printer_entry</code> objects associated with the given SID.</p>
<p><strong>Note</strong>:
The <code>storage_get_printers</code> function is called with a <code>storage</code> object and a <code>sid</code> as arguments. The <code>storage</code> object should be an instance of the <code>sqlite_registry</code> class, and the <code>sid</code> should be a valid SID in the format of S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-xxxxxxxxxx-xxxx.</p>
<p>Additionally, the <code>storage_get_printers</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-connect_printerconnection-prn">FunctionDef connect_printer(connection, prn)<a href="#functiondef-connect_printerconnection-prn" class="hash-link" aria-label="Direct link to FunctionDef connect_printer(connection, prn)" title="Direct link to FunctionDef connect_printer(connection, prn)">​</a></h2>
<p><strong>connect_printer</strong>: The function of connect_printer is to configure and add a printer to the CUPS (Common Unix Printing System) printing system.</p>
<p><strong>parameters</strong>:
· connection: The cups.Connection object, which is the connection to the CUPS server.
· prn: The printer object, which contains the printer&#x27;s information.</p>
<p><strong>Code Description</strong>:
The function first sets the printer driver to &#x27;generic&#x27;, then it extracts the printer&#x27;s name, information, and URI from the &#x27;prn&#x27; object. The printer&#x27;s URI is converted to the format that CUPS accepts. Finally, it calls the &#x27;addPrinter&#x27; method of the &#x27;connection&#x27; object to add the printer to the CUPS system.</p>
<p>This function is used in the &#x27;run&#x27; method of the &#x27;cups_applier&#x27; and &#x27;cups_applier_user&#x27; objects in the &#x27;gpoa/frontend/cups_applier.py&#x27; module. These objects are responsible for applying and managing printer configurations in the CUPS printing system. The &#x27;connect_printer&#x27; function is called in a loop to add all the printers that are retrieved from the storage.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The &#x27;connection&#x27; parameter should be a valid cups.Connection object, otherwise, it will raise an exception when calling the &#x27;addPrinter&#x27; method.</li>
<li>The &#x27;prn&#x27; parameter should be a printer object that contains the necessary information to add a printer to the CUPS system.</li>
<li>The &#x27;addPrinter&#x27; method may raise an exception if the printer with the same name already exists or if there is an error in the printer&#x27;s information. It is recommended to handle the exception in the caller function.</li>
<li>The &#x27;filename&#x27; parameter in the &#x27;addPrinter&#x27; method is optional, if not provided, CUPS will use the default PPD file for the printer driver.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-cups_applier">ClassDef cups_applier<a href="#classdef-cups_applier" class="hash-link" aria-label="Direct link to ClassDef cups_applier" title="Direct link to ClassDef cups_applier">​</a></h2>
<p><strong>cups_applier</strong>: The <code>cups_applier</code> class is responsible for configuring printers that are assigned to a computer in the gpoa project. It is a subclass of <code>applier_frontend</code>, which provides a base class for all frontend modules that apply policies.</p>
<p><strong>Attributes</strong>:</p>
<ul>
<li><code>storage</code>: An instance of the <code>storage</code> class, which is used to interact with the Windows Registry and other storage mechanisms.</li>
</ul>
<p><strong>Code Description</strong>:</p>
<p>The <code>__init__()</code> method initializes the <code>storage</code> attribute and sets the <code>__module_enabled__</code> attribute based on the result of a call to <code>check_enabled()</code>. The <code>check_enabled()</code> method checks whether the current module is enabled in the gpoa configuration, and returns <code>True</code> if it is, and <code>False</code> otherwise.</p>
<p>The <code>run()</code> method is responsible for configuring the printers that are assigned to a computer. It first checks if the <code>cups</code> RPM package is installed, and if not, it logs a warning message (W9) and returns. If the package is installed, it then tries to create a connection to the CUPS server using the <code>cups.Connection()</code> class. If an exception is raised during this process, it logs the exception details (W20). The method then retrieves the list of printers assigned to the computer from the storage using the <code>storage_get_printers()</code> function and the machine&#x27;s SID. If there are any printers in the list, it iterates through each printer and connects it to the CUPS server using the <code>connect_printer()</code> function.</p>
<p>The <code>apply()</code> method checks if the current module is enabled and if so, it calls the <code>run()</code> method to configure the printers. If the module is not enabled, it logs a message (D114).</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>cups_applier</code> class is intended to be used as a subclass of <code>applier_frontend</code> and should not be instantiated directly.</li>
<li>The <code>run()</code> method assumes that the <code>cups</code> RPM package is installed on the system. If it is not installed, a warning message will be logged and the method will return.</li>
<li>The <code>cups_applier</code> class is used by the <code>frontend_manager</code> class to configure printers on a computer.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<p>The <code>cups_applier</code> class may return the following output when configuring printers:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">D113</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This indicates that the <code>cups_applier</code> module is enabled and the <code>run()</code> method has been called to configure the printers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-storage">FunctionDef <strong>init</strong>(self, storage)<a href="#functiondef-initself-storage" class="hash-link" aria-label="Direct link to functiondef-initself-storage" title="Direct link to functiondef-initself-storage">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong>init</strong> is to initialize the cups_applier object with a storage object.</p>
<p><strong>parameters</strong>:
· storage: The storage object that contains the information about the modules.</p>
<p><strong>Code Description</strong>:
The function takes in a storage object as a parameter, which is used to check if a module is enabled or not based on its name. It sets the storage object as an attribute of the cups_applier object, allowing it to be accessed by other methods within the object.</p>
<p>The function calls the <code>check_enabled</code> function, which is located in the <code>applier_frontend.py</code> module, passing in the storage object, the name of the module, and a boolean value indicating whether the module is experimental or not. The <code>check_enabled</code> function checks if the module is enabled or not based on the storage and the name of the module, and returns a boolean value. This value is then used to determine if the module should be applied or not.</p>
<p>The <code>__init__</code> function is called when a new cups_applier object is created, ensuring that the storage object is properly initialized and available for use by other methods within the object.</p>
<p><strong>Note</strong>:
It is important to ensure that the storage object passed to the <code>__init__</code> function is properly initialized and contains the necessary information about the modules. If the storage object is not properly initialized, the <code>check_enabled</code> function may not be able to accurately determine if a module is enabled or not, leading to unexpected results.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-runself">FunctionDef run(self)<a href="#functiondef-runself" class="hash-link" aria-label="Direct link to FunctionDef run(self)" title="Direct link to FunctionDef run(self)">​</a></h3>
<p><strong>run</strong>: The function of run is to apply printer configurations to the CUPS printing system if the module is enabled.</p>
<p><strong>parameters</strong>:
· self: The cups_applier object that contains the necessary information to apply printer configurations.</p>
<p><strong>Code Description</strong>:
The run function first checks if the module is enabled by calling the <code>__module_enabled</code> attribute. If the module is enabled, it logs a debug message &#x27;D113&#x27; and calls the <code>run</code> method to apply the printer configurations. If the module is not enabled, it logs a debug message &#x27;D114&#x27;.</p>
<p>The <code>run</code> method is responsible for connecting to the CUPS server, getting the list of printers from the storage, and applying the printer configurations. It first checks if the RPM package &#x27;cups&#x27; is installed. If the package is not installed, it logs a warning message &#x27;W9&#x27; and returns. If the package is installed, it creates a connection to the CUPS server using the <code>cups.Connection()</code> method. If there is an exception while creating the connection, it logs the exception details and returns.</p>
<p>The function then gets the list of printers from the storage by calling the <code>storage_get_printers</code> method and passing the <code>storage</code> and <code>machine_sid</code> as arguments. If there are any printers, it loops through each printer and calls the <code>connect_printer</code> method to connect to the printer and apply the configuration.</p>
<p>The <code>connect_printer</code> method takes the <code>cups_connection</code> and <code>prn</code> as arguments and sets the printer driver to &#x27;generic&#x27;. It then extracts the printer&#x27;s name, information, and URI from the <code>prn</code> object. The printer&#x27;s URI is converted to the format that CUPS accepts. Finally, it calls the <code>addPrinter</code> method of the <code>cups_connection</code> object to add the printer to the CUPS system.</p>
<p>This function is used in the <code>apply</code> method of the <code>cups_applier</code> object in the <code>gpoa/frontend/cups_applier.py</code> module. The <code>apply</code> method is responsible for performing the configuration of the printer that is assigned to the computer.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>cups_applier</code> object should be a valid object that contains the necessary information to apply printer configurations.</li>
<li>The <code>storage</code> object should be a valid object that contains the necessary printer information.</li>
<li>The <code>machine_sid</code> should be a valid SID in the format of S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-xxxxxxxxxx-xxxx.</li>
<li>The <code>cups.Connection()</code> method may raise an exception if there is an error in creating the connection to the CUPS server. It is recommended to handle the exception in the caller function.</li>
<li>The <code>addPrinter</code> method may raise an exception if the printer with the same name already exists or if there is an error in the printer&#x27;s information. It is recommended to handle the exception in the caller function.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Example usage of cups_applier object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cups_applier </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cups_applier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cups_applier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, the <code>cups_applier</code> object is created and the <code>run</code> method is called to apply the printer configurations to the CUPS printing system.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-applyself">FunctionDef apply(self)<a href="#functiondef-applyself" class="hash-link" aria-label="Direct link to FunctionDef apply(self)" title="Direct link to FunctionDef apply(self)">​</a></h3>
<p><strong>apply</strong>: The function of apply is to perform configuration of printer which is assigned to computer.</p>
<p><strong>parameters</strong>:
· self: The cups_applier object that contains the necessary information to apply printer configurations.</p>
<p><strong>Code Description</strong>:
The apply function is a method of the cups_applier class that performs configuration of printer which is assigned to computer. It first checks if the module is enabled by calling the <code>__module_enabled</code> attribute. If the module is enabled, it logs a debug message &#x27;D113&#x27; and calls the <code>run</code> method to apply the printer configurations. If the module is not enabled, it logs a debug message &#x27;D114&#x27;.</p>
<p>The <code>run</code> method is responsible for connecting to the CUPS server, getting the list of printers from the storage, and applying the printer configurations. It first checks if the RPM package &#x27;cups&#x27; is installed. If the package is not installed, it logs a warning message &#x27;W9&#x27; and returns. If the package is installed, it creates a connection to the CUPS server using the <code>cups.Connection()</code> method. If there is an exception while creating the connection, it logs the exception details and returns.</p>
<p>The function then gets the list of printers from the storage by calling the <code>storage_get_printers</code> method and passing the <code>storage</code> and <code>machine_sid</code> as arguments. If there are any printers, it loops through each printer and calls the <code>connect_printer</code> method to connect to the printer and apply the configuration.</p>
<p>The <code>connect_printer</code> method takes the <code>cups_connection</code> and <code>prn</code> as arguments and sets the printer driver to &#x27;generic&#x27;. It then extracts the printer&#x27;s name, information, and URI from the <code>prn</code> object. The printer&#x27;s URI is converted to the format that CUPS accepts. Finally, it calls the <code>addPrinter</code> method of the <code>cups_connection</code> object to add the printer to the CUPS system.</p>
<p>The <code>cups.Connection()</code> method may raise an exception if there is an error in creating the connection to the CUPS server. It is recommended to handle the exception in the caller function. The <code>addPrinter</code> method may raise an exception if the printer with the same name already exists or if there is an error in the printer&#x27;s information. It is recommended to handle the exception in the caller function.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>cups_applier</code> object should be a valid object that contains the necessary information to apply printer configurations.</li>
<li>The <code>storage</code> object should be a valid object that contains the necessary printer information.</li>
<li>The <code>machine_sid</code> should be a valid SID in the format of S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-xxxxxxxxxx-xxxx.</li>
<li>The <code>cups.Connection()</code> method may raise an exception if there is an error in creating the connection to the CUPS server. It is recommended to handle the exception in the caller function.</li>
<li>The <code>addPrinter</code> method may raise an exception if the printer with the same name already exists or if there is an error in the printer&#x27;s information. It is recommended to handle the exception in the caller function.</li>
</ul>
<p><strong>Relation to other functions</strong>:</p>
<ul>
<li>The <code>apply</code> function calls the <code>run</code> method of the <code>cups_applier</code> object to apply the printer configurations.</li>
<li>The <code>run</code> method creates a connection to the CUPS server using the <code>cups.Connection()</code> method.</li>
<li>The <code>run</code> method gets the list of printers from the storage by calling the <code>storage_get_printers</code> method.</li>
<li>The <code>run</code> method loops through each printer and calls the <code>connect_printer</code> method to connect to the printer and apply the configuration.</li>
<li>The <code>connect_printer</code> method sets the printer driver to &#x27;generic&#x27; and extracts the printer&#x27;s name, information, and URI from the <code>prn</code> object.</li>
<li>The <code>connect_printer</code> method calls the <code>addPrinter</code> method of the <code>cups_connection</code> object to add the printer to the CUPS system.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Example usage of cups_applier object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cups_applier </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cups_applier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cups_applier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, the <code>cups_applier</code> object is created and the <code>apply</code> method is called to apply the printer configurations to the CUPS printing system.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-cups_applier_user">ClassDef cups_applier_user<a href="#classdef-cups_applier_user" class="hash-link" aria-label="Direct link to ClassDef cups_applier_user" title="Direct link to ClassDef cups_applier_user">​</a></h2>
<p><strong>cups_applier_user</strong>: The function of cups_applier_user is to serve as a subclass of applier_frontend and implement the policy application logic for CUPS (Common Unix Printing System) printer configurations in the admin context.</p>
<p><strong>attributes</strong>:
· storage: An instance of the storage class, which is used to interact with the Windows Registry and other storage mechanisms.
· sid: The security identifier (SID) of the user or machine for which policies are being applied.
· username: The username for which policies are being applied, if applicable.</p>
<p><strong>Code Description</strong>:
The cups_applier_user class is a subclass of applier_frontend and is used to implement the policy application logic for CUPS printer configurations in the admin context. It overrides the __init__() method to initialize the storage and sid attributes, and sets the __module_enabled__ attribute based on the result of a call to check_enabled().</p>
<p>The user_context_apply() method is not overridden, so it simply does nothing when called. The run() method is implemented to install the CUPS package if it is not already installed, and then connect to the printers specified in the storage for the given sid.</p>
<p>The admin_context_apply() method is overridden to perform the printer configuration assigned for the user if the current module is enabled in the gpoa configuration. If the module is not enabled, it does nothing.</p>
<p>The __module_name__, __module_experimental__, and __module_enabled__ attributes are used by the gpoa application to determine whether the current module should be loaded and applied.</p>
<p><strong>Note</strong>:
The cups_applier_user class is intended to be used as a subclass of applier_frontend to implement the policy application logic for CUPS printer configurations in the admin context. Subclasses should not override the user_context_apply() method, as it is not used in this context. Subclasses should also ensure that the __module_name__, __module_experimental__, and __module_enabled__ attributes are set appropriately.</p>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Example usage of cups_applier_user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> gpoa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">frontend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">applier_frontend </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> applier_frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> gpoa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">storage </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Initialize storage and sid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Storage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;S-1-5-21-1234567890-1234567890-1234567890-123456&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Initialize cups_applier_user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cups_applier </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cups_applier_user</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;username&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Apply policies in admin context</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cups_applier</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">admin_context_apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will install the CUPS package if it is not already installed, and then connect to the printers specified in the storage for the given sid in the admin context.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-storage-sid-username">FunctionDef <strong>init</strong>(self, storage, sid, username)<a href="#functiondef-initself-storage-sid-username" class="hash-link" aria-label="Direct link to functiondef-initself-storage-sid-username" title="Direct link to functiondef-initself-storage-sid-username">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong>init</strong> is to initialize the cups_applier_user object with the required parameters.</p>
<p><strong>parameters</strong>: The parameters of this Function.
· storage: The storage object that contains the information about the modules.
· sid: The sid of the user.
· username: The username.</p>
<p><strong>Code Description</strong>: The <strong>init</strong> function initializes the cups_applier_user object with the required parameters. It sets the storage, sid, and username attributes with the provided parameters. It then calls the check_enabled function, passing in the storage, __module_name, and __module_enabled attributes as parameters. The check_enabled function checks if the module is enabled or not based on the storage and the name of the module. The result of this function call is stored in the __module_enabled attribute.</p>
<p>The __module_name attribute is not defined in this function, but it is used in the check_enabled function. It is likely that this attribute is defined elsewhere in the cups_applier_user class and is used to determine if the module is enabled or not.</p>
<p>The check_enabled function is defined in the applier_frontend module and is used to check if a module is enabled or not based on the storage and the name of the module. It first retrieves the value of the module_name from the storage using the get_value method. If the value is not found or is None, it sets the value to False. Then, it checks if the module is enabled by comparing the value of the module_name with the value of the module_experimental parameter. If the module is experimental and not enabled, it sets the value of the module_name to False. Finally, it returns the value of the module_name.</p>
<p>The check_enabled function is called with the __module_name and __module_enabled attributes as parameters. These attributes are likely defined elsewhere in the cups_applier_user class and are used to determine if the module is enabled or not.</p>
<p><strong>Note</strong>: None.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-user_context_applyself">FunctionDef user_context_apply(self)<a href="#functiondef-user_context_applyself" class="hash-link" aria-label="Direct link to FunctionDef user_context_apply(self)" title="Direct link to FunctionDef user_context_apply(self)">​</a></h3>
<p><strong>user_context_apply</strong>: The function of user_context_apply does not perform any specific operation. It is a placeholder function with an intention to not implement printer configuration as part of user context.</p>
<p><strong>Parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>:</p>
<p>The function is defined as <code>def user_context_apply(self):</code> with <code>self</code> as a parameter, which represents the instance of the class to which this method belongs.</p>
<p>The function body contains a docstring that explains the reason behind not implementing printer configuration in the user context:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Printer configuration is the system configuration so there</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">is no point in implementing this function.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&#x27;&#x27;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The function itself is empty, indicated by the <code>pass</code> statement, which is a placeholder and does nothing when executed.</p>
<p><strong>Note</strong>:</p>
<ol>
<li>This function is intended to be a placeholder and does not perform any operation.</li>
<li>If you need to implement user context-specific functionality, you should modify this function or create a new one, ensuring it meets your requirements.</li>
<li>Always check the docstring for any function to understand the reasoning behind its implementation or lack thereof.</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-runself-1">FunctionDef run(self)<a href="#functiondef-runself-1" class="hash-link" aria-label="Direct link to FunctionDef run(self)" title="Direct link to FunctionDef run(self)">​</a></h3>
<p><strong>run</strong>: The function of run is to apply printer configurations for a user in the CUPS printing system based on the user&#x27;s SID (Security Identifier).</p>
<p><strong>parameters</strong>:
· <code>self</code>: The cups_applier_user object that contains the user&#x27;s printer configurations.</p>
<p><strong>Code Description</strong>:
The run function first checks if the &#x27;cups&#x27; package is installed in the system using the is_rpm_installed function. If the package is not installed, it logs a warning message and returns.</p>
<p>If the package is installed, it creates a connection to the CUPS server using the cups.Connection() function. It then retrieves the list of printer configurations associated with the user&#x27;s SID from the storage using the storage_get_printers function.</p>
<p>If there are any printer configurations, it loops through each configuration and calls the connect_printer function to add each printer to the CUPS system.</p>
<p>This function is called by the admin_context_apply function of the cups_applier_user object in the cups_applier.py module. The cups_applier_user object is responsible for applying and managing printer configurations for a specific user in the CUPS printing system.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The run function assumes that the cups_applier_user object has a valid SID and a valid connection to the storage.</li>
<li>The run function may raise an exception if there is an error in the printer configurations or if there is an error in adding the printers to the CUPS system. It is recommended to handle the exception in the caller function.</li>
</ul>
<p><strong>Output Example</strong>:
Suppose we have a database table <code>printer_entry</code> with the following data:</p>
<table><thead><tr><th>id</th><th>name</th><th>sid</th></tr></thead><tbody><tr><td>1</td><td>Printer1</td><td>S-1-5-21-1234</td></tr><tr><td>2</td><td>Printer2</td><td>S-1-5-21-5678</td></tr><tr><td>3</td><td>Printer3</td><td>S-1-5-21-9012</td></tr></tbody></table>
<p>Calling <code>cups_applier_user.admin_context_apply(cups_applier_user_obj)</code> will apply the printer configurations associated with the user&#x27;s SID to the CUPS system. In this example, if the user&#x27;s SID is <code>S-1-5-21-1234</code>, the <code>run</code> function will add the <code>Printer1</code> to the CUPS system.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-admin_context_applyself">FunctionDef admin_context_apply(self)<a href="#functiondef-admin_context_applyself" class="hash-link" aria-label="Direct link to FunctionDef admin_context_apply(self)" title="Direct link to FunctionDef admin_context_apply(self)">​</a></h3>
<p><strong>admin_context_apply</strong>: The function of admin_context_apply is to perform printer configuration assigned for a user based on the status of a module.</p>
<p><strong>parameters</strong>:
· <code>self</code>: The cups_applier_user object that contains the user&#x27;s printer configurations.</p>
<hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/gpupdate-docs/docs/gpoa/frontend/control_applier"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">control_applier</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gpupdate-docs/docs/gpoa/frontend/envvar_applier"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">envvar_applier</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#functiondef-storage_get_printersstorage-sid" class="table-of-contents__link toc-highlight">FunctionDef storage_get_printers(storage, sid)</a></li><li><a href="#functiondef-connect_printerconnection-prn" class="table-of-contents__link toc-highlight">FunctionDef connect_printer(connection, prn)</a></li><li><a href="#classdef-cups_applier" class="table-of-contents__link toc-highlight">ClassDef cups_applier</a><ul><li><a href="#functiondef-initself-storage" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, storage)</a></li><li><a href="#functiondef-runself" class="table-of-contents__link toc-highlight">FunctionDef run(self)</a></li><li><a href="#functiondef-applyself" class="table-of-contents__link toc-highlight">FunctionDef apply(self)</a></li></ul></li><li><a href="#classdef-cups_applier_user" class="table-of-contents__link toc-highlight">ClassDef cups_applier_user</a><ul><li><a href="#functiondef-initself-storage-sid-username" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, storage, sid, username)</a></li><li><a href="#functiondef-user_context_applyself" class="table-of-contents__link toc-highlight">FunctionDef user_context_apply(self)</a></li><li><a href="#functiondef-runself-1" class="table-of-contents__link toc-highlight">FunctionDef run(self)</a></li><li><a href="#functiondef-admin_context_applyself" class="table-of-contents__link toc-highlight">FunctionDef admin_context_apply(self)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gpupdate-docs/docs/gpoa/backend/samba_backend">Samba Backend</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 BaseALT LTD, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>