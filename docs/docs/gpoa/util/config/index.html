<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-gpoa/util/config" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">config | GPUpdate Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://august-alt.github.io/gpupdate-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://august-alt.github.io/gpupdate-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://august-alt.github.io/gpupdate-docs/docs/gpoa/util/config"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="config | GPUpdate Docs"><meta data-rh="true" name="description" content="ClassDef GPConfig"><meta data-rh="true" property="og:description" content="ClassDef GPConfig"><link data-rh="true" rel="icon" href="/gpupdate-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/util/config"><link data-rh="true" rel="alternate" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/util/config" hreflang="en"><link data-rh="true" rel="alternate" href="https://august-alt.github.io/gpupdate-docs/docs/gpoa/util/config" hreflang="x-default"><link rel="stylesheet" href="/gpupdate-docs/assets/css/styles.d27c289a.css">
<script src="/gpupdate-docs/assets/js/runtime~main.9c9ca5ac.js" defer="defer"></script>
<script src="/gpupdate-docs/assets/js/main.77502ab4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/gpupdate-docs/"><div class="navbar__logo"><img src="/gpupdate-docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/gpupdate-docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">GPUpdate Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/gpupdate-docs/docs/gpoa/backend/applier_backend">gpoa</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/backend/applier_backend">backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/frontend/applier_frontend">frontend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/gpt/">gpt</a><button aria-label="Expand sidebar category &#x27;gpt&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/plugin/">plugin</a><button aria-label="Expand sidebar category &#x27;plugin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/storage/cache">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/gpupdate-docs/docs/gpoa/test/frontend/appliers/test_controls">test</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/">util</a><button aria-label="Collapse sidebar category &#x27;util&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/arguments">arguments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/config">config</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/dbus">dbus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/exceptions">exceptions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/gpoa_ini_parsing">gpoa_ini_parsing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/kerberos">kerberos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/logging">logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/paths">paths</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/preg">preg</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/roles">roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/rpm">rpm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/samba">samba</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/sid">sid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/signals">signals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/system">system</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/users">users</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/windows">windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/xdg">xdg</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/gpupdate-docs/docs/gpoa/util/xml">xml</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/gpupdate-docs/docs/tools/parsing_chrom_admx_intvalues">tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/gpupdate-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">gpoa</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/gpupdate-docs/docs/gpoa/util/"><span itemprop="name">util</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">config</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>config</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="classdef-gpconfig">ClassDef GPConfig<a href="#classdef-gpconfig" class="hash-link" aria-label="Direct link to ClassDef GPConfig" title="Direct link to ClassDef GPConfig">​</a></h2>
<p><strong>GPConfig</strong> : The GPConfig class is used to interact with the configuration file located at &#x27;/etc/gpupdate/gpupdate.ini&#x27;. It provides methods to get and set various parameters in the configuration file, and also handles writing the changes back to the file.</p>
<p><strong>attributes</strong> :</p>
<p>· <code>__config_path</code> : A string representing the path to the configuration file.</p>
<p><strong>Code Description</strong> :
The GPConfig class initializes the <code>config_path</code> attribute with a default value of &#x27;/etc/gpupdate/gpupdate.ini&#x27;. The <code>__init__</code> method takes an optional <code>config_path</code> parameter, which can be used to specify a different configuration file path. It then reads the configuration file using the <code>ConfigParser</code> class and stores it in the <code>full_config</code> attribute.</p>
<p>The <code>get_backend</code> method is used to fetch the name of the backend from the configuration file. It first checks if the &#x27;gpoa&#x27; section exists in the configuration file, and then checks if the &#x27;backend&#x27; key exists in the &#x27;gpoa&#x27; section. If both conditions are met, it checks if the value of the &#x27;backend&#x27; key is a valid backend by calling the <code>get_backends</code> function. If the value is valid, it returns the value, otherwise it returns &#x27;samba&#x27; as the default backend.</p>
<p>The <code>set_backend</code> method is used to set the name of the backend in the configuration file. It takes an optional <code>backend_name</code> parameter, which defaults to &#x27;local&#x27;. It sets the value of the &#x27;backend&#x27; key in the &#x27;gpoa&#x27; section to the <code>backend_name</code> parameter. It then writes the changes back to the configuration file using the <code>write_config</code> method.</p>
<p>The <code>get_dc</code> method is used to fetch the Domain Controller from the configuration file. It first checks if the &#x27;samba&#x27; section exists in the configuration file, and then checks if the &#x27;dc&#x27; key exists in the &#x27;samba&#x27; section. If both conditions are met, it returns the value of the &#x27;dc&#x27; key.</p>
<p>The <code>get_local_policy_template</code> method is used to fetch the name of the chosen Local Policy template from the configuration file. It first checks if the &#x27;gpoa&#x27; section exists in the configuration file, and then checks if the &#x27;local-policy&#x27; key exists in the &#x27;gpoa&#x27; section. If both conditions are met, it returns the value of the &#x27;local-policy&#x27; key.</p>
<p>The <code>set_local_policy_template</code> method is used to set the name of the Local Policy template in the configuration file. It takes an optional <code>template_name</code> parameter, which defaults to &#x27;default&#x27;. It sets the value of the &#x27;local-policy&#x27; key in the &#x27;gpoa&#x27; section to the <code>template_name</code> parameter. It then writes the changes back to the configuration file using the <code>write_config</code> method.</p>
<p>The <code>write_config</code> method is used to write the changes made to the <code>full_config</code> attribute back to the configuration file. It takes no parameters and simply writes the <code>full_config</code> attribute to the configuration file specified in the <code>__config_path</code> attribute.</p>
<p>The GPConfig class is used in the <code>backend_factory</code> function in the &#x27;backend_factory.py&#x27; module to get the name of the backend and the Domain Controller from the configuration file. It is also used in the <code>local_policy_path</code> function in the &#x27;paths.py&#x27; module to get the name of the chosen Local Policy template from the configuration file.</p>
<p><strong>Note</strong> :</p>
<ul>
<li>The <code>get_backends</code> and <code>log</code> functions used in the <code>get_backend</code> method are not defined in the provided code. Make sure they are defined and available in the environment where the GPConfig class is used.</li>
<li>The <code>write_config</code> method writes the changes made to the <code>full_config</code> attribute back to the configuration file. Be careful while using this method as it can overwrite the existing configuration file.</li>
</ul>
<p><strong>Output Example</strong> :</p>
<p>Here&#x27;s an example of how the GPConfig class can be used :</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> GPConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_backend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># prints the name of the backend</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_backend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;new_backend&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># sets the name of the backend</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write_config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># writes the changes back to the configuration file</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-initself-config_path">FunctionDef <strong>init</strong>(self, config_path)<a href="#functiondef-initself-config_path" class="hash-link" aria-label="Direct link to functiondef-initself-config_path" title="Direct link to functiondef-initself-config_path">​</a></h3>
<p><strong><strong>init</strong></strong>: The function of <strong>init</strong> is to initialize the GPConfig object.</p>
<p><strong>parameters</strong>:
· config_path: This parameter is an optional string that specifies the path to the configuration file. If not provided, the object will use a default configuration.</p>
<p><strong>Code Description</strong>:
The __init__ function initializes the GPConfig object by first checking if the config_path parameter is provided. If it is, the object sets the __config_path attribute to the provided path.</p>
<p>Next, the function creates a ConfigParser object called full_config. The ConfigParser object is used to read and write .ini-style configuration files in Python.</p>
<p>Finally, the function reads the configuration file specified by __config_path using the read() method of the full_config object. This loads the configuration file into the full_config object, allowing the GPConfig object to access and manipulate the configuration settings.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The config_path parameter is optional. If it is not provided, the GPConfig object will use a default configuration.</li>
<li>The __config_path attribute is a private attribute that should not be accessed directly. Instead, use the config_path property to get or set the path to the configuration file.</li>
<li>The full_config object is an instance of the ConfigParser class, which provides methods for reading and writing configuration files. Refer to the ConfigParser documentation for more information on how to use this object.</li>
<li>The read() method of the ConfigParser class can take a list of file paths, allowing you to load multiple configuration files at once. If you need to load multiple configuration files, pass a list of file paths to the read() method instead of setting the __config_path attribute.</li>
<li>The read() method returns a list of successfully read files. If you need to check if the configuration file was successfully loaded, check the length of this list. If it is 0, the configuration file was not found or could not be read.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-get_backendself">FunctionDef get_backend(self)<a href="#functiondef-get_backendself" class="hash-link" aria-label="Direct link to FunctionDef get_backend(self)" title="Direct link to FunctionDef get_backend(self)">​</a></h3>
<p><strong>get_backend</strong>: The function of get_backend in the GPConfig class is to fetch the name of the backend from the configuration file. It checks if the &#x27;gpoa&#x27; and &#x27;backend&#x27; keys exist in the configuration dictionary, and if the value of &#x27;backend&#x27; is one of the backends supported by GPOA. If the specified backend is not supported, it returns &#x27;samba&#x27; as the default backend.</p>
<p><strong>Parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>: The function first checks if the &#x27;gpoa&#x27; key is present in the configuration dictionary. If it is, then it checks if the &#x27;backend&#x27; key is also present in the &#x27;gpoa&#x27; sub-dictionary. If both keys are present, it checks if the value of &#x27;backend&#x27; is one of the backends supported by GPOA by calling the get_backends() function. If the backend is supported, it returns the value of &#x27;backend&#x27;. If the &#x27;gpoa&#x27; key is not present in the configuration dictionary, or if the &#x27;backend&#x27; key is not present in the &#x27;gpoa&#x27; sub-dictionary, or if the value of &#x27;backend&#x27; is not one of the backends supported by GPOA, it returns &#x27;samba&#x27; as the default backend.</p>
<p>The get_backends() function is called in two other parts of the project - config.py and GPConfig/get_backend in config.py. In config.py, the function is used to check if the backend specified in the configuration file is one of the backends supported by GPOA. If the backend is not in the list returned by get_backends(), the function returns &#x27;samba&#x27; as the default backend. In GPConfig/get_backend in config.py, the function is called to get the list of backends supported by GPOA and to check if the backend specified in the configuration file is one of the backends in the list.</p>
<p>The get_backend() function is called in the backend_factory function in the backend/<strong>init</strong>.py file. The backend_factory function returns an instance of a backend object based on the backend specified in the configuration file. If the backend specified in the configuration file is &#x27;samba&#x27;, the backend_factory function creates an instance of the samba_backend class. If the backend specified in the configuration file is &#x27;local&#x27;, the backend_factory function creates an instance of the nodomain_backend class.</p>
<p><strong>Note</strong>: It is important to note that the get_backends() function returns a list of backends supported by GPOA, and not a string. Therefore, when calling the function, it is necessary to use it as a list and not as a string.</p>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&#x27;samba&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, the function returns &#x27;samba&#x27; as the default backend because the &#x27;gpoa&#x27; and &#x27;backend&#x27; keys are not present in the configuration dictionary, or the value of &#x27;backend&#x27; is not one of the backends supported by GPOA.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-set_backendself-backend_name">FunctionDef set_backend(self, backend_name)<a href="#functiondef-set_backendself-backend_name" class="hash-link" aria-label="Direct link to FunctionDef set_backend(self, backend_name)" title="Direct link to FunctionDef set_backend(self, backend_name)">​</a></h3>
<p><strong>set_backend</strong>: The function of set_backend is to set the backend name in the configuration settings.</p>
<p><strong>parameters</strong>:
· backend_name (str): The name of the backend to be set. The default value is &#x27;local&#x27;.</p>
<p><strong>Code Description</strong>:
The set_backend function begins by setting the &#x27;backend&#x27; key of the &#x27;gpoa&#x27; section in the <code>full_config</code> attribute of the GPConfig object to the value of the <code>backend_name</code> parameter.</p>
<p>The function then calls the <code>write_config()</code> method to write the updated configuration settings to a file. This function is defined in the same GPConfig class and ensures that the updated configuration settings are persisted to a file.</p>
<p>From a functional perspective, the set_backend function is called by other modules or functions in the project to update the backend name in the configuration settings. This allows the backend name to be changed as needed, and the updated settings to be saved for future use.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The <code>full_config</code> attribute of the GPConfig object is expected to be a dictionary containing the configuration settings.</li>
<li>The <code>write_config()</code> method of the GPConfig class is called to persist the updated configuration settings to a file.</li>
<li>The set_backend function should only be called after obtaining a valid <code>backend_name</code> value, as it will update the existing configuration file.</li>
<li>If the configuration file cannot be opened or written to, an exception will be raised in the <code>write_config()</code> method. It is recommended to handle exceptions appropriately in the calling code.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-get_dcself">FunctionDef get_dc(self)<a href="#functiondef-get_dcself" class="hash-link" aria-label="Direct link to FunctionDef get_dc(self)" title="Direct link to FunctionDef get_dc(self)">​</a></h3>
<p><strong>get_dc</strong>: The function of get_dc is to fetch the Domain Controller (DC) from the configuration file.</p>
<p><strong>parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>: The function first checks if the &#x27;samba&#x27; key exists in the <code>self.full_config</code> dictionary. If it does, then it further checks if the &#x27;dc&#x27; key exists in the &#x27;samba&#x27; section of the configuration file. If the &#x27;dc&#x27; key exists, then the function returns its value, which is the address of the Domain Controller.</p>
<p>From a functional perspective, this function is called in the <code>gpoa/backend/__init__.py/backend_factory</code> object to determine the Domain Controller to be used in the <code>samba_backend</code> constructor. If the &#x27;dc&#x27; key is not present in the &#x27;samba&#x27; section of the configuration file, then the <code>samba_backend</code> constructor will not be initialized.</p>
<p><strong>Note</strong>: It is important to ensure that the &#x27;samba&#x27; and &#x27;dc&#x27; keys are present in the configuration file, otherwise, the function will return None, which may cause issues in the <code>samba_backend</code> constructor.</p>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&#x27;dc-01.example.com&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-get_local_policy_templateself">FunctionDef get_local_policy_template(self)<a href="#functiondef-get_local_policy_templateself" class="hash-link" aria-label="Direct link to FunctionDef get_local_policy_template(self)" title="Direct link to FunctionDef get_local_policy_template(self)">​</a></h3>
<p><strong>get_local_policy_template</strong>: The function of get_local_policy_template is to fetch the name of the chosen Local Policy template from the configuration file. If no Local Policy template name is specified in the configuration file, it returns the default Local Policy template name determined by the get_default_policy_name function.</p>
<p><strong>Parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>:
The function first checks if the &#x27;gpoa&#x27; and &#x27;local-policy&#x27; keys exist in the self.full_config dictionary. If both keys exist, it returns the value associated with the &#x27;local-policy&#x27; key.</p>
<p>If the &#x27;gpoa&#x27; or &#x27;local-policy&#x27; keys do not exist in the self.full_config dictionary, the function calls the get_default_policy_name function to determine and return the preferred Local Policy template name based on the distribution type of ALT.</p>
<p>The get_default_policy_name function determines the Local Policy template name based on the server role of the Samba object and the contents of the &#x27;/etc/altlinux-release&#x27; file. If the server role is &#x27;active directory domain controller&#x27;, the function returns &#x27;ad-domain-controller&#x27;. If the &#x27;/etc/altlinux-release&#x27; file exists and its first line contains the word &#x27;server&#x27; (case-insensitive), the function returns &#x27;server&#x27;. Otherwise, the function returns &#x27;workstation&#x27;.</p>
<p>The function does not handle exceptions, so any errors that occur while checking for the file or reading its contents will be ignored. The function assumes that the only possible values for the Local Policy template name are &#x27;workstation&#x27;, &#x27;ad-domain-controller&#x27;, and &#x27;server&#x27;. If there are other possible values, the function will need to be updated accordingly.</p>
<p>The function is used in the local_policy_path function in the paths.py module to return the default Local Policy template name if none is specified in the configuration file.</p>
<p><strong>Referenced Objects</strong>:</p>
<ul>
<li>The function calls the get_default_policy_name function to determine the preferred Local Policy template name based on the distribution type of ALT.</li>
</ul>
<p><strong>Use Case</strong>:
The function is used in the GPConfig class&#x27;s get_local_policy_template method to return the default Local Policy template name if none is specified in the configuration file. It is also used in the local_policy_path function in the paths.py module to determine the path to the Local Policy template directory.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The function does not handle exceptions, so any errors that occur while checking for the file or reading its contents will be ignored.</li>
<li>The function assumes that the only possible values for the Local Policy template name are &#x27;workstation&#x27;, &#x27;ad-domain-controller&#x27;, and &#x27;server&#x27;. If there are other possible values, the function will need to be updated accordingly.</li>
</ul>
<p><strong>Output Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> GPConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_local_policy_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;workstation&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This output example shows the function being called on an instance of the GPConfig class. The function returns the default Local Policy template name &#x27;workstation&#x27; because no Local Policy template name is specified in the configuration file.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-set_local_policy_templateself-template_name">FunctionDef set_local_policy_template(self, template_name)<a href="#functiondef-set_local_policy_templateself-template_name" class="hash-link" aria-label="Direct link to FunctionDef set_local_policy_template(self, template_name)" title="Direct link to FunctionDef set_local_policy_template(self, template_name)">​</a></h3>
<p><strong>set_local_policy_template</strong>: The function of set_local_policy_template is to set the local policy template in the configuration settings of the GPConfig object.</p>
<p><strong>parameters</strong>:
· template_name (str): The name of the local policy template. The default value is &#x27;default&#x27;.</p>
<p><strong>Code Description</strong>:
The set_local_policy_template function begins by setting the &#x27;gpoa&#x27; key&#x27;s &#x27;local-policy&#x27; value of the <code>full_config</code> attribute of the GPConfig object to the <code>template_name</code> parameter. This modification changes the local policy template name in the configuration settings.</p>
<p>The function then calls the <code>write_config()</code> method, which is an instance method of the GPConfig class. The <code>write_config()</code> method writes the configuration settings to a file, ensuring that the updated configuration settings are saved and persisted.</p>
<p>From a functional perspective, the set_local_policy_template function is called by other functions in the project to update the local policy template in the configuration settings and save the changes to a file. This allows the configuration settings to be saved and loaded as needed.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The set_local_policy_template function modifies the <code>full_config</code> attribute of the GPConfig object, which is expected to be a dictionary containing the configuration settings.</li>
<li>The function calls the <code>write_config()</code> method to persist the configuration settings to a file. It is recommended to handle exceptions appropriately in the calling code if the configuration file cannot be opened or written to.</li>
<li>The set_local_policy_template function should only be called after the configuration settings have been updated, as it will overwrite the existing configuration file.</li>
<li>The <code>template_name</code> parameter is a string and represents the name of the local policy template. If an invalid template name is provided, it may result in unexpected behavior or errors when loading or applying the configuration settings.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functiondef-write_configself">FunctionDef write_config(self)<a href="#functiondef-write_configself" class="hash-link" aria-label="Direct link to FunctionDef write_config(self)" title="Direct link to FunctionDef write_config(self)">​</a></h3>
<p><strong>write_config</strong>: The function of write_config is to write the configuration settings to a file.</p>
<p><strong>parameters</strong>: This function does not take any parameters.</p>
<p><strong>Code Description</strong>:
The write_config function begins by opening the configuration file specified in the <code>__config_path</code> attribute of the GPConfig object using the &#x27;w&#x27; mode. This mode is used for writing to the file, and if the file already exists, it will be truncated to zero length. If the file does not exist, a new one will be created.</p>
<p>The function then writes the contents of the <code>full_config</code> attribute to the configuration file using the <code>write()</code> method. The <code>full_config</code> attribute is expected to be a dictionary containing the configuration settings.</p>
<p>The <code>with</code> statement is used to ensure that the file is properly closed after the write operation is completed, even if an exception occurs during the execution of the block.</p>
<p>From a functional perspective, the write_config function is called by other functions in the project to persist the configuration settings to a file. This allows the configuration settings to be saved and loaded as needed.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>The write_config function does not take any parameters, and it writes the current configuration settings to the file specified in the <code>__config_path</code> attribute of the GPConfig object.</li>
<li>The <code>full_config</code> attribute of the GPConfig object is expected to be a dictionary containing the configuration settings.</li>
<li>The <code>__config_path</code> attribute of the GPConfig object is expected to be a string containing the file path of the configuration file.</li>
<li>The write_config function should only be called after the configuration settings have been updated, as it will overwrite the existing configuration file.</li>
<li>If the configuration file cannot be opened or written to, an exception will be raised. It is recommended to handle exceptions appropriately in the calling code.</li>
</ul>
<hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/gpupdate-docs/docs/gpoa/util/arguments"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">arguments</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gpupdate-docs/docs/gpoa/util/dbus"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">dbus</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#classdef-gpconfig" class="table-of-contents__link toc-highlight">ClassDef GPConfig</a><ul><li><a href="#functiondef-initself-config_path" class="table-of-contents__link toc-highlight">FunctionDef <strong>init</strong>(self, config_path)</a></li><li><a href="#functiondef-get_backendself" class="table-of-contents__link toc-highlight">FunctionDef get_backend(self)</a></li><li><a href="#functiondef-set_backendself-backend_name" class="table-of-contents__link toc-highlight">FunctionDef set_backend(self, backend_name)</a></li><li><a href="#functiondef-get_dcself" class="table-of-contents__link toc-highlight">FunctionDef get_dc(self)</a></li><li><a href="#functiondef-get_local_policy_templateself" class="table-of-contents__link toc-highlight">FunctionDef get_local_policy_template(self)</a></li><li><a href="#functiondef-set_local_policy_templateself-template_name" class="table-of-contents__link toc-highlight">FunctionDef set_local_policy_template(self, template_name)</a></li><li><a href="#functiondef-write_configself" class="table-of-contents__link toc-highlight">FunctionDef write_config(self)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gpupdate-docs/docs/gpoa/backend/samba_backend">Samba Backend</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 BaseALT LTD, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>